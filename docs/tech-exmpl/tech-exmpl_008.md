# 什么是虚拟 IP

> 原文：[`techbyexample.com/virtual-ip/`](https://techbyexample.com/virtual-ip/)

目录

+   概述

+   虚拟 IP 如何帮助高可用性（负载均衡与故障转移）

    +   故障转移示例

    +   负载均衡示例

+   结论

# **概述**

在分布式系统的最终层，服务器或机器和网卡（NIC）有一个定义的物理 IP 地址。物理 IP 地址是分配给某台机器或设备的地址，无法分配给另一台物理设备。换句话说，物理 IP 地址是与特定机器绑定的。

虚拟 IP 地址不绑定到特定的机器或设备上。虚拟 IP 地址可以从一台设备移动到另一台设备，就像是一个浮动的 IP 地址。

当我们说虚拟 IP 地址属于某台服务器时，并不意味着它绑定到该服务器的网卡上。它在某一时刻分配给该服务器，而在另一个时刻同一虚拟 IP 地址可能会分配给另一台服务器。

虚拟 IP 地址的典型应用场景是当一组物理设备或服务器作为一个单独的应用或服务来工作时。

虚拟 IP 地址作为该应用程序或服务的入口点，提供负载均衡和故障转移机制，帮助实现高可用性。它如何提供这些功能，我们将在本教程中进一步探讨。

虚拟 IP 地址可以分配给 –

+   多台服务器

+   多个域名

+   多个应用程序托管在单一服务器上

+   单台服务器本身

+   …

# **虚拟 IP 如何帮助高可用性（负载均衡与故障转移）**

我们来看两个示例

## **故障转移示例**

虚拟 IP 地址在高可用性和故障转移中的应用举例是数据库的情况。在数据库中，通常有一个主节点和几个备份节点。主节点背后有一个特定的虚拟 IP 地址。客户端始终通过这个虚拟 IP 地址与主节点进行通信。

如果在后台，主服务器宕机，其虚拟 IP 地址将被分配给成为新主服务器的机器。这是因为虚拟 IP 地址不像物理 IP 地址那样绑定到特定的物理机器。客户端仍然与相同的虚拟 IP 地址进行通信，无法察觉主服务器已更换，且现在是另一台机器。

上述描述的是虚拟 IP 提供的故障转移机制

## **负载均衡示例**

另一个通过提供虚拟 IP 进行负载均衡来实现高可用性的示例如下：

由于虚拟 IP 地址并不绑定到特定机器，我们可以构建一个负载均衡器，将消息发送到其后面的虚拟 IP 地址集合。负载均衡器后的每台机器都会分配一个虚拟 IP 地址。当任何机器因故障或其他原因停止工作时，它的虚拟 IP 地址可以分配给新启动的机器。

我们可以想象在负载均衡器后面有一组免费的虚拟 IP 地址。每当一个新实例启动时，它就会从这组空闲的虚拟 IP 池中获取一个虚拟 IP。

# **结论**

这就是关于虚拟 IP 地址的全部内容。希望你喜欢这篇文章。请在评论中留下反馈。

**注意：** 请查看我们的系统设计教程系列 [系统设计问题](https://techbyexample.com/system-design-questions/)
