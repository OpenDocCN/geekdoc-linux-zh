# `lsblk` 命令

## 概述

`lsblk` 命令显示系统上的块和循环设备。当您想要格式化磁盘、写入文件系统、检查文件系统以及了解设备的挂载点时，它特别有用。

## 示例

1.  基本用法相当简单 - 只需执行 'lsblk' 而不使用任何选项。

```sh
      lsblk 

```

1.  使 `lsblk` 显示空设备

```sh
      lsblk -a 

```

1.  使 `lsblk` 以字节为单位打印大小信息

```sh
      lsblk -b 

```

1.  使 `lsblk` 打印每个设备的地域模型

```sh
      lsblk -z 

```

1.  使 `lsblk` 跳过从属设备的条目

```sh
      lsblk -d 

```

1.  使 `lsblk` 在树格式化中使用 ASCII 字符

```sh
      lsblk -i 

```

1.  使 `lsblk` 显示设备所有者、组和模式信息

```sh
      lsblk -m 

```

1.  使 `lsblk` 输出选择列

```sh
      lsblk -o NAME,SIZE 

```

## 语法

```sh
      lsblk [options] [<device> ...] 

```

## 读取 `lsblk` 提供的信息

在不使用标志或命令行参数运行 `lsblk` 时，它将通用磁盘信息写入 STDOUT。以下是一个解释该信息的表格：

| 列表名称 | 含义 | 解释 |
| :-: | :-- | :-- |
| NAME | 设备的名称。 | 显示设备的名称。 |
| RM | 可移动。 | 如果设备是可移动的显示 1，如果不是则显示 0。 |
| SIZE | 设备的大小。 | 显示设备的大小。 |
| RO | 只读。 | 如果为只读显示 1，如果不是则显示 0。 |
| TYPE | 块或循环设备的类型。 | 显示整个磁盘为 `disk`，分区为 `part`。 |
| MOUNTPOINTS | 设备挂载的位置。 | 显示设备挂载的位置。如果没有挂载则为空。 |

## 读取特定设备的信息

当将设备的绝对路径传递给 `lsblk` 时，`lsblk` 可以显示特定设备的信息。例如，显示 `sda` 磁盘信息的 `lsblk` 命令是：

```sh
      lsblk /dev/sda 

```

## `lsblk` 的有用标志

以下是一个表格，展示了可以与 `lsblk` 一起使用的某些有用标志：

| **短标志** | **长标志** | **描述** |
| :-: | :-- | :-- |
| `-a` | `--all` | `lsblk` 默认不列出空设备。此选项禁用此限制。 |
| `-b` | `--bytes` | 以字节为单位打印 SIZE 列，而不是以可读格式。 |
| `-d` | `--nodeps` | 不打印设备持有者或从属设备。 |
| `-D` | `--discard` | 打印每个设备的 discard（TRIM、UNMAP）功能信息。 |
| `-E` | `--dedup column` | 将列用作去重键以去重输出树。如果设备没有此键，或者设备是分区且父整个磁盘设备提供与设备相同的键，则设备始终被打印。 |
| `-e` | `--exclude list` | 排除由逗号分隔的设备主设备号列表指定的设备。请注意，RAM 磁盘（主设备号=1）默认排除。此过滤器仅应用于顶级设备。 |
| `-f` | `--fs` | 显示有关文件系统的信息。 |
| `-h` | `--help` | 打印帮助文本并退出。 |
| `-l` | `--include list` | 以列表格式显示所有信息。 |
| `-J` | `--json` | 以 JSON 格式显示所有信息。 |
| `-l` | `--list` | 以列表格式显示所有信息。 |
| `-m` | `--perms` | 显示设备所有者、组和模式的信息。 |
| `-M` | `--merge` | 将子树的父节点分组，以提供更易于阅读的输出，用于 RAID 和多路径设备。需要树形输出。 |
| `-n` | `--noheadings` | 不打印标题行。 |
| `-o` | `--output 列` | 指定要打印的输出列。使用 `--help` 获取所有受支持列的列表。 |
| `-O` | `--output-all` | 显示所有可用的列。 |
| `-p` | `--paths` | 显示绝对设备路径。 |
| `-P` | `--pairs` | 使用 key="value" 输出格式。所有潜在的不安全字符都使用十六进制转义（\x`）表示。 |
| `-r` | `--raw` | 使用原始输出格式。在 NAME、KNAME、LABEL、PARTLABEL 和 MOUNTPOINT 列中，所有潜在的不安全字符都使用十六进制转义（\x`）表示。 |
| `-S` | `--scsi` | 仅输出关于 SCSI 设备的信息。所有分区、从属设备和持有设备都被忽略。 |
| `-s` | `--inverse` | 以相反的顺序打印依赖关系。 |
| `-t` | `--topology` | 输出关于块设备拓扑的信息。此选项等同于 "-o NAME,ALIGNMENT,MIN-IO,OPT-IO,PHY-SEC,LOG-SEC,ROTA,SCHED,RQ-SIZE"。 |
| `-T` | `--tree[=列]` | 以树形格式显示所有信息。 |
| `-V` | `--version` | 输出版本信息并退出。 |
| `-w` | `--width` | 指定输出宽度为字符数。默认值是终端列数，如果没有在终端上执行，则默认不限制输出宽度。 |
| `-x` | `--sort [列]` | 按列排序输出行。此选项默认启用 `--list` 输出格式。可以使用 `--tree` 选项强制以树形输出，然后树分支按列排序。 |
| `-z` | `--zoned` | 为每个设备打印区域模型。 |
| `-` | `--sysroot 目录` | 收集除发出 lsblk 命令的实例之外的 Linux 实例的数据。指定的目录是要检查的 Linux 实例的系统根目录。 |

## 退出码

与每个 Unix / Linux 程序一样，`lslbk` 会向环境返回一个退出码。以下是所有退出码的表格。

| 退出码 | 含义 |
| :-: | :-- |
| 0 | 成功退出。 |
| 1 | 失败退出。 |
| 32 | 指定的设备（们）未找到。 |
| 64 | 找到了一些指定的设备，但也有一些没有找到。 |
