# 缓存和状态

当 libcurl 用于互联网传输时，它将数据存储在缓存中，并将状态存储在状态存储中，以便更快、更好地执行后续传输。

缓存与`CURL`或`CURLM`句柄相关联，具体取决于使用的 libcurl API 是简单模式还是多线程模式。

## DNS 缓存

当 libcurl 解析主机名的 IP 地址时，它将结果存储在其 DNS 缓存中（默认生存时间为 60 秒），以便后续查找可以立即使用缓存数据，而不是再次执行（可能较慢）的解析操作。此缓存仅存在于内存中。

## 连接缓存

也称为连接池。这是 curl 在传输完成后将活动连接放置的地方，以便后续传输可能能够使用已经存在的连接而不是必须设置一个新的连接。当连接被重用时，curl 避免名称查找、TLS 握手等操作。此缓存仅存在于内存中。

## TLS 会话 ID 缓存

当 curl 使用 TLS 时，它将*会话 ID*保存在缓存中。当后续传输需要与具有缓存会话 ID 的主机重新执行 TLS 握手时，握手可以更快地完成。此缓存仅存在于内存中。

## CA 存储缓存

当 curl 创建新的连接并执行 TLS 握手时，它需要加载和解析*CA 存储*以用于验证远程服务器提供的证书。CA 存储缓存将解析的 CA 存储在内存中一段时间（默认为 24 小时），以便后续握手通过避免重新解析可能的大量数据而更快地完成。此缓存仅存在于内存中。自 7.87.0 版本添加。

## HSTS

HSTS 是 HTTP 严格传输安全。HTTPS 服务器可以通知客户端，它们希望客户端今后仅使用 HTTPS 连接到其主机名，而不是 HTTP，即使使用`HTTP://` URL。curl 将此连接升级信息保存在内存中，并可以指示从磁盘加载它并将它保存到磁盘。

## Alt-Svc

`Alt-Svc:`是一个 HTTP 响应头，通知客户端有关同一服务也提供的替代主机名、端口号和协议版本。curl 将此替代服务信息保存在内存中，并可以指示从磁盘加载它并将它保存到磁盘。

## Cookies

Cookies 是由 HTTP 服务器发送到客户端的名称值对，旨在在后续请求中发送回匹配条件。curl 将所有 Cookies 保存在内存中，并可以指示从磁盘加载它们以及将它们保存到磁盘。
