# 替代服务

[RFC 7838](https://www.rfc-editor.org/rfc/rfc7838.txt)定义了一个 HTTP 头信息，允许服务器通过使用`Alt-Svc:`响应头告诉客户端，该服务器在另一个位置有一个或多个*替代方案*。

服务器建议的*替代方案*可能包括在同一主机上运行的其他端口的另一个服务器，在完全不同的主机名上，甚至可能通过另一个协议提供该服务。

## 启用

要让 curl 考虑提供的替代方案，告诉 curl 使用特定的 alt-svc 缓存文件，如下所示：

```sh
curl --alt-svc altcache.txt https://example.com/
```

然后，curl 在启动时从文件中加载现有的替代服务条目，并在进行 HTTP 请求时考虑这些条目；如果服务器发送新的或更新的`Alt-Svc:`头信息，curl 会在退出时将这些信息存储在缓存中。

## alt-svc 缓存

alt-svc 缓存类似于一个 cookie jar。它是一个基于文本的文件，每行存储一个替代方案，每个条目还有一个有效期，表示该特定替代方案的有效时长。

## 仅 HTTPS

`Alt-Svc:`只有在通过 HTTPS 连接到服务器时才被信任和解析。

## HTTP/3

截至 2019 年 8 月，使用`Alt-Svc:`头信息是启动客户端和服务器使用 HTTP/3 的唯一定义方式。然后服务器通过 HTTP/1 或 HTTP/2 向客户端暗示它也通过 HTTP/3 可用，如果 alt-svc 缓存这样指示，curl 可以在后续请求中使用 HTTP/3 连接到它。
