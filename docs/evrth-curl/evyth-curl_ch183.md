# 命令行 FTP

FTP，即文件传输协议，可能是 curl 支持的最古老的网络协议——它是在 20 世纪 70 年代初期创建的。官方规范仍然是首选的文档，即 [RFC 959](https://www.ietf.org/rfc/rfc959.txt)，发布于 1985 年，比第一个 curl 发布早十多年。

FTP 是在互联网和计算机的另一个时代创建的，因此它的工作方式与大多数其他协议略有不同。这些差异通常可以忽略，事情也能正常工作，但在某些情况下，了解这些差异也很重要，因为事情可能不会按计划运行。

## Ping-pong

FTP 协议是一种命令和响应协议；客户端发送命令，服务器响应。如果你使用 curl 的 `-v` 选项，你可以在传输过程中看到所有的命令和响应。

对于普通传输，大约需要 5 到 8 个命令来发送，以及同样多的响应等待读取。也许不必说，如果服务器位于远程位置，在文件传输可以设置并开始之前，需要等待 ping pong 的时间可能会很长。对于小文件，初始命令可能比实际数据传输花费更长的时间。

## 传输模式

当 FTP 客户端即将传输数据时，它会向服务器指定希望使用的传输模式。curl 支持的两种传输模式是 ‘ASCII’ 和 ‘BINARY’。Ascii 用于文本，通常意味着服务器在发送文件时转换换行符，而 binary 则表示发送未经修改的数据，并假设文件不是文本。

curl 默认为 FTP 使用二进制传输模式，你可以通过 `-B, --use-ascii` 选项或确保 URL 以 `;type=A` 结尾来请求 ASCII 模式。

## 认证

FTP 是一种通常需要用户名和密码才能访问的协议。对于允许匿名 FTP 访问的系统，你可以使用几乎任何你喜欢的名字和密码登录。当在 FTP URL 上使用 curl 进行传输且没有提供用户名或密码时，它会使用名字 `anonymous` 和密码 `ftp@example.com`。

如果你想要提供另一个用户名和密码，你可以通过 `-u, --user` 选项将它们传递给 curl，或者将信息嵌入到 URL 中：

```sh
curl --user daniel:secret ftp://example.com/download

curl ftp://daniel:secret@example.com/download
```

+   FTP 目录列表

+   使用 FTP 上传

+   自定义 FTP 命令

+   两个连接

+   目录遍历

+   FTPS
