# 贡献

贡献意味着帮助。

当你向项目贡献任何内容——代码、文档、错误修复、建议或仅仅是好的建议——我们假设你是经过授权的，并且你提供这些内容没有违反任何合同或法律。如果你没有授权，请不要向我们贡献。

向像 curl 这样的项目贡献可能有很多不同的方式。虽然源代码是构建产品的必需品，但我们还依赖于良好的文档、测试（包括测试代码和测试基础设施）、网络内容、用户支持和更多。

将你的更改或建议发送给团队，通过共同努力，我们可以修复问题、改进功能、澄清文档、添加功能或帮助你使任何其他你帮助的事情得到适当的处理。我们确保改进的代码和文档正确地合并到源树中，其他类型的贡献也适合接收。

请通过 邮件列表、提交问题或提交拉取请求来发送你的贡献。

## 建议

想法容易，实现困难。是的，我们确实欣赏好的想法和建议，关于做什么以及如何做，但如果你也愿意参与将想法变为现实，那么这些想法真正成为实际功能的可能性会大大增加。

我们已经在 `TODO` 文档中收集了想法，并且通常对流行的网络协议的当前趋势有所了解，所以通常不需要提醒我们那些。

## 应添加的内容

向 curl 或 libcurl 添加任何内容的最佳方法当然是首先将你的想法和建议提交给 curl 项目团队成员，然后与他们讨论这个想法是否适合添加，以及如何以最佳方式实现——假设你想将其合并到源代码仓库中。

项目通常批准那些改善当前协议支持的函数，特别是那些流行的客户端或浏览器有但 curl 还缺少的功能。

当然，你也可以向项目添加非代码内容，如文档、图形或网站内容，但一般规则同样适用于此。

如果你正在修复你遇到的问题或其他人报告的问题，我们非常高兴收到你的修复并将其尽快合并，

## 不应添加的内容

没有好的规则说明你可以添加或不能添加哪些功能，或者我们永远不会接受，但让我试着提几点你应该避免的事情，以减少摩擦并更快地成功：

+   不要先写一个大补丁然后发送到列表中进行讨论。始终先在列表上讨论，并尽早发送你的初步审查请求，以便获得对你设计和方法的反馈。这样可以避免浪费时间走上一条最终可能需要重写的路线。

+   当在代码中引入新内容时，您需要遵循已经存在的风格和架构。当您向普通传输代码路径添加代码时，例如，它必须以非阻塞方式异步工作。我们不接受引入阻塞行为的代码——我们已经有太多尚未移除的这类代码。

+   快速修补或脏解决方案，这些方案在您不运行的平台或您不熟悉的架构上可能无法正常工作。我们不关心您是否急于求成或它对您是否有效。我们不接受高风险代码或难以阅读或理解的代码。

+   破坏构建的代码。当然，我们承认有时我们必须添加代码到某些区域，使得新功能可能依赖于特定的第三方库或特定的操作系统等，但我们**永远**不能以牺牲所有其他系统为代价这样做。我们不破坏构建，并确保所有测试都能成功运行。

## git

我们首选的源代码管理工具是[git](https://git-scm.com/)。

虽然有时 git 不是最容易学习和掌握的工具，但一个普通开发者和贡献者需要了解的所有基本步骤都是直接的，并且学习它们不需要花费太多时间或精力。

这本书不能帮助您学习 git。然而，在这个时代，所有软件开发者都应该学习 git。

您可以通过我们的 GitHub 页面上的网页浏览器浏览 curl git 树，网址为[`github.com/curl/curl`](https://github.com/curl/curl)。

要从 git 检出 curl 源代码，您可以像这样克隆它：

```sh
git clone https://github.com/curl/curl.git
```

## 拉取请求

在 GitHub 上通过所谓的拉取请求（pull request）来做出自己的更改并将它们贡献回项目是一种流行且方便的方式。

首先，在 GitHub 网站上创建自己的源代码版本，称为分支（fork）。这样，您就可以克隆自己的 curl git 树到本地副本。

您编辑自己的本地副本，提交更改，然后将它们推送到 GitHub 上的 git 仓库，然后在 GitHub 网站上，您可以根据对原始 curl 仓库本地副本所做的更改选择创建一个拉取请求。

我们建议您在专门的独立分支上完成打算用于拉取请求的工作，而不是在 master 分支上，这样在审查后或如果您意识到这是一个死胡同并决定将其丢弃时，您就可以更容易地更新拉取请求。

## 为邮件列表制作补丁

即使您选择不创建拉取请求而更喜欢传统的、可靠的将补丁发送到 curl-library 邮件列表的方法，仍然是一个好习惯，在本地 git 分支上工作并在此处提交您的更改。

分支使得在需要更改内容时编辑和变基变得容易，并且当上游更新时，它也使得保持与 master 分支的同步变得容易。

一旦你的提交足够好，可以发送到邮件列表，你只需使用`git format-patch`创建补丁并发送即可。甚至更高级的用户会直接使用`git send-email`，让 git 自己发送邮件。

## git 提交风格

当你在 git 中提交补丁时，你给出一个提交信息来描述你正在提交的更改。我们在项目中有一个特定的风格，我们要求你使用：

```sh
[area]: [short line describing the main effect]

[separate the above single line from the rest with an empty line]

[full description, no wider than 72 columns that describes as much as
possible as to why this change is made, and possibly what things
it fixes and everything else that is related]

[Bug: link to source of the report or more related discussion]
[Reported-by: John Doe—credit the reporter]
[whatever-else-by: credit all helpers, finders, doers]
```

不要忘记，如果你提交的是他人的作品，请使用`git commit --author="Jane Doe <jane@example.com>"`，并确保在通过以下命令提交之前，你的 GitHub 用户名和电子邮件在 git 中设置正确：

```sh
git config --global user.name "johndoe"
git config --global user.email "johndoe@example.com"
```

作者和*-by:行当然是为了确保我们在项目中给予适当的认可。我们不希望未经明确说明来源就使用他人的作品。给予正确的认可至关重要。

## 谁决定什么可以进入？

首先，可能对每个人来说并不明显，但当然只有有限的一组人能够将提交合并到实际的官方 git 仓库中。让我们称他们为核心团队。

其他所有人都可以从自己的 curl 仓库分叉，他们可以在其中提交和推送更改，在线托管，并从中构建自己的 curl 版本等等，但为了将更改推送到*官方*仓库，他们需要由信任的人进行推送。

核心团队是一小部分 curl 开发者，他们在项目中有几年的经验，并证明他们是技术娴熟的开发者，并且完全理解我们在项目中进行的价值观和开发风格。他们中的一些人列在开发团队部分。

你总是可以将讨论带到邮件列表，并争论为什么你认为你的更改应该被接受，或者甚至反对即将进入的其他更改等等。你甚至可以建议自己或其他人被赋予“推送权限”，成为该团队中精选的少数人之一。

丹尼尔仍然是项目负责人，虽然很少需要，但在似乎没有偏向任何一方或未能达成共识的辩论中，他有最终决定权。
