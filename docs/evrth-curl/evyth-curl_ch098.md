# 上传

上传是指将数据发送到远程服务器的过程。不同的协议有不同的上传方式，甚至有些协议允许不同的上传数据方式。

## 允许上传的协议

您可以使用以下协议之一上传数据：FILE、FTP、FTPS、HTTP、HTTPS、IMAP、IMAPS、SCP、SFTP、SMB、SMBS、SMTP、SMTPS 和 TFTP。

## HTTP 提供了多种上传方式

HTTP 及其更大的兄弟 HTTPS 提供了多种将数据上传到服务器的方式，curl 提供了简单的命令行选项来完成以下三种最常见的方式，如下所述。

HTTP 的一个有趣细节是，上传也可以是下载，在同一个操作中，实际上许多下载都是通过 HTTP POST 启动的。

### POST

POST 是一种 HTTP 方法，旨在向接收的 Web 应用程序发送数据，例如，这是大多数常见的 Web 表单的工作方式。它通常向接收者发送一小块相对较小的数据。

上传通常使用 `-d` 或 `--data` 选项进行，但还有一些额外的修改。

在 使用 curl 的 HTTP POST 章节中阅读有关如何使用 curl 进行此操作的详细描述。

### 多部分表单上传

多部分表单上传也用于网站上的 HTML 表单；通常当涉及文件上传时。这种类型上传也是 HTTP POST，但它发送的数据格式根据一些特殊规则，这就是多部分名称的含义。

由于它以完全不同的格式发送数据，您不能随意选择要使用的 POST 类型，而是完全取决于接收服务器端期望和能够处理的内容。

使用 `-F` 进行 HTTP 多部分表单上传。请参阅 HTTP 多部分表单上传 章节的详细描述。

### PUT

HTTP PUT 是一种上传方法，旨在发送一个完整的资源，该资源将被直接放置在远程站点上，甚至可以替换那里的现有资源。尽管如此，这也是今天在网络上使用最少的 HTTP 上传方法，如果不是大多数的话，许多网络服务器甚至没有启用 PUT。

您可以使用 -T 选项和要上传的文件来发送 HTTP 上传：

```sh
curl -T uploadthis http://example.com/
```

## FTP 上传

使用 FTP，您可以看到您正在访问的远程文件系统。您告诉服务器确切地想要将上传放置在哪个目录以及使用哪个文件名。如果您指定带有尾随斜杠的上传 URL，curl 会将本地使用的文件名追加到 URL 中，然后该文件名成为远程存储时使用的文件名：

```sh
curl -T uploadthis ftp://example.com/this/directory/
```

因此，如果您希望远程侧的文件名与本地使用的不同，您可以在 URL 中指定它：

```sh
curl -T uploadthis ftp://example.com/this/directory/remotename
```

在 使用 curl 的 FTP 部分中了解更多关于 FTP 的信息。

## SMTP 上传

你可能不会把发送电子邮件视为上传，但对于 curl 来说却是。你将邮件正文上传到 SMTP 服务器。使用 SMTP 时，你还需要在邮件正文中包含所有需要的邮件头信息（如`To:`, `From:`, `Date:`等），因为 curl 不会添加任何邮件头。

```sh
curl -T mail smtp://mail.example.com/ --mail-from user@example.com
```

在发送电子邮件部分了解更多关于 curl 使用 SMTP 的信息。

## 上传的进度条

通用进度条功能在上传时同样表现良好（参见进度条部分）。需要记住的是，当你将输出发送到标准输出（stdout）时，进度条会自动禁用，并且 curl 支持的多数协议在上传时都能输出一些内容。

因此，你可能需要显式地将下载的数据重定向到一个文件（使用 shell 重定向操作符‘>’，`-o`或类似操作）来显示上传的进度条。
