# 自定义 FTP 命令

FTP 协议提供了一系列不同的命令，允许客户端执行除了 curl 专注于的普通文件传输之外的操作。

curl 用户可以将这些额外的（自定义）命令作为文件传输序列中的一步传递给服务器。curl 甚至提供在处理过程中的不同点运行这些命令的选项。

## 引号

在过去，标准的旧 ftp 客户端有一个名为 *quote* 的命令。它用于将命令逐字发送到服务器。curl 使用相同的名称来提供几乎相同的功能：将指定的命令逐字发送到服务器。实际上是一个或多个命令。`-Q` 或 `--quote`。

要了解可以发送到服务器的哪些命令，您需要了解一些关于 FTP 协议的知识，并可能阅读一下 RFC 959 的细节。

要在传输开始前发送一个简单的 `NOOP` 到服务器（它什么都不做），像这样提供给 curl：

```sh
curl -Q NOOP ftp://example.com/file
```

要在传输后立即发送相同的命令，请在 FTP 命令前加一个短横线（-）：

```sh
curl -Q -NOOP ftp://example.com/file
```

curl 还提供在更改工作目录后发送命令的选项，就在启动传输的命令之前。要发送命令，请在命令前加一个加号（`+`）。

## 一系列命令

实际上，您可以通过在命令行中使用多个 `-Q` 来在所有三个不同时间发送命令。您也可以通过使用更多的 `-Q` 选项在同一位置发送多个命令。

默认情况下，如果任何给定的命令从服务器返回错误，curl 会停止其操作，如果发生错误在传输开始之前，则中止传输，并且不会发送更多的自定义命令。

例如，先重命名一个文件然后进行传输：

```sh
curl -Q "RNFR original" -Q "RNTO newname" ftp://example.com/newname
```

## 可失败的命令

您可以选择发送允许失败的单独引号命令，以从服务器返回错误，而不会导致一切停止。

您可以通过在命令前加星号（`*`）使其成为可失败的命令。例如，在传输后发送删除（`DELE`）命令并允许其失败：

```sh
curl -Q "-*DELE file" ftp://example.com/moo
```
