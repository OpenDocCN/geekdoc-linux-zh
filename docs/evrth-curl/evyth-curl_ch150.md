# HTTP/2

假设 curl 是用适当的先决条件构建的，curl 支持 HTTP/2 对于 HTTP:// 和 HTTPS:// URL。它甚至默认使用 HTTP/2，当提供一个 HTTPS URL 时，因为这样做没有惩罚，并且当 curl 与不支持 HTTP/2 的网站一起使用时，请求会协商 HTTP/1.1。

然而，对于 HTTP:// URL，升级到 HTTP/2 是通过一个 `Upgrade:` 报头完成的，这可能会导致额外的往返，甚至更麻烦的是，相当一部分旧服务器在看到这样的报头时会返回 400 响应。

还应注意的是，一些（大多数？）支持 HTTP/2 的 `HTTP://` 服务器（本身并不是所有服务器）不会在 POST 上承认 `Upgrade:` 报头，例如。

要让服务器使用 HTTP/2，只需：

```sh
curl --http2 http://example.com/
```

如果你的 curl 不支持 HTTP/2，那么这个命令行工具会返回一个错误，说明不支持。运行 `curl -V` 可以显示你的 curl 版本是否支持它。

如果你偶然知道你的服务器支持 HTTP/2（例如，在你自己的受控环境中，你知道你的机器上运行了什么），你可以通过 `--http2-prior-knowledge` 来跳过 HTTP/2 的协商。

## 多路复用

HTTP/2 协议的一个主要特性是能够在相同的物理连接上多路复用多个逻辑流。curl 命令行工具可以利用这个特性，当进行并行传输时。
