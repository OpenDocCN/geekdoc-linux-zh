# FTPS

FTPS 是通过 TLS 加密的 FTP。它协商完全安全的 TLS 连接，而普通的 FTP 使用明文不安全的连接。

使用 curl 进行 FTPS 有两种方式：*隐式* 方式和 *显式* 方式。（这些术语源自 FTPS RFC）。通常，你合作的服务器会决定你可以和应该使用哪种方法。

## 隐式 FTPS

*隐式* 方式是指你在 URL 中使用 `ftps://`。这使得 curl 立即连接到主机并执行 TLS 握手，而不进行任何明文操作。如果 URL 中未指定端口号，curl 将使用端口号 990。这通常不是 FTPS 的做法。

## 显式 FTPS

进行 FTPS 的 *显式* 方式是继续使用 `ftp://` URL，但指示 curl 使用 `AUTH TLS` FTP 命令将连接升级为安全连接。

你可以告诉 curl 使用 `--ssl` 尝试升级并继续正常操作，如果升级失败，或者你可以使用 `--ssl-reqd` 强制 curl 在升级失败时整个操作失败。我们强烈建议使用后者，这样你可以确保进行安全传输——如果有的话。

## 常见 FTPS 问题

FTPS 最常见的问题源于 FTP 协议（FTPS 依赖的协议）使用一个单独的连接设置进行数据传输。这个连接是到另一个端口，当 FTP 通过明文（非 FTPS）进行时，防火墙和网络检查器等可以确定这是正在进行的 FTP，他们可以为此新连接调整事物和规则。

当 FTP 控制通道使用 TLS 加密时，防火墙无法看到正在发生的事情，任何外部人员都无法根据此动态调整网络规则或权限。
