# 头部 API

libcurl 提供了一个 API，用于遍历所有接收到的 HTTP 头部信息，并从特定的头部中提取内容。

当返回头部内容时，libcurl 会去除前导和尾随空格，但不会以任何其他方式修改或更改内容。

此 API 从 libcurl 7.84.0 版本开始正式提供。

## 头部来源

HTTP 头部是键值对，在传输过程中，服务器从几个不同的 *来源* 发送这些键值对。libcurl 收集所有头部信息，并为应用程序提供方便的访问。

HTTP 头部可以以以下方式到达

1.  **CURLH_HEADER** - 在常规响应内容之前。

1.  **CURLH_TRAILER** - 在响应内容 *之后* 到达的字段

1.  **CURLH_CONNECT** - 在实际服务器请求之前可能完成的代理 `CONNECT` 请求的响应头部

1.  **CURLH_1XX** - 可能先于后续 >= 2xx 响应代码的潜在 1xx HTTP 响应中的头部。

1.  **CURLH_PSEUDO** - 以冒号 (`:`) 开头的 HTTP/2 和 HTTP/3 层级头部

## 请求编号

使用 libcurl 完成的单个 HTTP 传输可能由一系列 HTTP 请求组成，而头部 API 函数的 **request** 参数允许你指定你想要从哪个特定的单个请求中获取头部信息。0 表示第一个请求，然后数字随着进一步的重定向或使用多状态身份验证而增加。传入 `-1` 是到系列中最后一个请求的快捷方式，不受实际请求数量影响。

## 头部折叠

HTTP/1 头部支持一个已弃用的格式，称为 *折叠*，这意味着在头部之后有一个续行，使得行折叠。

头部 API 支持折叠头部，并返回展开的内容 - 其中不同部分由单个空格字符分隔。

## 当

在传输过程中，可以在任何时间调用两个头部 API 函数调用，无论是从回调内部还是外部。然而，重要的是要记住，API 只返回在调用时的头部状态信息，这可能不是最终状态，如果你在传输仍在进行时调用它。

+   头部结构

+   获取头部

+   遍历头部
