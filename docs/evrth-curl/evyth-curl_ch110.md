# .netrc

Unix 系统长期以来为用户提供了一种存储远程 FTP 服务器用户名和密码的方法。FTP 客户端已经支持了数十年，这种方式允许用户快速登录到已知的服务器，而无需每次都手动重新输入凭据。`.netrc` 文件通常存储在用户的家目录中。（在 Windows 上，curl 使用 `_netrc` 的名称查找它）。

由于这是一个广泛使用且被广泛接受的概念，curl 也支持它——如果你要求它这么做。然而，curl 并不将此功能仅限于 FTP，它可以为任何协议的机器获取凭据。有关如何操作的更多信息，请参阅下文。

## .netrc 文件格式

.netrc 文件格式很简单：你指定带有机器名称的行，然后跟随与该机器关联的登录名和密码。

每个字段都提供为以空格或换行符结尾的字母序列。从 7.84.0 版本开始，curl 也支持引号字符串。它们以双引号（`"`）开始和结束，并支持转义的特殊字符 `\"`、（换行符）、（回车符）和（制表符）。引号字符串是唯一可以在用户名或密码中使用空格的方式。

**机器名称**

识别远程机器名称。curl 在 .netrc 文件中搜索与 URL 中指定的远程机器匹配的机器令牌。一旦匹配成功，后续的 .netrc 令牌将被处理，直到文件末尾或遇到另一个机器。

**默认**

这与机器名称相同，只是 `default` 匹配任何名称。只能有一个默认令牌，并且它必须位于所有机器令牌之后。为了为否则不匹配的主机提供默认匿名登录，请在文件末尾添加类似以下内容的行：

```sh
default login anonymous password user@domain
```

**登录名**

远程机器的用户名字符串。用户名中不能包含空格。

**密码字符串**

提供一个密码。如果此令牌存在，curl 将在远程服务器需要密码作为登录过程的一部分时提供指定的字符串。请注意，如果此令牌存在于 .netrc 文件中，你**真的**应该确保文件除了用户之外对任何人都不可见。输入密码时不能使用空格。

**宏名称**

定义一个宏。这**不被 curl 支持**。为了使 `.netrc` 的其余部分仍然正常工作，curl 会正确跳过它找到的每个使用 `macdef` 定义的配置。

一个示例 .netrc，用于名为 'daniel' 的用户和密码 'qwerty' 的 example.com 主机，看起来如下所示：

```sh
machine example.com
login daniel
password qwerty
```

它也可以写成一行，同时保持相同的功能：

```sh
machine example.com login daniel password qwerty
```

## 用户名匹配

当提供一个包含用户名和 .netrc 的 URL 时，curl 会尝试找到该机器和登录组合的匹配密码。

## 启用 netrc

`-n, --netrc` 告诉 curl 查找并使用 .netrc 文件。

`--netrc-file [文件]` 与 `--netrc` 类似，除了你还需要提供要使用的实际文件的路径。这在你想在另一个目录或使用另一个文件名提供信息时非常有用。

`--netrc-optional` 与 `--netrc` 类似，但这个选项使得 .netrc 的使用是可选的，而不是像 `--netrc` 选项那样是强制的。
