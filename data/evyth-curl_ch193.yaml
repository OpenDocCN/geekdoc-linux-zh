- en: API compatibility
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: API 兼容性
- en: libcurl promises API stability and guarantees that your program written today
    remains working in the future. We do not break compatibility.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: libcurl 承诺 API 稳定性，并保证您今天编写的程序在未来仍然可以工作。我们不破坏兼容性。
- en: Over time, we add features, new options and new functions to the APIs but we
    do not change behavior in a non-compatible way or remove functions.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 随着时间的推移，我们在 API 中添加了新功能、新选项和新函数，但我们不会以不兼容的方式更改行为或删除函数。
- en: The last time we changed the API in an non-compatible way was for 7.16.0 in
    2006 and we plan to never do it again.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们上一次以不兼容的方式更改 API 是在 2006 年的 7.16.0 版本，我们计划永远不再这样做。
- en: Version numbers
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 版本号
- en: Curl and libcurl are individually versioned, but they mostly follow each other
    rather closely.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Curl 和 libcurl 分别进行版本控制，但它们通常非常接近。
- en: 'The version numbering is always built up using the same system:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 版本编号始终使用相同的系统构建：
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: X is main version number
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: X 是主版本号
- en: Y is release number
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y 是发布号
- en: Z is patch number
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Z 是补丁号
- en: Bumping numbers
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增加数字
- en: One of these X.Y.Z numbers gets bumped in every new release. The numbers to
    the right of a bumped number are reset to zero.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 每个新的版本中，这些 X.Y.Z 数字中的一个都会增加。增加的数字右侧的数字都重置为 0。
- en: The main version number X is bumped when *really* big, world colliding changes
    are made. The release number Y is bumped when changes are performed or things/features
    are added. The patch number Z is bumped when the changes are mere bugfixes.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 当进行真正重大的、世界级的变化时，主版本号 X 会增加。当进行更改或添加功能时，发布号 Y 会增加。当更改仅仅是修复错误时，补丁号 Z 会增加。
- en: It means that after a release 1.2.3, we can release 2.0.0 if something really
    big has been made, 1.3.0 if not that big changes were made or 1.2.4 if mostly
    bugs were fixed.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着在发布 1.2.3 之后，如果进行了真正重大的改进，我们可以发布 2.0.0，如果没有那么大的更改，我们可以发布 1.3.0，如果主要是修复了错误，我们可以发布
    1.2.4。
- en: Bumping, as in increasing the number with 1, is unconditionally only affecting
    one of the numbers (and the ones to the right of it are set to zero). 1 becomes
    2, 3 becomes 4, 9 becomes 10, 88 becomes 89 and 99 becomes 100\. So, after 1.2.9
    comes 1.2.10\. After 3.99.3, 3.100.0 might come.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 增加，即通过加 1 来增加数字，无条件地只影响一个数字（及其右侧的数字设置为 0）。1 变为 2，3 变为 4，9 变为 10，88 变为 89，99
    变为 100。因此，在 1.2.9 之后是 1.2.10。在 3.99.3 之后，可能是 3.100.0。
- en: All original curl source release archives are named according to the libcurl
    version (not according to the curl client version that, as said before, might
    differ).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '所有原始 curl 源发布存档都是根据 libcurl 版本命名的（而不是根据前面提到的可能不同的 curl 客户端版本）。 '
- en: Which libcurl version
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 哪个 libcurl 版本
- en: 'As a service to any application that might want to support new libcurl features
    while still being able to build with older versions, all releases have the libcurl
    version stored in the `curl/curlver.h` file using a static numbering scheme that
    can be used for comparison. The version number is defined as:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一项服务，任何可能希望支持新的 libcurl 功能同时仍然能够使用旧版本构建的应用程序，所有发布版本都在 `curl/curlver.h` 文件中存储了
    libcurl 版本，使用一个静态编号方案，可用于比较。版本号定义为：
- en: '[PRE1]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Where `XX` , `YY` and `ZZ` are the main version, release and patch numbers in
    hexadecimal. All three number fields are always represented using two digits (eight
    bits each). 1.2.0 would appear as `0x010200` while version 9.11.7 appears as `0x090b07`.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 `XX`、`YY` 和 `ZZ` 分别是十六进制表示的主版本号、发布号和补丁号。所有三个数字字段始终使用两位数字（每个八位）表示。1.2.0 会显示为
    `0x010200`，而版本 9.11.7 会显示为 `0x090b07`。
- en: This 6-digit hexadecimal number is always a greater number in a more recent
    release. It makes comparisons with greater than and less than work.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这个 6 位十六进制数在较新的版本中总是更大的数字。这使得使用大于和小于进行比较变得可行。
- en: 'This number is also available as three separate defines: `LIBCURL_VERSION_MAJOR`,
    `LIBCURL_VERSION_MINOR` and `LIBCURL_VERSION_PATCH`.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数字也作为三个单独的定义提供：`LIBCURL_VERSION_MAJOR`、`LIBCURL_VERSION_MINOR` 和 `LIBCURL_VERSION_PATCH`。
- en: These defines are, of course, only suitable to figure out the version number
    built *just now* and do not help you figuring out which libcurl version that is
    used at runtime three years from now.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这些定义当然仅适用于确定刚刚构建的版本号，并不能帮助您确定三年后运行时使用的 libcurl 版本。
- en: Which libcurl version runs
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 哪个 libcurl 版本在运行
- en: To figure out which libcurl version that your application is using *right now*,
    `curl_version_info()` is there for you.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确定您的应用程序当前正在使用哪个 libcurl 版本，`curl_version_info()` 函数可供您使用。
- en: Applications should use this function to judge if things are possible to do
    or not, instead of using compile-time checks, as dynamic/DLL libraries can be
    changed independent of applications.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序应使用此函数来判断是否可以进行某些操作，而不是使用编译时检查，因为动态/DLL库可以在不依赖于应用程序的情况下进行更改。
- en: curl_version_info() returns a pointer to a struct with information about version
    numbers and various features and in the running version of libcurl. You call it
    by giving it a special age counter so that libcurl knows the age of the libcurl
    that calls it. The age is a define called `CURLVERSION_NOW` and is a counter that
    is increased at irregular intervals throughout the curl development. The age number
    tells libcurl what struct set it can return.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '`curl_version_info()` 返回一个指向包含版本号和libcurl运行版本中各种功能的struct的指针。您通过提供一个特殊的年龄计数器来调用它，这样libcurl就知道调用它的libcurl的年龄。年龄是一个名为
    `CURLVERSION_NOW` 的宏，它是一个在整个curl开发过程中以不规则间隔增加的计数器。年龄数字告诉libcurl它可以返回哪个struct集合。'
- en: 'You call the function like this:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以这样调用该函数：
- en: '[PRE2]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The data then points to struct that has or at least can have the following
    layout:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 数据随后指向一个具有以下布局的struct：
- en: '[PRE3]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
