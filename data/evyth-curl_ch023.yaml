- en: Protocols
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 协议
- en: The language used to ask for data to get sent—in either direction—is called
    **the protocol**. The protocol describes exactly how to ask the server for data,
    or to tell the server that there is data coming.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 用于请求数据发送（无论是哪个方向）的语言被称为**协议**。协议精确地描述了如何请求服务器提供数据，或者告诉服务器有数据即将到来。
- en: 'Protocols are typically defined by the IETF ([Internet Engineering Task Force](https://www.ietf.org/)),
    which hosts RFC documents that describe exactly how each protocol works: how clients
    and servers are supposed to act and what to send and so on.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 协议通常由IETF（[互联网工程任务组](https://www.ietf.org/)）定义，它托管RFC文档，这些文档精确地描述了每个协议的工作方式：客户端和服务器应该如何行动，应该发送什么等等。
- en: What protocols does curl support?
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: curl支持哪些协议？
- en: curl supports protocols that allow data transfers in either or both directions.
    We usually also restrict ourselves to protocols which have a URI format described
    in an RFC or at least is somewhat widely used, as curl works primarily with URLs
    (URIs really) as the input key that specifies the transfer.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: curl支持允许数据在任一方向或两个方向上传输的协议。我们通常也限制自己使用那些在RFC中有URI格式描述或至少是某种广泛使用的协议，因为curl主要使用URL（URI）作为输入键来指定传输。
- en: 'The latest curl (as of this writing) supports these protocols:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本文中提到的最新版本的curl（截至撰写本文时）支持以下协议：
- en: DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS,
    MQTT, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP,
    WS, WSS
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS,
    MQTT, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP,
    WS, WSS
- en: To complicate matters further, the protocols often exist in different versions
    or flavors as well.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 更进一步地复杂化，这些协议通常存在不同的版本或风味。
- en: What other protocols are there?
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有哪些其他协议？
- en: The world is full of protocols, both old and new. Old protocols get abandoned
    and dropped and new ones get introduced. There is never a state of stability but
    the situation changes from day to day and year to year. You can rest assured that
    there will be new protocols added in the list above in the future and that there
    will be new versions of the protocols already listed.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 世界充满了协议，既有旧的也有新的。旧协议被废弃和淘汰，新协议被引入。永远没有稳定的状态，但情况每天都在变化，每年都在变化。你可以放心，未来将在上述列表中添加新的协议，并且现有协议也将有新的版本。
- en: There are, of course, already other protocols in existence that curl does not
    yet support. We are open to supporting more protocols that suit the general curl
    paradigms, we just need developers to write the necessary code adjustments for
    them.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，已经存在其他一些curl尚未支持的协议。我们愿意支持更多适合curl通用范例的协议，我们只需要开发者为他们编写必要的代码调整即可。
- en: How are protocols developed?
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 协议是如何开发的？
- en: Both new versions of existing protocols and entirely new protocols are usually
    developed by persons or teams that feel that the existing ones are not good enough.
    Something about them makes them not suitable for a particular use case or perhaps
    some new idea has popped up that could be applied to improve things.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 新版本现有协议和全新的协议通常是由那些认为现有协议不够好的人或团队开发的。它们的一些特性使它们不适合特定的用例，或者可能有一些新想法可以应用于改进事物。
- en: Of course, nothing prevents anyone from developing a protocol entirely on their
    own at their own pleasure in their own backyard, but the major protocols are usually
    brought to the IETF at a fairly early stage where they are then discussed, refined,
    debated and polished and then eventually, ideally, turned into a published RFC
    document.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，没有人阻止任何人完全按照自己的意愿在自己的后院开发一个协议，但主要协议通常在早期就带到IETF，在那里它们被讨论、完善、辩论和润色，然后最终，理想情况下，被转化为发布的RFC文档。
- en: Software developers then read the RFC specifications and deploy their code in
    the world based on their interpretations of the words in those documents. It sometimes
    turns out that some of the specifications are subject to vastly different interpretations
    or sometimes the engineers are just lazy and ignore sound advice in the specs
    and deploy something that does not adhere. Writing software that interoperates
    with other implementations of the specifications can therefore end up being hard
    work.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 软件开发者然后阅读RFC规范，并根据他们对这些文件中文字的解释在世界范围内部署他们的代码。有时会出现一些规范有非常不同的解释，或者工程师只是懒惰，忽略了规范中的合理建议，部署了一些不符合规范的东西。因此，编写与规范的其他实现互操作性的软件可能是一项艰巨的工作。
- en: How much do protocols change?
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 协议变化有多大？
- en: Like software, protocol specifications are frequently updated and new protocol
    versions are created.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 就像软件一样，协议规范经常更新，并且会创建新的协议版本。
- en: Most protocols allow some level of extensibility which makes new extensions
    show up over time, extensions that make sense to support.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数协议都允许一定程度的可扩展性，这使得新的扩展随着时间的推移出现，这些扩展是有意义并值得支持的。
- en: The interpretation of a protocol sometimes changes even if the spec remains
    the same.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 即使规范保持不变，协议的解释有时也会发生变化。
- en: The protocols mentioned in this chapter are all *Application Protocols*, which
    means they are transferred over more lower level protocols, like TCP, UDP and
    TLS. They are also themselves protocols that change over time, get new features
    and get attacked so that new ways of handling security, etc., forces curl to adapt
    and change.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中提到的协议都是**应用协议**，这意味着它们通过更底层的协议（如TCP、UDP和TLS）进行传输。它们本身也是随时间变化、获得新功能和受到攻击的协议，这迫使curl适应和改变，以处理新的安全方式等。
- en: About adhering to standards and who is right
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于遵守标准和谁是对的
- en: Generally, there are protocol specs that tell us how to send and receive data
    for specific protocols. The protocol specs we follow are RFCs put together and
    published by IETF.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，有一些协议规范告诉我们如何为特定协议发送和接收数据。我们遵循的协议规范是由IETF汇编和发布的RFC。
- en: Some protocols are not properly documented in a final RFC, like, for example,
    SFTP for which our implementation is based on an Internet-draft that is not even
    the last available one.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 有些协议在最终的RFC中没有得到适当的文档记录，例如，我们的实现基于一个甚至不是最新版本的Internet-draft的SFTP。
- en: Protocols are, however, spoken by two parties and like in any given conversation,
    there are then two sides of understanding something or interpreting the given
    instructions in a spec. Also, lots of network software is written without the
    authors paying close attention to the spec so they end up taking some shortcuts,
    or perhaps they just interpreted the text differently. Sometimes even mistakes
    and bugs make software behave in ways that are not mandated by the spec and sometimes
    even downright forbidden in the specs.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，协议是由双方讨论的，就像在任何对话中一样，理解某事或解释规范中的给定指令都有两个理解方面。此外，许多网络软件的编写者没有仔细关注规范，所以他们最终采取了捷径，或者他们可能只是对文本有不同的解释。有时甚至错误和漏洞会导致软件以规范未规定甚至规范中明确禁止的方式运行。
- en: In the curl project we use the published specs as rules on how to act until
    we learn anything else. If popular alternative implementations act differently
    than what we think the spec says and that alternative behavior is what works widely
    on the big Internet, then chances are we change foot and instead decide to act
    like those others. If a server refuses to talk with us when we think we follow
    the spec but works fine when we bend the rules ever so slightly, then we probably
    end up bending them exactly that way—if we can still work successfully with other
    implementations.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在curl项目中，我们使用已发布的规范作为行动规则，直到我们了解其他情况。如果流行的替代实现的行为与我们认为的规范不同，并且这种替代行为在互联网上广泛使用，那么我们改变脚步并决定像其他人一样行动的可能性很大。如果我们认为我们遵循了规范但服务器拒绝与我们交谈，而当我们将规则稍微弯曲时却可以正常工作，那么我们可能最终会以那种方式弯曲规则——如果我们仍然可以与其他实现成功工作的话。
- en: Ultimately, it is a personal decision and up for discussion in every case where
    we think a spec and the real world do not align.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，这是一个个人决定，在我们认为规范和现实世界不一致的每个情况下都值得讨论。
- en: In the worst cases we introduce options to let application developers and curl
    users have the final say on what curl should do. I say worst because it is often
    really tough to ask users to make these decisions as it usually involves tricky
    details and weirdness going on and it is a lot to ask of users. We should always
    do our best to avoid pushing such protocol decisions to users.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在最坏的情况下，我们引入选项，让应用程序开发者和curl用户对curl应该做什么有最终决定权。我说最坏，因为通常很难要求用户做出这些决定，因为这通常涉及到棘手的细节和奇怪的情况，这对用户来说要求很高。我们应该始终尽力避免将此类协议决策推给用户。
