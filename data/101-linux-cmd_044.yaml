- en: The `su` command
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '`su` 命令'
- en: The `su` (substitute user) command allows you to run commands as another user
    account. It's commonly used to switch to the root account for administrative tasks
    or to run commands as a different user without logging out and logging back in.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '`su`（替换用户）命令允许您以其他用户账户运行命令。它通常用于切换到root账户以执行管理任务，或者在不注销和重新登录的情况下以不同用户身份运行命令。'
- en: Syntax
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 语法
- en: '[PRE0]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Key Features
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关键特性
- en: '**User Switching**: Switch to any user account on the system'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户切换**：切换到系统上的任何用户账户'
- en: '**Environment Control**: Choose whether to inherit or reset environment variables'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**环境控制**：选择是否继承或重置环境变量'
- en: '**Shell Selection**: Specify which shell to use'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Shell 选择**：指定要使用的 shell'
- en: '**Group Management**: Switch primary and supplementary groups'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组管理**：切换主要和次要组'
- en: '**Command Execution**: Run specific commands as another user'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**命令执行**：以其他用户身份运行特定命令'
- en: Basic Usage
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基本用法
- en: Switching to Root
  id: totrans-11
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 切换到 Root
- en: '[PRE1]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Switching to Specific User
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 切换到特定用户
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Environment Handling
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 环境处理
- en: Login Shell vs Non-Login Shell
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 登录 Shell 与非登录 Shell
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Environment Variable Control
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 环境变量控制
- en: '[PRE4]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Advanced Usage
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级用法
- en: Group Management
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 组管理
- en: '[PRE5]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Shell Selection
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Shell 选择
- en: '[PRE6]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Command Execution
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 命令执行
- en: '[PRE7]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Practical Examples
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实际示例
- en: System Administration
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 系统管理
- en: '[PRE8]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Development Workflows
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 开发工作流程
- en: '[PRE9]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: User Management Tasks
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 用户管理任务
- en: '[PRE10]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Security Considerations
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安全考虑
- en: Password Requirements
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 密码要求
- en: '[PRE11]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Audit and Logging
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 审计和日志记录
- en: '[PRE12]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Safe Usage Patterns
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全使用模式
- en: '[PRE13]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Comparison with Sudo
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 与 Sudo 的比较
- en: When to Use `su`
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 何时使用 `su`
- en: '[PRE14]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: When to Use `sudo`
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 何时使用 `sudo`
- en: '[PRE15]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Configuration and Customization
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置和自定义
- en: PAM Configuration
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PAM 配置
- en: '[PRE16]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Shell Configuration
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Shell 配置
- en: '[PRE17]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Environment Customization
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 环境自定义
- en: '[PRE18]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Troubleshooting
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 故障排除
- en: Common Issues
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 常见问题
- en: '[PRE19]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Debugging
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 调试
- en: '[PRE20]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Script Integration
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 脚本集成
- en: Using su in Scripts
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在脚本中使用 su
- en: '[PRE21]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Automated Tasks
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 自动化任务
- en: '[PRE22]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Options Reference
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选项参考
- en: '| **Option** | **Long Form** | **Description** |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| **选项** | **长格式** | **描述** |'
- en: '| :-- | :-- | :-- |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| :-- | :-- | :-- |'
- en: '| `-` | `--login` | Start login shell, load user''s environment |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| `-` | `--login` | 启动登录 shell，加载用户的环境 |'
- en: '| `-c CMD` | `--command=CMD` | Execute command and exit |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| `-c CMD` | `--command=CMD` | 执行命令并退出 |'
- en: '| `-f` | `--fast` | Pass -f to shell (for csh/tcsh) |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| `-f` | `--fast` | 将 -f 传递给 shell（用于 csh/tcsh）|'
- en: '| `-g GRP` | `--group=GRP` | Specify primary group |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| `-g GRP` | `--group=GRP` | 指定主要组 |'
- en: '| `-G GRP` | `--supp-group=GRP` | Specify supplementary group |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| `-G GRP` | `--supp-group=GRP` | 指定次要组 |'
- en: '| `-l` | `--login` | Same as `-` option |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| `-l` | `--login` | 与 `-` 选项相同 |'
- en: '| `-m` | `--preserve-environment` | Don''t reset environment variables |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| `-m` | `--preserve-environment` | 不重置环境变量 |'
- en: '| `-p` | `--preserve-environment` | Same as `-m` option |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| `-p` | `--preserve-environment` | 与 `-m` 选项相同 |'
- en: '| `-s SHL` | `--shell=SHL` | Use specified shell |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| `-s SHL` | `--shell=SHL` | 使用指定的 shell |'
- en: '| `-w VAR` | `--whitelist-environment=VAR` | Don''t reset specified variables
    |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| `-w VAR` | `--whitelist-environment=VAR` | 不重置指定的变量 |'
- en: '| `--help` | - | Display help message |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| `--help` | - | 显示帮助信息 |'
- en: '| `--version` | - | Display version information |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| `--version` | - | 显示版本信息 |'
- en: Best Practices
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最佳实践
- en: Security Best Practices
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全最佳实践
- en: Use `sudo` instead of `su` when possible for better logging
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当可能时，使用 `sudo` 而不是 `su` 以获得更好的日志记录
- en: Always use login shell (`su -`) for administrative tasks
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 始终使用登录 shell (`su -`) 进行管理任务
- en: Limit time spent as root user
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制作为 root 用户的时间
- en: Use specific commands rather than interactive sessions when possible
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当可能时，使用特定命令而不是交互式会话
- en: Regularly audit su usage through system logs
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期通过系统日志审计 su 使用情况
- en: Operational Best Practices
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运营最佳实践
- en: Use descriptive comments when switching users in scripts
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在脚本中切换用户时使用描述性注释
- en: Verify user existence before attempting to switch
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在尝试切换之前验证用户存在
- en: Handle authentication failures gracefully in scripts
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在脚本中优雅地处理认证失败
- en: Document user switching requirements in system documentation
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在系统文档中记录用户切换要求
- en: Important Notes
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 重要提示
- en: '`su` requires the target user''s password (unless run as root)'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`su` 需要目标用户的密码（除非以 root 身份运行）'
- en: Using `su -` is recommended for administrative tasks as it provides a clean
    environment
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 建议使用 `su -` 进行管理任务，因为它提供了一个干净的环境
- en: '`su` sessions are logged in `/var/log/auth.log` or similar system logs'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`su` 会话记录在 `/var/log/auth.log` 或类似的系统日志中'
- en: The `wheel` group restriction may be enabled on some systems
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些系统上可能启用了 `wheel` 组限制
- en: Always exit su sessions when finished to return to original user
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完成后始终退出 su 会话以返回到原始用户
- en: The `su` command is essential for user switching and privilege management in
    Linux systems, but should be used carefully with proper security considerations.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '`su` 命令对于 Linux 系统中的用户切换和权限管理至关重要，但应谨慎使用，并考虑适当的安全措施。'
- en: 'For more details, check the manual: `man su`'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 想要了解更多详情，请查阅手册：`man su`
