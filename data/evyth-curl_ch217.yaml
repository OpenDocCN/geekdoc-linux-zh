- en: Header data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标头数据
- en: 'The header callback is set with `CURLOPT_HEADERFUNCTION`:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 标头回调是通过 `CURLOPT_HEADERFUNCTION` 设置的：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The `header_callback` function must match this prototype:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '`header_callback` 函数必须匹配以下原型：'
- en: '[PRE1]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: This callback function gets called by libcurl as soon as a header has been received.
    *ptr* points to the delivered data, and the size of that data is *size* multiplied
    with *nmemb*. libcurl buffers headers and delivers only “full” headers, one by
    one, to this callback.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 这个回调函数会在 libcurl 接收到标头后立即被调用。*ptr* 指向传递的数据，该数据的大小是 *size* 乘以 *nmemb*。libcurl
    缓存标头，并逐个将“完整”的标头传递给这个回调。
- en: The data passed to this function is not be zero terminated. You cannot, for
    example, use printf’s `%s` operator to display the contents nor strcpy to copy
    it.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 传递给这个函数的数据不会被空终止。例如，你不能使用 printf 的 `%s` 操作符来显示内容，也不能使用 strcpy 来复制它。
- en: This callback should return the number of bytes actually taken care of. If that
    number differs from the number passed to your callback function, it signals an
    error condition to the library. This causes the transfer to abort and the libcurl
    function used returns `CURLE_WRITE_ERROR`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这个回调应该返回实际处理的字节数。如果这个数字与传递给回调函数的数字不同，它将向库发出错误条件信号。这会导致传输中断，并且使用的 libcurl 函数返回
    `CURLE_WRITE_ERROR`。
- en: 'The user pointer passed in to the callback in the *userdata* argument is set
    with `CURLOPT_HEADERDATA`:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *userdata* 参数中传递给回调的用户指针是通过 `CURLOPT_HEADERDATA` 设置的：
- en: '[PRE2]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
