- en: Networking simplified
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络简化
- en: Networking means communicating between two endpoints on the Internet. The Internet
    is just a bunch of interconnected machines (computers really), each using its
    own individual addresses (called [IP addresses](https://en.wikipedia.org/wiki/IP_address)).
    The addresses each machine has can be of different types and machines can even
    have temporary addresses. These computers are also called hosts.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 网络意味着在互联网上的两个端点之间进行通信。互联网只是一堆相互连接的机器（实际上是计算机），每个机器使用自己的独立地址（称为[IP地址](https://en.wikipedia.org/wiki/IP_address)）。每台机器的地址可以是不同类型的，机器甚至可以有临时地址。这些计算机也被称为主机。
- en: Client and server
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 客户端和服务器
- en: The computer, tablet or phone you sit in front of is usually called *the client*
    and the machine out there somewhere that you want to exchange data with is called
    *the server*. The main difference between the client and the server is in the
    roles they play. There is nothing that prevents the roles from being reversed
    in a subsequent operation.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 你坐在前面的电脑、平板或手机通常被称为*客户端*，而你想要与之交换数据的远端机器被称为*服务器*。客户端和服务器之间的主要区别在于它们扮演的角色。在后续操作中，这些角色被反转是没有什么的。
- en: A transfer initiative is always taken by the client, as the server cannot contact
    the client but the client can contact the server.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 转换请求总是由客户端发起的，因为服务器无法联系客户端，但客户端可以联系服务器。
- en: Which machine
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 哪台机器
- en: When we as a client want to initiate a transfer from or to one of the machines
    out there (a server), we usually do not know its IP addresses but instead we usually
    know its name. The name of the machine to communicate with is typically embedded
    in the URL that we work with when we use tools like curl or a browser.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们作为客户端想要从那里的一台机器（服务器）发起传输或向其传输时，我们通常不知道它的IP地址，而是知道它的名称。我们想要与之通信的机器的名称通常嵌入在我们使用curl或浏览器等工具工作时处理的URL中。
- en: We might use a URL like `http://example.com/index.html`, which means the client
    connects to and communicates with the host named example.com.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能会使用一个像 `http://example.com/index.html` 这样的URL，这意味着客户端连接到并与名为example.com的主机进行通信。
- en: Hostname resolving
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主机名解析
- en: Once the client knows the hostname, it needs to figure out which IP addresses
    the host with that name has so that it can contact it.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦客户端知道了主机名，它需要找出具有该名称的主机有哪些IP地址，以便能够联系它。
- en: Converting the name to an IP address is called ‘name resolving’. The name is
    *resolved* to one or a set of addresses. This is usually done by a *DNS server*,
    DNS being like a big lookup table that can convert names to addresses—all the
    names on the Internet, really. The computer normally already knows the address
    of a computer that runs the DNS server as that is part of setting up the network.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 将名称转换为IP地址的过程称为“名称解析”。该名称被*解析*为一个或一组地址。这通常由一个*DNS服务器*来完成，DNS就像一个大型的查找表，可以将名称转换为地址——实际上，是互联网上的所有名称。计算机通常已经知道运行DNS服务器的计算机的地址，因为这是网络设置的一部分。
- en: The network client therefore asks the DNS server, *Hello, please give me all
    the addresses for `example.com`*. The DNS server responds with a list of addresses
    back. Or in case of spelling errors, it can answer back that the name does not
    exist.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，网络客户端会向DNS服务器请求，“你好，请给我所有`example.com`的地址”。DNS服务器会回应一个地址列表。或者，如果出现拼写错误，它可以回应说该名称不存在。
- en: Establish a connection
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 建立连接
- en: With one or more IP addresses for the host the client wants to contact, it sends
    a *connect request*. The connection it wants to establish is called a TCP ([Transmission
    Control Protocol](https://en.wikipedia.org/wiki/Transmission_Control_Protocol))
    or [QUIC](https://en.wikipedia.org/wiki/QUIC) connection, which is like connecting
    an invisible string between two computers. Once established, the string can be
    used to send a stream of data in both directions.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 对于客户端想要联系的主机，它有一个或多个IP地址，它会发送一个*连接请求*。它想要建立的连接被称为TCP ([传输控制协议](https://en.wikipedia.org/wiki/Transmission_Control_Protocol))
    或 [QUIC](https://en.wikipedia.org/wiki/QUIC) 连接，这就像在两台计算机之间连接一根无形的线。一旦建立，这根线就可以用来在两个方向上发送数据流。
- en: If the client has received more than one address for the host, it traverses
    that list of addresses when connecting, and if one address fails it tries to connect
    to the next one, repeating until either one address works or they have all failed.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果客户端为该主机收到了多个地址，它在连接时会遍历该地址列表，如果其中一个地址失败，它会尝试连接到下一个地址，重复此过程，直到找到一个有效的地址或所有地址都失败。
- en: Connect to port numbers
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 连接到端口号
- en: When connecting with TCP or QUIC to a remote server, a client selects which
    port number to do that on. A port number is just a dedicated place for a particular
    service, which allows that same server to listen to other services on other port
    numbers at the same time.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用TCP或QUIC连接到远程服务器时，客户端会选择在哪个端口号上进行连接。端口号只是为特定服务预留的专用位置，允许同一服务器在相同时间内监听其他端口号上的其他服务。
- en: Most common protocols have default port numbers that clients and servers use.
    For example, when using the `http://example.com/index.html` URL, that URL specifies
    a *scheme* called `HTTP` which tells the client that it should try TCP port number
    80 on the server by default. If the URL uses `HTTPS` instead, the default port
    number is 443.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数常见的协议都有客户端和服务器使用的默认端口号。例如，当使用`http://example.com/index.html` URL时，该URL指定了一个名为`HTTP`的方案，告诉客户端它应该默认尝试服务器上的TCP端口号80。如果URL使用`HTTPS`，则默认端口号为443。
- en: The URL can include a custom port number. If a port number is not specified,
    the client uses the default port for the scheme used in the URL.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: URL可以包含自定义端口号。如果没有指定端口号，客户端将使用URL中使用的方案的默认端口号。
- en: Security
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安全性
- en: After a TCP connection has been established, many transfers require that both
    sides negotiate a better security level before continuing (if for example `HTTPS`
    is used), which is done with TLS ([Transport Layer Security](https://en.wikipedia.org/wiki/Transport_Layer_Security)).
    If so, the client and server do a TLS handshake first, and continue further only
    if that succeeds.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在TCP连接建立之后，许多传输需要在继续之前双方协商一个更好的安全级别（例如，如果使用`HTTPS`），这是通过TLS（[传输层安全性](https://en.wikipedia.org/wiki/Transport_Layer_Security)）完成的。如果是这样，客户端和服务器首先进行TLS握手，只有在成功之后才会继续。
- en: If the connection is done using QUIC, the TLS handshake is done automatically
    in the connect phase.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如果连接使用QUIC完成，TLS握手将在连接阶段自动进行。
- en: Transfer data
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 传输数据
- en: When the connected metaphorical *string* is attached to the remote computer,
    there is a *connection* established between the two machines. This connection
    can then be used to exchange data. This exchange is done using a *protocol*, as
    discussed in the following chapter.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 当连接的隐喻性*字符串*连接到远程计算机时，两台机器之间就建立了*连接*。然后可以使用这个连接来交换数据。这种交换是通过*协议*完成的，如下一章所述。
- en: Traditionally, a *download* is when data is transferred from a server to a client;
    conversely, an *upload* is when data is sent from the client to the server. The
    client is *down here*; the server is *up there*.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，*下载*是指数据从服务器传输到客户端；相反，*上传*是指数据从客户端发送到服务器。客户端在这里；服务器在那里。
- en: Disconnect
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 断开连接
- en: When a single transfer is completed, the connection may have served its purpose.
    It can then either be reused for further transfers, or it can be disconnected
    and closed.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当单个传输完成时，连接可能已经完成了它的用途。然后它可以被重新用于进一步的传输，或者可以断开并关闭。
