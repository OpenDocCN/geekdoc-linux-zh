- en: Creating custom bash commands
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建自定义bash命令
- en: As a developer or system administrator, you might have to spend a lot of time
    in your terminal. I always try to look for ways to optimize any repetitive tasks.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 作为开发者或系统管理员，你可能会在终端上花费大量时间。我总是试图寻找优化任何重复性任务的方法。
- en: One way to do that is to either write short bash scripts or create custom commands
    also known as aliases. For example, rather than typing a really long command every
    time you could just create a shortcut for it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 有一种方法可以写简短的bash脚本或者创建自定义命令，也称为别名。例如，你不必每次都输入一个很长的命令，你只需为它创建一个快捷方式。
- en: Example
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 示例
- en: Let's start with the following scenario, as a system admin, you might have to
    check the connections to your web server quite often, so I will use the `netstat`
    command as an example.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从以下场景开始，作为一个系统管理员，你可能需要经常检查你的Web服务器的连接，所以我会用`netstat`命令作为例子。
- en: What I would usually do when I access a server that is having issues with the
    connections to port 80 or 443 is to check if there are any services listening
    on those ports and the number of connections to the ports.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 当我访问一个与80或443端口连接有问题服务器时，我通常会检查是否有任何服务监听这些端口以及端口的连接数。
- en: 'The following `netstat` command would show us how many TCP connections on port
    80 and 443 we currently have:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 以下`netstat`命令会显示我们当前在80和443端口上有多少TCP连接：
- en: '[PRE0]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This is quite a lengthy command so typing it every time might be time-consuming
    in the long run especially when you want to get that information quickly.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个相当长的命令，每次输入它可能会在长期内浪费时间，尤其是当你想快速获取信息时。
- en: 'To avoid that, we can create an alias, so rather than typing the whole command,
    we could just type a short command instead. For example, lets say that we wanted
    to be able to type `conn` (short for connections) and get the same information.
    All we need to do in this case is to run the following command:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免这种情况，我们可以创建一个别名，这样我们就不必输入整个命令，而只需输入一个简短的命令即可。例如，假设我们想要能够输入`conn`（连接的简称）并获取相同的信息。在这种情况下，我们只需要运行以下命令：
- en: '[PRE1]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'That way we are creating an alias called `conn` which would essentially be
    a ''shortcut'' for our long `netstat` command. Now if you run just `conn`:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，我们创建了一个名为`conn`的别名，它本质上是我们长`netstat`命令的快捷方式。现在，如果你只运行`conn`：
- en: '[PRE2]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You would get the same output as the long `netstat` command. You can get even
    more creative and add some info messages like this one here:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 你会得到与长`netstat`命令相同的输出。你可以更加有创意，添加一些像这样的信息消息：
- en: '[PRE3]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now if you run `conn` you would get the following output:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果你运行`conn`，你会得到以下输出：
- en: '[PRE4]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now if you log out and log back in, your alias would be lost. In the next step
    you will see how to make this persistent.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果你注销并重新登录，你的别名将会丢失。在下一步中，你将看到如何使其持久化。
- en: Making the change persistent
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使更改持久化
- en: In order to make the change persistent, we need to add the `alias` command in
    our shell profile file.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使更改持久化，我们需要在我们的shell配置文件中添加`alias`命令。
- en: 'By default on Ubuntu this would be the `~/.bashrc` file, for other operating
    systems this might be the `~/.bash_profile`. With your favorite text editor open
    the file:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，在Ubuntu上这将是`~/.bashrc`文件，对于其他操作系统，这可能是`~/.bash_profile`。用你喜欢的文本编辑器打开文件：
- en: '[PRE5]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Go to the bottom and add the following:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 滚到页面底部并添加以下内容：
- en: '[PRE6]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Save and then exit.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 保存并退出。
- en: That way now even if you log out and log back in again your change would be
    persisted and you would be able to run your custom bash command.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，即使你注销并重新登录，你的更改也会被保留，你将能够运行你的自定义bash命令。
- en: Listing all of the available aliases
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 列出所有可用的别名
- en: 'To list all of the available aliases for your current shell, you have to just
    run the following command:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 要列出您当前shell中所有可用的别名，您只需运行以下命令：
- en: '[PRE7]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This would be handy in case that you are seeing some weird behavior with some
    commands.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到某些命令有奇怪的行为，这将很有用。
- en: Conclusion
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 结论
- en: This is one way of creating custom bash commands or bash aliases.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一种创建自定义bash命令或bash别名的做法。
- en: Of course, you could actually write a bash script and add the script inside
    your `/usr/bin` folder, but this would not work if you don't have root or sudo
    access, whereas with aliases you can do it without the need of root access.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你可以实际编写一个bash脚本，并将脚本添加到你的`/usr/bin`文件夹中，但如果你没有root或sudo权限，这不会起作用，而使用别名你可以在不需要root权限的情况下做到这一点。
- en: '**Notice:** This was initially posted on [DevDojo.com](https://devdojo.com/bobbyiliev/how-to-create-custom-bash-commands)'
  id: totrans-33
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**注意：** 这篇文章最初发布在[DevDojo.com](https://devdojo.com/bobbyiliev/how-to-create-custom-bash-commands)'
