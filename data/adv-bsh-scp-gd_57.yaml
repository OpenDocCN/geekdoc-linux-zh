- en: Appendix E. Exit Codes With Special Meanings
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 附录 E. 带特殊含义的退出代码
- en: 原文：[https://tldp.org/LDP/abs/html/exitcodes.html](https://tldp.org/LDP/abs/html/exitcodes.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://tldp.org/LDP/abs/html/exitcodes.html](https://tldp.org/LDP/abs/html/exitcodes.html)
- en: '**Table E-1\. *Reserved* Exit Codes**'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '**表 E-1\. *保留* 退出代码**'
- en: '| Exit Code Number | Meaning | Example | Comments |'
  id: totrans-3
  prefs: []
  type: TYPE_TB
  zh: '| 退出代码编号 | 含义 | 示例 | 备注 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-4
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| `1` | Catchall for general errors | let "var1 = 1/0" | Miscellaneous errors,
    such as "divide by zero" and other impermissible operations |'
  id: totrans-5
  prefs: []
  type: TYPE_TB
  zh: '| `1` | 通用错误的通配符 | let "var1 = 1/0" | 各种错误，如 "除以零" 和其他不允许的操作 |'
- en: '| `2` | Misuse of shell builtins (according to Bash documentation) | empty_function()
    {} | [Missing keyword](debugging.html#MISSINGKEYWORD) or command, or permission
    problem (and [*diff* return code on a failed binary file comparison](filearchiv.html#DIFFERR2)).
    |'
  id: totrans-6
  prefs: []
  type: TYPE_TB
  zh: '| `2` | 对 shell 内置命令的误用（根据 Bash 文档） | empty_function() {} | [缺少关键字](debugging.html#MISSINGKEYWORD)
    或命令，或权限问题（以及 [*diff* 在失败的二进制文件比较中的返回代码](filearchiv.html#DIFFERR2)）。 |'
- en: '| `126` | Command invoked cannot execute | /dev/null | Permission problem or
    command is not an executable |'
  id: totrans-7
  prefs: []
  type: TYPE_TB
  zh: '| `126` | 调用的命令无法执行 | /dev/null | 权限问题或命令不是可执行文件 |'
- en: '| `127` | "command not found" | illegal_command | Possible problem with `$PATH`
    or a typo |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
  zh: '| `127` | "命令未找到" | illegal_command | 可能是 `$PATH` 问题或拼写错误 |'
- en: '| `128` | Invalid argument to [exit](exit-status.html#EXITCOMMANDREF) | exit
    3.14159 | **exit** takes only integer args in the range 0 - 255 (see first footnote)
    |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| `128` | 向 [exit](exit-status.html#EXITCOMMANDREF) 传递无效参数 | exit 3.14159 |
    **exit** 只接受 0 - 255 范围内的整数参数（见第一脚注） |'
- en: '| `128+n` | Fatal error signal "n" | *kill -9* `$PPID` of script | `**$?**`
    returns 137 (128 + 9) |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
  zh: '| `128+n` | 致命错误信号 "n" | *kill -9* `$PPID` of script | `**$?**` 返回 137 (128
    + 9) |'
- en: '| `130` | Script terminated by Control-C | *Ctl-C* | Control-C is fatal error
    signal 2, (130 = 128 + 2, see above) |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '| `130` | 脚本被 Control-C 终止 | *Ctl-C* | Control-C 是致命错误信号 2，(130 = 128 + 2，见上文)
    |'
- en: '| `255*` | Exit status out of range | exit -1 | **exit** takes only integer
    args in the range 0 - 255 |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| `255*` | 退出状态超出范围 | exit -1 | **exit** 只接受 0 - 255 范围内的整数参数 |'
- en: According to the above table, exit codes 1 - 2, 126 - 165, and 255 [[1]](#FTN.AEN23629)
    have special meanings, and should therefore be avoided for user-specified exit
    parameters. Ending a script with *exit 127* would certainly cause confusion when
    troubleshooting (is the error code a "command not found" or a user-defined one?).
    However, many scripts use an *exit 1* as a general bailout-upon-error. Since exit
    code 1 signifies so many possible errors, it is not particularly useful in debugging.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 根据上述表格，退出代码 1 - 2、126 - 165 和 255 [[1]](#FTN.AEN23629) 具有特殊含义，因此应避免用于用户指定的退出参数。以
    *exit 127* 结束脚本在故障排除时可能会造成混淆（错误代码是 "命令未找到" 还是用户定义的？）。然而，许多脚本使用 *exit 1* 作为一般错误退出。由于退出代码
    1 表示许多可能的错误，它对调试并不特别有用。
- en: There has been an attempt to systematize exit status numbers (see `/usr/include/sysexits.h`),
    but this is intended for C and C++ programmers. A similar standard for scripting
    might be appropriate. The author of this document proposes restricting user-defined
    exit codes to the range 64 - 113 (in addition to 0, for success), to conform with
    the C/C++ standard. This would allot 50 valid codes, and make troubleshooting
    scripts more straightforward. [[2]](#FTN.AEN23647) All user-defined exit codes
    in the accompanying examples to this document conform to this standard, except
    where overriding circumstances exist, as in [Example 9-2](internalvariables.html#TMDIN).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '已尝试系统化退出状态编号（见 `/usr/include/sysexits.h`），但这主要是针对 C 和 C++ 程序员的。可能需要一个适用于脚本的类似标准。本文档的作者建议将用户定义的退出代码限制在
    64 - 113 范围内（除了 0，表示成功），以符合 C/C++ 标准。这将分配 50 个有效代码，并使脚本的故障排除更加直接。[[2]](#FTN.AEN23647)
    本文档附带的所有示例中的用户定义退出代码都符合此标准，除非存在特殊情况，如 [示例 9-2](internalvariables.html#TMDIN)。 '
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Issuing a [$?](internalvariables.html#XSTATVARREF)
    from the command-line after a shell script exits gives results consistent with
    the table above only from the Bash or *sh* prompt. Running the *C-shell* or *tcsh*
    may give different values in some cases. |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| ![注意](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | 在 shell 脚本退出后从命令行发出
    [$?](internalvariables.html#XSTATVARREF) 只在 Bash 或 *sh* 提示符下给出与上表一致的结果。运行 *C-shell*
    或 *tcsh* 在某些情况下可能会给出不同的值。 |'
- en: Notes
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 备注
- en: '| [[1]](exitcodes.html#AEN23629) | Out of range exit values can result in unexpected
    exit codes. An exit value greater than 255 returns an exit code [modulo](ops.html#MODULOREF)
    256. For example, *exit 3809* gives an exit code of 225 (3809 % 256 = 225). |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| [[1]](exitcodes.html#AEN23629) | 超出范围的退出值可能导致意外的退出代码。大于 255 的退出值返回一个 [模](ops.html#MODULOREF)
    256 的退出代码。例如，*exit 3809* 将给出一个退出代码 225（3809 % 256 = 225）。 |'
- en: '| [[2]](exitcodes.html#AEN23647) | An update of `/usr/include/sysexits.h` allocates
    previously unused exit codes from 64 - 78. It may be anticipated that the range
    of unallotted exit codes will be further restricted in the future. The author
    of this document will *not* do fixups on the scripting examples to conform to
    the changing standard. This should not cause any problems, since there is no overlap
    or conflict in usage of exit codes between compiled C/C++ binaries and shell scripts.
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| [[2]](exitcodes.html#AEN23647) | `/usr/include/sysexits.h` 的更新分配了之前未使用的退出代码
    64 - 78。预计未来未分配的退出代码范围将进一步受限。本文件的作者将 *不会* 对脚本示例进行修复以符合不断变化的标准。这不应该引起任何问题，因为编译后的
    C/C++ 二进制文件和 shell 脚本在退出代码的使用上没有重叠或冲突。 |'
