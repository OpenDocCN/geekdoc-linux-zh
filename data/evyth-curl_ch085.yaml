- en: Storing downloads
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 存储下载
- en: If you try the example download as in the previous section, you might notice
    that curl outputs the downloaded data to stdout unless told to do something else.
    Outputting data to stdout is really useful when you want to pipe it into another
    program or similar, but it is not always the optimal way to deal with your downloads.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你尝试上一节中的示例下载，你可能会注意到 curl 将下载的数据输出到 stdout，除非你告诉它做其他事情。将数据输出到 stdout 在你想将其管道传输到另一个程序或类似程序时非常有用，但并不总是处理下载的最佳方式。
- en: Give curl a specific filename to save the download in with `-o [filename]` (with
    `--output` as the long version of the option), where filename is either just a
    filename, a relative path to a filename or a full path to the file.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `-o [filename]`（将 `--output` 作为选项的长版本）给 curl 提供一个特定的文件名来保存下载，其中 filename
    可以是文件名，到文件名的相对路径或文件的完整路径。
- en: 'Also note that you can put the `-o` before or after the URL; it makes no difference:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 还要注意，你可以将 `-o` 放在 URL 之前或之后；这没有区别：
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This is, of course, not limited to `http://` URLs but works the same way no
    matter which type of URL you download:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这不仅仅限于 `http://` URL，无论你下载哪种类型的 URL 都以相同的方式工作：
- en: '[PRE1]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: If you ask curl to send the output to the terminal, it attempts to detect and
    prevent binary data from being sent there since that can seriously mess up your
    terminal (sometimes to the point where it stops working). You can override curl’s
    binary-output-prevention and force the output to get sent to stdout by using `-o
    -`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你要求 curl 将输出发送到终端，它会尝试检测并阻止二进制数据被发送到那里，因为这样会严重破坏你的终端（有时甚至会导致其停止工作）。你可以使用 `-o
    -` 覆盖 curl 的二进制输出预防并强制输出被发送到 stdout。
- en: curl has several other ways to store and name the downloaded data. Details follow.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: curl 有几种其他方式来存储和命名下载的数据。详细信息如下。
- en: Overwriting
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 覆盖写入
- en: When curl downloads a remote resource into a local filename as described above,
    it overwrites that file in case it already existed. It *clobbers* it.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 当 curl 将远程资源下载到本地文件名时，如上所述，如果该文件已存在，它会覆盖该文件。它会 *覆盖* 它。
- en: 'curl offers a way to avoid this clobbering: `--no-clobber`.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: curl 提供了一种避免这种覆盖的方法：`--no-clobber`。
- en: When using this option, and curl finds that there already exists a file with
    the given name, curl instead appends a period plus a number to the filename in
    an attempt to find a name that is not already used. It starts with `1` and then
    continues trying numbers until it reaches `100` and picks the first available
    one.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用此选项时，如果 curl 发现已存在具有给定名称的文件，它会尝试在文件名中添加一个点和一个数字来找到一个尚未使用的名称。它从 `1` 开始，然后继续尝试数字，直到达到
    `100` 并选择第一个可用的一个。
- en: 'For example, if you ask curl to download a URL to `picture.png`, and in that
    directory there already are two files called `picture.png` and `picture.png.1`,
    the following saves the file as `picture.png.2`:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果你要求 curl 下载一个 URL 到 `picture.png`，并且在该目录中已经有两个名为 `picture.png` 和 `picture.png.1`
    的文件，以下将文件保存为 `picture.png.2`：
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: A user can use the [–write-out](ch081.xhtml#usingcurl__verbose__writeout__md)
    option’s `%filename_effective` variable to figure out which name that was eventually
    used.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以使用 [–write-out](ch081.xhtml#usingcurl__verbose__writeout__md) 选项的 `%filename_effective`
    变量来确定最终使用的名称。
- en: Leftovers on errors
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 错误时的残留
- en: By default, if curl runs into a problem during a download and exits with an
    error, the partially transferred file is left as-is. It could be a small fraction
    of the intended file, or it could be almost the entire thing. It is up to the
    user to decide what to do with the leftovers.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，如果 curl 在下载过程中遇到问题并以错误退出，部分传输的文件将保持原样。它可能是预期文件的一小部分，也可能是几乎整个文件。用户必须决定如何处理残留文件。
- en: The `--remove-on-error` command line option changes this behavior. It tells
    curl to delete any partially saved file if curl exits with an error. No more leftovers.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '`--remove-on-error` 命令行选项改变了这种行为。它告诉 curl 在 curl 因为错误退出时删除任何部分保存的文件。不再有残留文件。'
