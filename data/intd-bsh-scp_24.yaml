- en: Automatic WordPress on LAMP installation with BASH
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 BASH 在 LAMP 安装上自动安装 WordPress
- en: Here is an example of a full LAMP and WordPress installation that works on any
    Debian-based machine.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个完整的 LAMP 和 WordPress 安装示例，它适用于任何基于 Debian 的机器。
- en: Prerequisites
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前提条件
- en: A Debian-based machine (Ubuntu, Debian, Linux Mint, etc.)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于 Debian 的机器（Ubuntu、Debian、Linux Mint 等）
- en: Planning the functionality
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划功能
- en: 'Let''s start again by going over the main functionality of the script:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次回顾脚本的主要功能：
- en: '**Lamp Installation**'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**LAMP 安装**'
- en: Update the package manager
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新包管理器
- en: Install a firewall (ufw)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装防火墙（ufw）
- en: Allow SSH, HTTP and HTTPS traffic
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许 SSH、HTTP 和 HTTPS 流量
- en: Install Apache2
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Apache2
- en: Install & Configure MariaDB
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装并配置 MariaDB
- en: Install PHP and required plugins
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 PHP 和所需的插件
- en: Enable all required Apache2 mods
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用所有必需的 Apache2 模块
- en: '**Apache Virtual Host Setup**'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**Apache 虚拟主机设置**'
- en: Create a directory in `/var/www`
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `/var/www` 下创建一个目录
- en: Configure permissions to the directory
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置目录权限
- en: Create the `$domain` file under `/etc/apache2/sites-available` and append the
    required Virtualhost content
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 `/etc/apache2/sites-available` 下创建 `$domain` 文件并追加所需的虚拟主机内容
- en: Enable the site
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用站点
- en: Restart Apache2
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重启 Apache2
- en: '**SSL Config**'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**SSL 配置**'
- en: Generate the OpenSSL certificate
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成 OpenSSL 证书
- en: Append the SSL certificate to the `ssl-params.conf` file
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 SSL 证书追加到 `ssl-params.conf` 文件中
- en: Append the SSL config to the Virtualhost file
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 SSL 配置追加到虚拟主机文件中
- en: Enable SSL
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用 SSL
- en: Reload Apache2
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新加载 Apache2
- en: '**Database Config**'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据库配置**'
- en: Create a database
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建数据库
- en: Create a user
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建用户
- en: Flush Privileges
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 刷新权限
- en: '**WordPress Config**'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**WordPress 配置**'
- en: Install required WordPress PHP plugins
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装所需的 WordPress PHP 插件
- en: Install WordPress
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 WordPress
- en: Append the required information to `wp-config.php` file
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将所需信息追加到 `wp-config.php` 文件中
- en: Without further ado, let's start writing the script.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 不再拖延，让我们开始编写脚本。
- en: The script
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 脚本
- en: 'We start by setting our variables and asking the user to input their domain:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先设置变量并要求用户输入他们的域名：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We are now ready to start writing our functions. Start by creating the `lamp_install()`
    function. Inside of it, we are going to update the system, install ufw, allow
    SSH, HTTP and HTTPS traffic, install Apache2, install MariaDB and PHP. We are
    also going to enable all required Apache2 mods.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在准备好开始编写我们的函数。首先创建 `lamp_install()` 函数。在其内部，我们将更新系统，安装 ufw，允许 SSH、HTTP 和
    HTTPS 流量，安装 Apache2，安装 MariaDB 和 PHP。我们还将启用所有必需的 Apache2 模块。
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Next, we are going to create the `apache_virtualhost_setup()` function. Inside
    of it, we are going to create a directory in `/var/www`, configure permissions
    to the directory, create the `$domain` file under `/etc/apache2/sites-available`
    and append the required Virtualhost content, enable the site and restart Apache2.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将创建 `apache_virtualhost_setup()` 函数。在其内部，我们将在 `/var/www` 下创建一个目录，配置目录权限，在
    `/etc/apache2/sites-available` 下创建 `$domain` 文件并追加所需的虚拟主机内容，启用站点并重启 Apache2。
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Next, we are going to create the `ssl_config()` function. Inside of it, we are
    going to generate the OpenSSL certificate, append the SSL certificate to the `ssl-params.conf`
    file, append the SSL config to the Virtualhost file, enable SSL and reload Apache2.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将创建 `ssl_config()` 函数。在其内部，我们将生成 OpenSSL 证书，将 SSL 证书追加到 `ssl-params.conf`
    文件中，将 SSL 配置追加到虚拟主机文件中，启用 SSL 并重新加载 Apache2。
- en: '[PRE3]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Next, we are going to create the `db_setup()` function. Inside of it, we are
    going to create the database, create the user and grant all privileges to the
    user.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将创建 `db_setup()` 函数。在其内部，我们将创建数据库，创建用户并授予用户所有权限。
- en: '[PRE4]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Next, we are going to create the `wordpress_config()` function. Inside of it,
    we are going to download the latest version of WordPress, extract it to the `/var/www/$DOMAIN`
    directory, create the `wp-config.php` file and append the required content to
    it.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将创建 `wordpress_config()` 函数。在其内部，我们将下载 WordPress 的最新版本，将其解压到 `/var/www/$DOMAIN`
    目录中，创建 `wp-config.php` 文件并将其所需内容追加到其中。
- en: '[PRE5]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: And finally, we are going to create the `execute()` function. Inside of it,
    we are going to call all the functions we created above.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将创建 `execute()` 函数。在其内部，我们将调用上面创建的所有函数。
- en: '[PRE6]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: With this, you have the script ready and you are ready to run it. And if you
    need the full script, you can find it in the next section.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这种方式，脚本已经准备好，你可以运行它。如果你需要完整的脚本，可以在下一节找到。
- en: The full script
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完整的脚本
- en: '[PRE7]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Summary
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: 'The script does the following:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本执行以下操作：
- en: Install LAMP
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 LAMP
- en: Create a virtual host
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个虚拟主机
- en: Configure SSL
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 SSL
- en: Install WordPress
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 WordPress
- en: Configure WordPress
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 WordPress
- en: With this being said, I hope you enjoyed this example.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 话虽如此，我希望您喜欢这个例子。
