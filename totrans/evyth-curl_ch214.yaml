- en: Write data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The write callback is set with `CURLOPT_WRITEFUNCTION`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The `write_callback` function must match this prototype:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: This callback function gets called by libcurl as soon as there is data received
    that needs to be saved. *ptr* points to the delivered data, and the size of that
    data is *size* multiplied with *nmemb*.
  prefs: []
  type: TYPE_NORMAL
- en: If this callback is not set, libcurl instead uses ‘fwrite’ by default.
  prefs: []
  type: TYPE_NORMAL
- en: 'The write callback is passed as much data as possible in all invokes, but it
    must not make any assumptions. It may be one byte, it may be thousands. The maximum
    amount of body data that is passed to the write callback is defined in the curl.h
    header file: `CURL_MAX_WRITE_SIZE` (the usual default is 16KB). If `CURLOPT_HEADER`
    is enabled for this transfer, which makes header data get passed to the write
    callback, you can get up to `CURL_MAX_HTTP_HEADER` bytes of header data passed
    into it. This usually means 100KB.'
  prefs: []
  type: TYPE_NORMAL
- en: This function may be called with zero bytes data if the transferred file is
    empty.
  prefs: []
  type: TYPE_NORMAL
- en: The data passed to this function is not be zero terminated. You cannot, for
    example, use printf’s `%s` operator to display the contents nor strcpy to copy
    it.
  prefs: []
  type: TYPE_NORMAL
- en: This callback should return the number of bytes actually taken care of. If that
    number differs from the number passed to your callback function, it signals an
    error condition to the library. This causes the transfer to get aborted and the
    libcurl function used returns `CURLE_WRITE_ERROR`.
  prefs: []
  type: TYPE_NORMAL
- en: 'The user pointer passed in to the callback in the *userdata* argument is set
    with `CURLOPT_WRITEDATA`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Store in memory
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A popular demand is to store the retrieved response in memory, and the callback
    explained above supports that. When doing this, just be careful as the response
    can potentially be enormous.
  prefs: []
  type: TYPE_NORMAL
- en: 'You implement the callback in a manner similar to:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
