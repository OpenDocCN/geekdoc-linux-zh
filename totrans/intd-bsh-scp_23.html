<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>Redirection in Bash</h1>
    <p>A Linux superuser must have a good knowledge of pipes and redirection in Bash. It is an essential component of the system and is often helpful in the field of Linux System Administration.</p>
    <p>When you run a command like <code>ls</code>, <code>cat</code>, etc, you get some output on the terminal. If you write a wrong command, pass a wrong flag or a wrong command-line argument, you get error output on the terminal.
In both the cases, you are given some text. It may seem like "just text" to you, but the system treats this text differently. This identifier is known as a File Descriptor (fd).</p>
    <p>In Linux, there are 3 File Descriptors, <strong>STDIN</strong> (0); <strong>STDOUT</strong> (1) and <strong>STDERR</strong> (2).</p>
    <ul>
      <li><strong>STDIN</strong> (fd: 0): Manages the input in the terminal.</li>
      <li><strong>STDOUT</strong> (fd: 1): Manages the output text in the terminal.</li>
      <li><strong>STDERR</strong> (fd: 2): Manages the error text in the terminal.</li>
    </ul>
    <div style="page-break-after: always;"/>
    <h1>Difference between Pipes and Redirections</h1>
    <p>Both <em>pipes</em> and <em>redirections</em> redirect streams <code>(file descriptor)</code> of process being executed. The main difference is that <em>redirections</em> deal with <code>files stream</code>, sending the output stream to a file or sending the content of a given file to the input stream of the process.</p>
    <p>On the other hand a pipe connects two commands by sending the output stream of the first one to the input stream of the second one. without any redirections specified.</p>
    <div style="page-break-after: always;"/>
    <h1>Redirection in Bash</h1>
    <h2>STDIN (Standard Input)</h2>
    <p>When you enter some input text for a command that asks for it, you are actually entering the text to the <strong>STDIN</strong> file descriptor. Run the <code>cat</code> command without any command-line arguments.
It may seem that the process has paused but in fact it's <code>cat</code> asking for <strong>STDIN</strong>. <code>cat</code> is a simple program and will print the text passed to <strong>STDIN</strong>. However, you can extend the use case by redirecting the input to the commands that take <strong>STDIN</strong>.</p>
    <p>Example with <code>cat</code>:</p>
    <pre>
      <code class="language- hljs " data-lang="">cat &lt;&lt; EOF
Hello World!
How are you?
EOF
</code>
    </pre>
    <p>This will simply print the provided text on the terminal screen:</p>
    <pre>
      <code class="language- hljs " data-lang="">Hello World!
How are you?
</code>
    </pre>
    <p>The same can be done with other commands that take input via STDIN. Like, <code>wc</code>:</p>
    <pre>
      <code class="language- hljs " data-lang="">wc -l &lt;&lt; EOF
Hello World!
How are you?
EOF
</code>
    </pre>
    <p>The <code>-l</code> flag with <code>wc</code> counts the number of lines.
This block of bash code will print the number of lines to the terminal screen:</p>
    <pre>
      <code class="language- hljs " data-lang="">2
</code>
    </pre>
    <h2>STDOUT (Standard Output)</h2>
    <p>The normal non-error text on your terminal screen is printed via the <strong>STDOUT</strong> file descriptor. The <strong>STDOUT</strong> of a command can be redirected into a file, in such a way that the output of the command is written to a file instead of being printed on the terminal screen.
This is done simply with the help of <code>&gt;</code> and <code>&gt;&gt;</code> operators.</p>
    <p>Example:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php"><span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello World!"</span> &gt; file.txt
</code>
    </pre>
    <p>The above command will not print "Hello World" on the terminal screen, it will instead create a file called <code>file.txt</code> and will write the "Hello World" string to it.
This can be verified by running the <code>cat</code> command on the <code>file.txt</code> file.</p>
    <pre>
      <code class="language- hljs " data-lang="">cat file.txt
</code>
    </pre>
    <p>However, everytime you redirect the <strong>STDOUT</strong> of any command multiple times to the same file, it will remove the existing contents of the file to write the new ones.</p>
    <p>Example:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php"><span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello World!"</span> &gt; file.txt
<span class="hljs-keyword">echo</span> <span class="hljs-string">"How are you?"</span> &gt; file.txt
</code>
    </pre>
    <p>On running <code>cat</code> on <code>file.txt</code> file:</p>
    <pre>
      <code class="language- hljs " data-lang="">cat file.txt
</code>
    </pre>
    <p>You will only get the "How are you?" string printed.</p>
    <pre>
      <code class="language- hljs " data-lang="">How are you?
</code>
    </pre>
    <p>This is because the "Hello World" string has been overwritten.
This behaviour can be avoided using the <code>&gt;&gt;</code> operator.</p>
    <p>The above example can be written as:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php"><span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello World!"</span> &gt; file.txt
<span class="hljs-keyword">echo</span> <span class="hljs-string">"How are you?"</span> &gt;&gt; file.txt
</code>
    </pre>
    <p>On running <code>cat</code> on the <code>file.txt</code> file, you will get the desired result.</p>
    <pre>
      <code class="language- hljs " data-lang="">Hello World!
How are you?
</code>
    </pre>
    <p>Alternatively, the redirection operator for <strong>STDOUT</strong> can also be written as <code>1&gt;</code>. Like,</p>
    <pre>
      <code class="language-php hljs php" data-lang="php"><span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello World!"</span> <span class="hljs-number">1</span>&gt; file.txt
</code>
    </pre>
    <h2>STDERR (Standard Error)</h2>
    <p>The error text on the terminal screen is printed via the <strong>STDERR</strong> of the command. For example:</p>
    <pre>
      <code class="language- hljs " data-lang="">ls --hello
</code>
    </pre>
    <p>would give an error messages. This error message is the <strong>STDERR</strong> of the command.</p>
    <p><strong>STDERR</strong> can be redirected using the <code>2&gt;</code> operator.</p>
    <pre>
      <code class="language- hljs " data-lang="">ls --hello 2&gt; error.txt
</code>
    </pre>
    <p>This command will redirect the error message to the <code>error.txt</code> file and write it to it. This can be verified by running the <code>cat</code> command on the <code>error.txt</code> file.</p>
    <p>You can also use the <code>2&gt;&gt;</code> operator for <strong>STDERR</strong> just like you used <code>&gt;&gt;</code> for <strong>STDOUT</strong>.</p>
    <p>Error messages in Bash Scripts can be undesirable sometimes. You can choose to ignore them by redirecting the error message to the <code>/dev/null</code> file.
<code>/dev/null</code> is pseudo-device that takes in text and then immediately discards it.</p>
    <p>The above example can be written follows to ignore the error text completely:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript">ls --hello <span class="hljs-number">2</span>&gt; <span class="hljs-regexp">/dev/</span><span class="hljs-literal">null</span>
</code>
    </pre>
    <p>Of course, you can redirect both <strong>STDOUT</strong> and <strong>STDERR</strong> for the same command or script.</p>
    <pre>
      <code class="language- hljs " data-lang="">./install_package.sh &gt; output.txt 2&gt; error.txt
</code>
    </pre>
    <p>Both of them can be redirected to the same file as well.</p>
    <pre>
      <code class="language- hljs " data-lang="">./install_package.sh &gt; file.txt 2&gt; file.txt
</code>
    </pre>
    <p>There is also a shorter way to do this.</p>
    <pre>
      <code class="language- hljs " data-lang="">./install_package.sh &gt; file.txt 2&gt;&amp;1
</code>
    </pre>
    <div style="page-break-after: always;"/>
    <h1>Piping</h1>
    <p>So far we have seen how to redirect the <strong>STDOUT</strong>, <strong>STDIN</strong> and <strong>STDOUT</strong> to and from a file.
To concatenate the output of program <em>(command)</em> as the input of another program <em>(command)</em> you can use a vertical bar <code>|</code>.</p>
    <p>Example:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">ls | grep <span class="hljs-string">".txt"</span>
</code>
    </pre>
    <p>This command will list the files in the current directory and pass output to <em><code>grep</code></em> command which then filter the output to only show the files that contain the string ".txt".</p>
    <p>Syntax:</p>
    <pre>
      <code class="language- hljs " data-lang="">[time [-p]] [!] command1 [ | or |&amp; command2 ] …
</code>
    </pre>
    <p>You can also build arbitrary chains of commands by piping them together to achieve a powerful result.</p>
    <p>This example creates a listing of every user which owns a file in a given directory as well as how many files and directories they own:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">ls -l /projects/bash_scripts | tail -n +<span class="hljs-number">2</span> | sed <span class="hljs-string">'s/\s\s*/ /g'</span> | cut -d <span class="hljs-string">' '</span> -f <span class="hljs-number">3</span> | sort | uniq -c
</code>
    </pre>
    <p>Output:</p>
    <pre>
      <code class="language- hljs " data-lang="">8 anne
34 harry
37 tina
18 ryan
</code>
    </pre>
    <div style="page-break-after: always;"/>
    <h1>HereDocument</h1>
    <p>The symbol <code>&lt;&lt;</code> can be used to create a temporary file [heredoc] and redirect from it at the command line.</p>
    <pre>
      <code class="language- hljs " data-lang="">COMMAND &lt;&lt; EOF
	ContentOfDocument
	...
	...
EOF
</code>
    </pre>
    <p>Note here that <code>EOF</code> represents the delimiter (end of file) of the heredoc. In fact, we can use any alphanumeric word in its place to signify the start and the end of the file. For instance, this is a valid heredoc:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">cat &lt;&lt; randomword1
	This script will <span class="hljs-keyword">print</span> these lines on the terminal.
	Note that cat can read from standard input. Using this heredoc, we can
	create a temporary file with these lines <span class="hljs-keyword">as</span> it<span class="hljs-string">'s content and pipe that
	into cat.
randomword1
</span></code>
    </pre>
    <p>Effectively it will appear as if the contents of the heredoc are piped into the command. This can make the script very clean if multiple lines need to be piped into a program.</p>
    <p>Further, we can attach more pipes as shown:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">cat &lt;&lt; randomword1 | wc
	This script will <span class="hljs-keyword">print</span> these lines on the terminal.
	Note that cat can read from standard input. Using this heredoc, we can
	create a temporary file with these lines <span class="hljs-keyword">as</span> it<span class="hljs-string">'s content and pipe that
	into cat.
randomword1
</span></code>
    </pre>
    <p>Also, pre-defined variables can be used inside the heredocs.</p>
    <div style="page-break-after: always;"/>
    <h1>HereString</h1>
    <p>Herestrings are quite similar to heredocs but use <code>&lt;&lt;&lt;</code>. These are used for single line strings that have to be piped into some program. This looks cleaner that heredocs as we don't have to specify the delimiter.</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">wc &lt;&lt;&lt;<span class="hljs-string">"this is an easy way of passing strings to the stdin of a program (here wc)"</span>
</code>
    </pre>
    <p>Just like heredocs, herestrings can contain variables.</p>
    <h2>Summary</h2>
    <table>
      <thead>
        <tr>
          <th align="left">
            <strong>Operator</strong>
          </th>
          <th align="left">
            <strong>Description</strong>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="left">
            <code>&gt;</code>
          </td>
          <td align="left">
            <code>Save output to a file</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>&gt;&gt;</code>
          </td>
          <td align="left">
            <code>Append output to a file</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>&lt;</code>
          </td>
          <td align="left">
            <code>Read input from a file</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>2&gt;</code>
          </td>
          <td align="left">
            <code>Redirect error messages</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>|</code>
          </td>
          <td align="left">
            <code>Send the output from one program as input to another program</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>&lt;&lt;</code>
          </td>
          <td align="left">
            <code>Pipe multiple lines into a program cleanly</code>
          </td>
        </tr>
        <tr>
          <td align="left">
            <code>&lt;&lt;&lt;</code>
          </td>
          <td align="left">
            <code>Pipe a single line into a program cleanly</code>
          </td>
        </tr>
      </tbody>
    </table>
  </body></html>