- en: Chapter 20\. I/O Redirection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://tldp.org/LDP/abs/html/io-redirection.html](https://tldp.org/LDP/abs/html/io-redirection.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '**Table of Contents**'
  prefs: []
  type: TYPE_NORMAL
- en: 20.1\. [Using *exec*](x17974.html)
  prefs: []
  type: TYPE_NORMAL
- en: 20.2\. [Redirecting Code Blocks](redircb.html)
  prefs: []
  type: TYPE_NORMAL
- en: 20.3\. [Applications](redirapps.html)
  prefs: []
  type: TYPE_NORMAL
- en: There are always three default *files* [[1]](#FTN.AEN17884) open, `stdin` (the
    keyboard), `stdout` (the screen), and `stderr` (error messages output to the screen).
    These, and any other open files, can be redirected. Redirection simply means capturing
    output from a file, command, program, script, or even code block within a script
    (see [Example 3-1](special-chars.html#EX8) and [Example 3-2](special-chars.html#RPMCHECK))
    and sending it as input to another file, command, program, or script.
  prefs: []
  type: TYPE_NORMAL
- en: Each open file gets assigned a file descriptor. [[2]](#FTN.AEN17894) The file
    descriptors for `stdin`, `stdout`, and `stderr` are 0, 1, and 2, respectively.
    For opening additional files, there remain descriptors 3 to 9\. It is sometimes
    useful to assign one of these additional file descriptors to `stdin`, `stdout`,
    or `stderr` as a temporary duplicate link. [[3]](#FTN.AEN17906) This simplifies
    restoration to normal after complex redirection and reshuffling (see [Example
    20-1](x17974.html#REDIR1)).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE0]  |'
  prefs: []
  type: TYPE_TB
- en: '|  [PRE1]  |'
  prefs: []
  type: TYPE_TB
- en: '|  [PRE2]  |'
  prefs: []
  type: TYPE_TB
- en: Multiple instances of input and output redirection and/or pipes can be combined
    in a single command line.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE3]  |'
  prefs: []
  type: TYPE_TB
- en: See [Example 16-31](filearchiv.html#DERPM) and [Example A-14](contributed-scripts.html#FIFO).
  prefs: []
  type: TYPE_NORMAL
- en: Multiple output streams may be redirected to one file.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE4]  |'
  prefs: []
  type: TYPE_TB
- en: '**Closing File Descriptors**'
  prefs: []
  type: TYPE_NORMAL
- en: n<&-
  prefs: []
  type: TYPE_NORMAL
- en: Close input file descriptor `*n*`.
  prefs: []
  type: TYPE_NORMAL
- en: 0<&-, <&-
  prefs: []
  type: TYPE_NORMAL
- en: Close `stdin`.
  prefs: []
  type: TYPE_NORMAL
- en: n>&-
  prefs: []
  type: TYPE_NORMAL
- en: Close output file descriptor `*n*`.
  prefs: []
  type: TYPE_NORMAL
- en: 1>&-, >&-
  prefs: []
  type: TYPE_NORMAL
- en: Close `stdout`.
  prefs: []
  type: TYPE_NORMAL
- en: Child processes inherit open file descriptors. This is why pipes work. To prevent
    an fd from being inherited, close it.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE5]  |'
  prefs: []
  type: TYPE_TB
- en: For a more detailed introduction to I/O redirection see [Appendix F](ioredirintro.html).
  prefs: []
  type: TYPE_NORMAL
- en: Notes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '| [[1]](io-redirection.html#AEN17884) | By convention in UNIX and Linux, data
    streams and peripherals ([device files](devref1.html#DEVFILEREF)) are treated
    as files, in a fashion analogous to ordinary files. |'
  prefs: []
  type: TYPE_TB
- en: '| [[2]](io-redirection.html#AEN17894) | A *file descriptor* is simply a number
    that the operating system assigns to an open file to keep track of it. Consider
    it a simplified type of file pointer. It is analogous to a *file handle* in **C**.
    |'
  prefs: []
  type: TYPE_TB
- en: '| [[3]](io-redirection.html#AEN17906) | Using `*file descriptor 5*` might cause
    problems. When Bash creates a child process, as with [exec](internal.html#EXECREF),
    the child inherits fd 5 (see Chet Ramey''s archived e-mail, [SUBJECT: RE: File
    descriptor 5 is held open](http://groups.google.com/group/gnu.bash.bug/browse_thread/thread/13955daafded3b5c/18c17050087f9f37)).
    Best leave this particular fd alone. |'
  prefs: []
  type: TYPE_TB
