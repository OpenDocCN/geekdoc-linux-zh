- en: JavaScript and forms
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: JavaScript 和表单
- en: A common mitigation against automated agents or scripts using curl is to have
    the page with the HTML form use JavaScript to set values of some input fields,
    usually one of the hidden ones. Often, there is some JavaScript code that executes
    on page load or when the submit button is pressed which sets a magic value that
    the server then can verify before it considers the submission to be valid.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 针对使用 curl 的自动化代理或脚本，一种常见的缓解措施是在包含 HTML 表单的页面上使用 JavaScript 设置某些输入字段的值，通常是一个隐藏字段。通常，有一些
    JavaScript 代码会在页面加载时或提交按钮被按下时执行，设置一个魔法值，服务器随后可以验证这个值，在考虑提交有效之前。
- en: You can usually work around that by just reading the JavaScript code and redoing
    that logic in your script. Using the tricks in [Figure out what a browser sends](ch163.xhtml#http__post__browsersends__md)
    to check exactly what a browser sends is then also a good help.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你通常可以通过阅读 JavaScript 代码并在你的脚本中重新实现那个逻辑来解决这个问题。使用 [确定浏览器发送的内容](ch163.xhtml#http__post__browsersends__md)
    中的技巧来检查浏览器确实发送了什么，也是一种很好的帮助。
