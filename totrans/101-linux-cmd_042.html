<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>The <code>ip</code> command</h1>
    <p>The <code>ip</code> command is a powerful utility from the iproute2 package used for network administration tasks. It serves as the modern replacement for older networking tools like <code>ifconfig</code>, <code>route</code>, and <code>arp</code>. The <code>ip</code> command can show or manipulate routing, network devices, interfaces, and tunnels.</p>
    <h2>Syntax</h2>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">ip [ OPTIONS ] OBJECT { COMMAND | <span class="hljs-built_in">help</span> }
</code>
    </pre>
    <h2>Key Features</h2>
    <ul>
      <li><strong>Interface Management</strong>: Configure and monitor network interfaces</li>
      <li><strong>IP Address Management</strong>: Add, remove, and display IP addresses</li>
      <li><strong>Routing Control</strong>: Manage routing tables and routes</li>
      <li><strong>Neighbor Management</strong>: Handle ARP/neighbor cache entries</li>
      <li><strong>Network Namespaces</strong>: Work with network namespaces</li>
      <li><strong>Tunneling</strong>: Create and manage network tunnels</li>
    </ul>
    <h2>Basic Usage</h2>
    <h3>Display Network Interfaces</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show all network interfaces</span>
ip link show

<span class="hljs-comment"># Show specific interface</span>
ip link show eth0

<span class="hljs-comment"># Show interface statistics</span>
ip -s link show eth0
</code>
    </pre>
    <h3>IP Address Management</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show all IP addresses</span>
ip addr show

<span class="hljs-comment"># Show addresses for specific interface</span>
ip addr show eth0

<span class="hljs-comment"># Add IP address to interface</span>
sudo ip addr add 192.168.1.100/24 dev eth0

<span class="hljs-comment"># Remove IP address from interface</span>
sudo ip addr del 192.168.1.100/24 dev eth0

<span class="hljs-comment"># Flush all addresses from interface</span>
sudo ip addr flush dev eth0
</code>
    </pre>
    <h2>Interface Management</h2>
    <h3>Bringing Interfaces Up/Down</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Bring interface up</span>
sudo ip link <span class="hljs-built_in">set</span> eth0 up

<span class="hljs-comment"># Bring interface down</span>
sudo ip link <span class="hljs-built_in">set</span> eth0 down

<span class="hljs-comment"># Set interface MTU</span>
sudo ip link <span class="hljs-built_in">set</span> eth0 mtu 1400

<span class="hljs-comment"># Change MAC address</span>
sudo ip link <span class="hljs-built_in">set</span> eth0 address 00:11:22:33:44:55
</code>
    </pre>
    <h3>Creating Virtual Interfaces</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Create VLAN interface</span>
sudo ip link add link eth0 name eth0.100 <span class="hljs-built_in">type</span> vlan id 100

<span class="hljs-comment"># Create bridge interface</span>
sudo ip link add name br0 <span class="hljs-built_in">type</span> bridge

<span class="hljs-comment"># Create virtual ethernet pair</span>
sudo ip link add veth0 <span class="hljs-built_in">type</span> veth peer name veth1

<span class="hljs-comment"># Delete virtual interface</span>
sudo ip link delete veth0
</code>
    </pre>
    <h2>Routing Management</h2>
    <h3>Viewing Routes</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show routing table</span>
ip route show

<span class="hljs-comment"># Show routes for specific destination</span>
ip route get 8.8.8.8

<span class="hljs-comment"># Show routes via specific interface</span>
ip route show dev eth0

<span class="hljs-comment"># Show IPv6 routes</span>
ip -6 route show
</code>
    </pre>
    <h3>Managing Routes</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Add default route</span>
sudo ip route add default via 192.168.1.1

<span class="hljs-comment"># Add specific route</span>
sudo ip route add 10.0.0.0/8 via 192.168.1.1

<span class="hljs-comment"># Add route via specific interface</span>
sudo ip route add 172.16.0.0/16 dev eth1

<span class="hljs-comment"># Delete route</span>
sudo ip route del 10.0.0.0/8

<span class="hljs-comment"># Replace existing route</span>
sudo ip route replace default via 192.168.1.254
</code>
    </pre>
    <h3>Multiple Routing Tables</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show all routing tables</span>
ip route show table all

<span class="hljs-comment"># Add route to specific table</span>
sudo ip route add 192.168.2.0/24 via 10.0.0.1 table 100

<span class="hljs-comment"># Show specific routing table</span>
ip route show table 100

<span class="hljs-comment"># Add routing rule</span>
sudo ip rule add from 192.168.1.0/24 table 100
</code>
    </pre>
    <h2>Neighbor (ARP) Management</h2>
    <h3>ARP Cache Operations</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show ARP cache</span>
ip neigh show

<span class="hljs-comment"># Show neighbors for specific interface</span>
ip neigh show dev eth0

<span class="hljs-comment"># Add static ARP entry</span>
sudo ip neigh add 192.168.1.50 lladdr 00:11:22:33:44:55 dev eth0

<span class="hljs-comment"># Delete ARP entry</span>
sudo ip neigh del 192.168.1.50 dev eth0

<span class="hljs-comment"># Flush ARP cache</span>
sudo ip neigh flush all
</code>
    </pre>
    <h2>Advanced Features</h2>
    <h3>Network Namespaces</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># List network namespaces</span>
ip netns list

<span class="hljs-comment"># Create network namespace</span>
sudo ip netns add myns

<span class="hljs-comment"># Execute command in namespace</span>
sudo ip netns <span class="hljs-built_in">exec</span> myns ip addr show

<span class="hljs-comment"># Delete network namespace</span>
sudo ip netns del myns

<span class="hljs-comment"># Move interface to namespace</span>
sudo ip link <span class="hljs-built_in">set</span> eth1 netns myns
</code>
    </pre>
    <h3>Tunneling</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Create GRE tunnel</span>
sudo ip tunnel add gre1 mode gre remote 10.0.0.2 <span class="hljs-built_in">local</span> 10.0.0.1 ttl 255

<span class="hljs-comment"># Create IPIP tunnel</span>
sudo ip tunnel add ipip1 mode ipip remote 192.168.1.2 <span class="hljs-built_in">local</span> 192.168.1.1

<span class="hljs-comment"># Show tunnels</span>
ip tunnel show

<span class="hljs-comment"># Delete tunnel</span>
sudo ip tunnel del gre1
</code>
    </pre>
    <h3>Traffic Control</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show queueing disciplines</span>
ip qdisc show

<span class="hljs-comment"># Add traffic shaping</span>
sudo ip qdisc add dev eth0 root handle 1: htb default 30

<span class="hljs-comment"># Show traffic control statistics</span>
ip -s qdisc show dev eth0
</code>
    </pre>
    <h2>Monitoring and Statistics</h2>
    <h3>Interface Statistics</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Show detailed interface statistics</span>
ip -s link show

<span class="hljs-comment"># Show extended statistics</span>
ip -s -s link show eth0

<span class="hljs-comment"># Monitor interface changes</span>
ip monitor link

<span class="hljs-comment"># Monitor address changes</span>
ip monitor addr
</code>
    </pre>
    <h3>Real-time Monitoring</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Monitor all network events</span>
ip monitor

<span class="hljs-comment"># Monitor only route changes</span>
ip monitor route

<span class="hljs-comment"># Monitor with timestamps</span>
ip -t monitor
</code>
    </pre>
    <h2>Common Options</h2>
    <h3>General Options</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Use specific protocol family</span>
ip -4 addr show    <span class="hljs-comment"># IPv4 only</span>
ip -6 addr show    <span class="hljs-comment"># IPv6 only</span>

<span class="hljs-comment"># Show more details</span>
ip -d link show

<span class="hljs-comment"># Output in JSON format</span>
ip -j addr show

<span class="hljs-comment"># Colorize output</span>
ip -c addr show

<span class="hljs-comment"># Don't resolve names</span>
ip -n route show
</code>
    </pre>
    <h3>Batch Operations</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Execute commands from file</span>
sudo ip -batch commands.txt

<span class="hljs-comment"># Example batch file content:</span>
<span class="hljs-comment"># link set eth0 up</span>
<span class="hljs-comment"># addr add 192.168.1.100/24 dev eth0</span>
<span class="hljs-comment"># route add default via 192.168.1.1</span>
</code>
    </pre>
    <h2>Practical Examples</h2>
    <h3>Setting Up Static IP</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Complete static IP configuration</span>
sudo ip addr add 192.168.1.100/24 dev eth0
sudo ip link <span class="hljs-built_in">set</span> eth0 up
sudo ip route add default via 192.168.1.1

<span class="hljs-comment"># Add DNS (edit /etc/resolv.conf)</span>
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"nameserver 8.8.8.8"</span> | sudo tee /etc/resolv.conf
</code>
    </pre>
    <h3>Creating Bridge with VLANs</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Create bridge</span>
sudo ip link add name br0 <span class="hljs-built_in">type</span> bridge

<span class="hljs-comment"># Create VLAN interfaces</span>
sudo ip link add link eth0 name eth0.10 <span class="hljs-built_in">type</span> vlan id 10
sudo ip link add link eth0 name eth0.20 <span class="hljs-built_in">type</span> vlan id 20

<span class="hljs-comment"># Add interfaces to bridge</span>
sudo ip link <span class="hljs-built_in">set</span> eth0.10 master br0
sudo ip link <span class="hljs-built_in">set</span> eth0.20 master br0

<span class="hljs-comment"># Bring everything up</span>
sudo ip link <span class="hljs-built_in">set</span> br0 up
sudo ip link <span class="hljs-built_in">set</span> eth0.10 up
sudo ip link <span class="hljs-built_in">set</span> eth0.20 up
</code>
    </pre>
    <h3>Network Troubleshooting</h3>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Check connectivity path</span>
ip route get 8.8.8.8

<span class="hljs-comment"># Verify interface status</span>
ip link show | grep -E <span class="hljs-string">"(UP|DOWN)"</span>

<span class="hljs-comment"># Check for duplicate IPs</span>
ip addr show | grep inet

<span class="hljs-comment"># Monitor network changes</span>
ip monitor all
</code>
    </pre>
    <h2>Options Reference</h2>
    <table>
      <thead>
        <tr>
          <th align="left">
            <strong>Option</strong>
          </th>
          <th align="left">
            <strong>Description</strong>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="left">
            <code>-4, -6</code>
          </td>
          <td align="left">Use IPv4 or IPv6 protocol family</td>
        </tr>
        <tr>
          <td align="left">
            <code>-b, -batch</code>
          </td>
          <td align="left">Read commands from file</td>
        </tr>
        <tr>
          <td align="left">
            <code>-c, -color</code>
          </td>
          <td align="left">Use colored output</td>
        </tr>
        <tr>
          <td align="left">
            <code>-d, -details</code>
          </td>
          <td align="left">Show detailed information</td>
        </tr>
        <tr>
          <td align="left">
            <code>-f, -family</code>
          </td>
          <td align="left">Specify protocol family</td>
        </tr>
        <tr>
          <td align="left">
            <code>-h, -human</code>
          </td>
          <td align="left">Human readable output</td>
        </tr>
        <tr>
          <td align="left">
            <code>-j, -json</code>
          </td>
          <td align="left">JSON output format</td>
        </tr>
        <tr>
          <td align="left">
            <code>-n, -numeric</code>
          </td>
          <td align="left">Don't resolve names</td>
        </tr>
        <tr>
          <td align="left">
            <code>-o, -oneline</code>
          </td>
          <td align="left">Single line output</td>
        </tr>
        <tr>
          <td align="left">
            <code>-r, -resolve</code>
          </td>
          <td align="left">Resolve hostnames</td>
        </tr>
        <tr>
          <td align="left">
            <code>-s, -stats</code>
          </td>
          <td align="left">Show statistics</td>
        </tr>
        <tr>
          <td align="left">
            <code>-t, -timestamp</code>
          </td>
          <td align="left">Show timestamps</td>
        </tr>
      </tbody>
    </table>
    <h2>Objects Reference</h2>
    <table>
      <thead>
        <tr>
          <th align="left">
            <strong>Object</strong>
          </th>
          <th align="left">
            <strong>Description</strong>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="left">
            <code>link</code>
          </td>
          <td align="left">Network device (interface)</td>
        </tr>
        <tr>
          <td align="left">
            <code>addr</code>
          </td>
          <td align="left">IPv4 or IPv6 address</td>
        </tr>
        <tr>
          <td align="left">
            <code>route</code>
          </td>
          <td align="left">Routing table entry</td>
        </tr>
        <tr>
          <td align="left">
            <code>rule</code>
          </td>
          <td align="left">Rule in routing policy database</td>
        </tr>
        <tr>
          <td align="left">
            <code>neigh</code>
          </td>
          <td align="left">Neighbor (ARP) table entry</td>
        </tr>
        <tr>
          <td align="left">
            <code>ntable</code>
          </td>
          <td align="left">Neighbor table configuration</td>
        </tr>
        <tr>
          <td align="left">
            <code>tunnel</code>
          </td>
          <td align="left">Tunnel over IP</td>
        </tr>
        <tr>
          <td align="left">
            <code>maddr</code>
          </td>
          <td align="left">Multicast address</td>
        </tr>
        <tr>
          <td align="left">
            <code>mroute</code>
          </td>
          <td align="left">Multicast routing cache entry</td>
        </tr>
        <tr>
          <td align="left">
            <code>monitor</code>
          </td>
          <td align="left">Watch for netlink messages</td>
        </tr>
      </tbody>
    </table>
    <h2>Important Notes</h2>
    <ul>
      <li>The <code>ip</code> command requires root privileges for most configuration changes</li>
      <li>Changes made with <code>ip</code> are immediate but not persistent across reboots</li>
      <li>For persistent configuration, use network configuration files or NetworkManager</li>
      <li>Always backup network configuration before making changes</li>
      <li>Use <code>ip</code> over deprecated tools like <code>ifconfig</code> and <code>route</code></li>
    </ul>
    <h2>Integration with NetworkManager</h2>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-comment"># Check if NetworkManager is managing interface</span>
nmcli device status

<span class="hljs-comment"># Temporarily disable NetworkManager for interface</span>
sudo nmcli device <span class="hljs-built_in">set</span> eth0 managed no

<span class="hljs-comment"># Re-enable NetworkManager management</span>
sudo nmcli device <span class="hljs-built_in">set</span> eth0 managed yes
</code>
    </pre>
    <p>The <code>ip</code> command is essential for modern Linux network administration and provides comprehensive control over network configuration.</p>
    <p>For more details, check the manual: <code>man ip</code></p>
  </body></html>