<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch151.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="http__versions__http3__md-_-_-http-slash-3" class="level1" data-number="150">
<h1 data-number="150">HTTP/3</h1>
<p>HTTP/3 is different than its predecessors in several ways. Maybe most noticeably, HTTP/3 cannot be negotiated on the same connection like HTTP/2 can. Due to HTTP/3 using a different transport protocol, it has to set up and negotiate a dedicated connection for it.</p>
<section id="http__versions__http3__md-_-_-quic" class="level2" data-number="150.1">
<h2 data-number="150.1">QUIC</h2>
<p>HTTP/3 is the HTTP version that is designed to communicate over QUIC. QUIC can for most particular purposes be considered a TCP+TLS replacement.</p>
<p>All transfers that use HTTP/3 therefore do not use TCP. They use QUIC. QUIC is a reliable transport protocol built over UDP. HTTP/3 implies use of QUIC.</p>
</section>
<section id="http__versions__http3__md-_-_-https-only" class="level2" data-number="150.2">
<h2 data-number="150.2">HTTPS only</h2>
<p>HTTP/3 is performed over QUIC which is always using TLS, so HTTP/3 is by definition always encrypted and secure. Therefore, curl only uses HTTP/3 for <code>HTTPS://</code> URLs.</p>
</section>
<section id="http__versions__http3__md-_-_-enable" class="level2" data-number="150.3">
<h2 data-number="150.3">Enable</h2>
<p>As a shortcut straight to HTTP/3, to make curl attempt a QUIC connect directly to the given hostname and port number, use <code>--http3</code>. Like this:</p>
<pre><code>curl --http3 https://example.com/</code></pre>
<p>Normally, without the <code>--http3</code> option, an <code>HTTPS://</code> URL implies that a client needs to connect to it using TCP (and TLS).</p>
</section>
<section id="http__versions__http3__md-_-_-multiplexing" class="level2" data-number="150.4">
<h2 data-number="150.4">Multiplexing</h2>
<p>A primary feature in the HTTP/3 protocol, is the ability to multiplex several logical streams over the same physical connection. The curl command-line tool can take advantage of this feature when <a href="ch066.xhtml#cmdline__urls__parallel__md">doing parallel transfers</a>.</p>
</section>
<section id="http__versions__http3__md-_-_-alt-svc" class="level2" data-number="150.5">
<h2 data-number="150.5">Alt-svc:</h2>
<p>The <a href="ch179.xhtml#http__altsvc__md">alt-svc</a> method of changing to HTTP/3 is the official way to bootstrap into HTTP/3 for a server.</p>
<p>Note that you need that feature built-in and that it does not switch to HTTP/3 for the <em>current</em> request unless the alt-svc cache is already populated, but it rather stores the info for use in the <em>next</em> request to the host.</p>
</section>
<section id="http__versions__http3__md-_-_-when-quic-is-denied" class="level2" data-number="150.6">
<h2 data-number="150.6">When QUIC is denied</h2>
<p>A certain amount of QUIC connection attempts fail, partly because many networks and hosts block or throttle the traffic.</p>
<p>When <code>--http3</code> is used, curl starts a second transfer attempt a few hundred milliseconds after the QUIC connection is initiated which is using HTTP/2 or HTTP/1, so that if the connection attempt over QUIC fails or turns out to be unbearably slow, the connection using an older HTTP version can still succeed and perform the transfer. This allows users to use <code>--http3</code> with some amount of confidence that the operation works.</p>
<p><code>--http3-only</code> is provided to explicitly <em>not</em> try any older version in parallel, but thus makes the transfer fail immediately if no QUIC connection can be established.</p>
<p><span id="http__conditionals__md"></span></p>
</section>
</section>
</body>
</html>
