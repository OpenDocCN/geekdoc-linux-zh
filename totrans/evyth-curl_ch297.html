<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch297.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="internals__windows-vs-unix__md-_-_-windows-vs-unix" class="level1" data-number="296">
<h1 data-number="296">Windows vs Unix</h1>
<p>There are a few differences in how to program curl the Unix way compared to the Windows way. Perhaps the four most notable details are:</p>
<section id="internals__windows-vs-unix__md-_-_-different-function-names-for-socket-operations" class="level2" data-number="296.1">
<h2 data-number="296.1">Different function names for socket operations</h2>
<p>In curl, this is solved with defines and macros, so that the source looks the same in all places except for the header file that defines them. The macros in use are <code>sclose()</code>, <code>sread()</code> and <code>swrite()</code>.</p>
</section>
<section id="internals__windows-vs-unix__md-_-_-init-calls" class="level2" data-number="296.2">
<h2 data-number="296.2">Init calls</h2>
<p>Windows requires a couple of init calls for the socket stuff.</p>
<p>That is taken care of by the <code>curl_global_init()</code> call, but if other libs also do it etc there might be reasons for applications to alter that behavior.</p>
<p>We require WinSock version 2.2 and load this version during global init.</p>
</section>
<section id="internals__windows-vs-unix__md-_-_-file-descriptors" class="level2" data-number="296.3">
<h2 data-number="296.3">File descriptors</h2>
<p>File descriptors for network communication and file operations are not as easily interchangeable as in Unix.</p>
<p>We avoid this by not trying any funny tricks on file descriptors.</p>
</section>
<section id="internals__windows-vs-unix__md-_-_-stdout" class="level2" data-number="296.4">
<h2 data-number="296.4">Stdout</h2>
<p>When writing data to stdout, Windows makes end-of-lines the DOS way, thus destroying binary data, although you do want that conversion if it is text coming throughâ€¦ (sigh)</p>
<p>We set stdout to binary under windows</p>
</section>
<section id="internals__windows-vs-unix__md-_-_-ifdefs" class="level2" data-number="296.5">
<h2 data-number="296.5">Ifdefs</h2>
<p>Inside the source code, We make an effort to avoid <code>#ifdef [Your OS]</code>. All conditionals that deal with features <em>should</em> instead be in the format <code>#ifdef HAVE_THAT_WEIRD_FUNCTION</code>. Since Windows cannot run configure scripts, we maintain a <code>curl_config-win32.h</code> file in the lib directory that is supposed to look exactly like a <code>curl_config.h</code> file would have looked like on a Windows machine.</p>
<p>Generally speaking: curl is frequently compiled on several dozens of operating systems. Do not walk on the edge.</p>
<p><span id="internals__memory-debugging__md"></span></p>
</section>
</section>
</body>
</html>
