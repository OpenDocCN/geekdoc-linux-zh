- en: Chapter 17\. System and Administrative Commands
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://tldp.org/LDP/abs/html/system.html](https://tldp.org/LDP/abs/html/system.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The startup and shutdown scripts in `/etc/rc.d` illustrate the uses (and usefulness)
    of many of these comands. These are usually invoked by *root* and used for system
    maintenance or emergency filesystem repairs. Use with caution, as some of these
    commands may damage your system if misused.
  prefs: []
  type: TYPE_NORMAL
- en: '**Users and Groups**'
  prefs: []
  type: TYPE_NORMAL
- en: '**users**'
  prefs: []
  type: TYPE_NORMAL
- en: Show all logged on users. This is the approximate equivalent of **who -q**.
  prefs: []
  type: TYPE_NORMAL
- en: '**groups**'
  prefs: []
  type: TYPE_NORMAL
- en: Lists the current user and the groups she belongs to. This corresponds to the
    [$GROUPS](internalvariables.html#GROUPSREF) internal variable, but gives the group
    names, rather than the numbers.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE0]  |'
  prefs: []
  type: TYPE_TB
- en: '**chown**, **chgrp**'
  prefs: []
  type: TYPE_NORMAL
- en: The **chown** command changes the ownership of a file or files. This command
    is a useful method that *root* can use to shift file ownership from one user to
    another. An ordinary user may not change the ownership of files, not even her
    own files. [[1]](#FTN.AEN14695)
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE1]  |'
  prefs: []
  type: TYPE_TB
- en: The **chgrp** command changes the `*group*` ownership of a file or files. You
    must be owner of the file(s) as well as a member of the destination group (or
    *root*) to use this operation.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE2]  |'
  prefs: []
  type: TYPE_TB
- en: '**useradd**, **userdel**'
  prefs: []
  type: TYPE_NORMAL
- en: The **useradd** administrative command adds a user account to the system and
    creates a home directory for that particular user, if so specified. The corresponding
    **userdel** command removes a user account from the system [[2]](#FTN.AEN14727)
    and deletes associated files.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | The **adduser**
    command is a synonym for **useradd** and is usually a symbolic link to it. |'
  prefs: []
  type: TYPE_TB
- en: '**usermod**'
  prefs: []
  type: TYPE_NORMAL
- en: Modify a user account. Changes may be made to the password, group membership,
    expiration date, and other attributes of a given user's account. With this command,
    a user's password may be locked, which has the effect of disabling the account.
  prefs: []
  type: TYPE_NORMAL
- en: '**groupmod**'
  prefs: []
  type: TYPE_NORMAL
- en: Modify a given group. The group name and/or ID number may be changed using this
    command.
  prefs: []
  type: TYPE_NORMAL
- en: '**id**'
  prefs: []
  type: TYPE_NORMAL
- en: The **id** command lists the real and effective user IDs and the group IDs of
    the user associated with the current process. This is the counterpart to the [$UID](internalvariables.html#UIDREF),
    [$EUID](internalvariables.html#EUIDREF), and [$GROUPS](internalvariables.html#GROUPSREF)
    internal Bash variables.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE3]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | The **id** command
    shows the *effective* IDs only when they differ from the *real* ones. |'
  prefs: []
  type: TYPE_TB
- en: Also see [Example 9-5](internalvariables.html#AMIROOT).
  prefs: []
  type: TYPE_NORMAL
- en: '**lid**'
  prefs: []
  type: TYPE_NORMAL
- en: The *lid* (list ID) command shows the group(s) that a given user belongs to,
    or alternately, the users belonging to a given group. May be invoked only by root.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE4]  |'
  prefs: []
  type: TYPE_TB
- en: '**who**'
  prefs: []
  type: TYPE_NORMAL
- en: Show all users logged on to the system.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE5]  |'
  prefs: []
  type: TYPE_TB
- en: The `-m` gives detailed information about only the current user. Passing any
    two arguments to **who** is the equivalent of **who -m**, as in **who am i** or
    **who The Man**.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE6]  |'
  prefs: []
  type: TYPE_TB
- en: '**whoami** is similar to **who -m**, but only lists the user name.'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE7]  |'
  prefs: []
  type: TYPE_TB
- en: '**w**'
  prefs: []
  type: TYPE_NORMAL
- en: Show all logged on users and the processes belonging to them. This is an extended
    version of **who**. The output of **w** may be piped to [grep](textproc.html#GREPREF)
    to find a specific user and/or process.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE8]  |'
  prefs: []
  type: TYPE_TB
- en: '**logname**'
  prefs: []
  type: TYPE_NORMAL
- en: Show current user's login name (as found in `/var/run/utmp`). This is a near-equivalent
    to [whoami](system.html#WHOAMIREF), above.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE9]  |'
  prefs: []
  type: TYPE_TB
- en: However . . .
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE10]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | While **logname**
    prints the name of the logged in user, **whoami** gives the name of the user attached
    to the current process. As we have just seen, sometimes these are not the same.
    |'
  prefs: []
  type: TYPE_TB
- en: '**su**'
  prefs: []
  type: TYPE_NORMAL
- en: Runs a program or script as a **s**ubstitute **u**ser. **su rjones** starts
    a shell as user *rjones*. A naked **su** defaults to *root*. See [Example A-14](contributed-scripts.html#FIFO).
  prefs: []
  type: TYPE_NORMAL
- en: '**sudo**'
  prefs: []
  type: TYPE_NORMAL
- en: Runs a command as *root* (or another user). This may be used in a script, thus
    permitting a *regular user* to run the script.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE11]  |'
  prefs: []
  type: TYPE_TB
- en: The file `/etc/sudoers` holds the names of users permitted to invoke **sudo**.
  prefs: []
  type: TYPE_NORMAL
- en: '**passwd**'
  prefs: []
  type: TYPE_NORMAL
- en: Sets, changes, or manages a user's password.
  prefs: []
  type: TYPE_NORMAL
- en: The **passwd** command can be used in a script, but probably *should not* be.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-1\. Setting a new password**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE12]  |'
  prefs: []
  type: TYPE_TB
- en: The **passwd** command's `-l`, `-u`, and `-d` options permit locking, unlocking,
    and deleting a user's password. Only *root* may use these options.
  prefs: []
  type: TYPE_NORMAL
- en: '**ac**'
  prefs: []
  type: TYPE_NORMAL
- en: Show users' logged in time, as read from `/var/log/wtmp`. This is one of the
    GNU accounting utilities.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE13]  |'
  prefs: []
  type: TYPE_TB
- en: '**last**'
  prefs: []
  type: TYPE_NORMAL
- en: List *last* logged in users, as read from `/var/log/wtmp`. This command can
    also show remote logins.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, to show the last few times the system rebooted:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE14]  |'
  prefs: []
  type: TYPE_TB
- en: '**newgrp**'
  prefs: []
  type: TYPE_NORMAL
- en: Change user's *group ID* without logging out. This permits access to the new
    group's files. Since users may be members of multiple groups simultaneously, this
    command finds only limited use.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Kurt Glaesemann
    points out that the *newgrp* command could prove helpful in setting the default
    group permissions for files a user writes. However, the [chgrp](system.html#CHGRPREF)
    command might be more convenient for this purpose. |'
  prefs: []
  type: TYPE_TB
- en: '**Terminals**'
  prefs: []
  type: TYPE_NORMAL
- en: '**tty**'
  prefs: []
  type: TYPE_NORMAL
- en: Echoes the name (filename) of the current user's terminal. Note that each separate
    *xterm* window counts as a different terminal.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE15]  |'
  prefs: []
  type: TYPE_TB
- en: '**stty**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows and/or changes terminal settings. This complex command, used in a script,
    can control terminal behavior and the way output displays. See the info page,
    and study it carefully.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-2\. Setting an *erase* character**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE16]  |'
  prefs: []
  type: TYPE_TB
- en: '**Example 17-3\. *secret password*: Turning off terminal echoing**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE17]  |'
  prefs: []
  type: TYPE_TB
- en: A creative use of **stty** is detecting a user keypress (without hitting **ENTER**).
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-4\. Keypress detection**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE18]  |'
  prefs: []
  type: TYPE_TB
- en: Also see [Example 9-3](internalvariables.html#TIMEOUT) and [Example A-43](contributed-scripts.html#STOPWATCH).
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '**terminals and modes**'
  prefs: []
  type: TYPE_NORMAL
- en: Normally, a terminal works in the *canonical* mode. When a user hits a key,
    the resulting character does not immediately go to the program actually running
    in this terminal. A buffer local to the terminal stores keystrokes. When the user
    hits the **ENTER** key, this sends all the stored keystrokes to the program running.
    There is even a basic line editor inside the terminal.
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE19]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: Using canonical mode, it is possible to redefine the special keys for the local
    terminal line editor.
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE20]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: The process controlling the terminal receives only 12 characters (11 alphabetic
    ones, plus a newline), although the user hit 26 keys.
  prefs: []
  type: TYPE_NORMAL
- en: In non-canonical ("raw") mode, every key hit (including special editing keys
    such as **ctl-H**) sends a character immediately to the controlling process.
  prefs: []
  type: TYPE_NORMAL
- en: The Bash prompt disables both `icanon` and `echo`, since it replaces the basic
    terminal line editor with its own more elaborate one. For example, when you hit
    **ctl-A** at the Bash prompt, there's no **^A** echoed by the terminal, but Bash
    gets a **\1** character, interprets it, and moves the cursor to the begining of
    the line.
  prefs: []
  type: TYPE_NORMAL
- en: '*Stphane Chazelas*'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '**setterm**'
  prefs: []
  type: TYPE_NORMAL
- en: Set certain terminal attributes. This command writes to its terminal's `stdout`
    a string that changes the behavior of that terminal.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE21]  |'
  prefs: []
  type: TYPE_TB
- en: The **setterm** command can be used within a script to change the appearance
    of text written to `stdout`, although there are certainly [better tools](colorizing.html#COLORIZINGREF)
    available for this purpose.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE22]  |'
  prefs: []
  type: TYPE_TB
- en: '**tset**'
  prefs: []
  type: TYPE_NORMAL
- en: Show or initialize terminal settings. This is a less capable version of **stty**.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE23]  |'
  prefs: []
  type: TYPE_TB
- en: '**setserial**'
  prefs: []
  type: TYPE_NORMAL
- en: Set or display serial port parameters. This command must be run by *root* and
    is usually found in a system setup script.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE24]  |'
  prefs: []
  type: TYPE_TB
- en: '**getty**, **agetty**'
  prefs: []
  type: TYPE_NORMAL
- en: The initialization process for a terminal uses **getty** or **agetty** to set
    it up for login by a user. These commands are not used within user shell scripts.
    Their scripting counterpart is **stty**.
  prefs: []
  type: TYPE_NORMAL
- en: '**mesg**'
  prefs: []
  type: TYPE_NORMAL
- en: Enables or disables write access to the current user's terminal. Disabling access
    would prevent another user on the network to [write](communications.html#WRITEREF)
    to the terminal.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Tip](../Images/753d054f4c48fb039314a9e5947964cd.png) | It can be quite
    annoying to have a message about ordering pizza suddenly appear in the middle
    of the text file you are editing. On a multi-user network, you might therefore
    wish to disable write access to your terminal when you need to avoid interruptions.
    |'
  prefs: []
  type: TYPE_TB
- en: '**wall**'
  prefs: []
  type: TYPE_NORMAL
- en: This is an acronym for "[write](communications.html#WRITEREF) all," i.e., sending
    a message to all users at every terminal logged into the network. It is primarily
    a system administrator's tool, useful, for example, when warning everyone that
    the system will shortly go down due to a problem (see [Example 19-1](here-docs.html#EX70)).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE25]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | If write access
    to a particular terminal has been disabled with **mesg**, then **wall** cannot
    send a message to that terminal. |'
  prefs: []
  type: TYPE_TB
- en: '**Information and Statistics**'
  prefs: []
  type: TYPE_NORMAL
- en: '**uname**'
  prefs: []
  type: TYPE_NORMAL
- en: Output system specifications (OS, kernel version, etc.) to `stdout`. Invoked
    with the `-a` option, gives verbose system info (see [Example 16-5](moreadv.html#EX41)).
    The `-s` option shows only the OS type.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE26]  |'
  prefs: []
  type: TYPE_TB
- en: '**arch**'
  prefs: []
  type: TYPE_NORMAL
- en: Show system architecture. Equivalent to **uname -m**. See [Example 11-27](testbranch.html#CASECMD).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE27]  |'
  prefs: []
  type: TYPE_TB
- en: '**lastcomm**'
  prefs: []
  type: TYPE_NORMAL
- en: Gives information about previous commands, as stored in the `/var/account/pacct`
    file. Command name and user name can be specified by options. This is one of the
    GNU accounting utilities.
  prefs: []
  type: TYPE_NORMAL
- en: '**lastlog**'
  prefs: []
  type: TYPE_NORMAL
- en: List the last login time of all system users. This references the `/var/log/lastlog`
    file.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE28]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Caution](../Images/05aa79b283e0d53b5a94a522ee0b6cfe.png) | This command
    will fail if the user invoking it does not have read permission for the `/var/log/lastlog`
    file. |'
  prefs: []
  type: TYPE_TB
- en: '**lsof**'
  prefs: []
  type: TYPE_NORMAL
- en: List open files. This command outputs a detailed table of all currently open
    files and gives information about their owner, size, the processes associated
    with them, and more. Of course, **lsof** may be piped to [grep](textproc.html#GREPREF)
    and/or [awk](awk.html#AWKREF) to parse and analyze its results.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE29]  |'
  prefs: []
  type: TYPE_TB
- en: The **lsof** command is a useful, if complex administrative tool. If you are
    unable to dismount a filesystem and get an error message that it is still in use,
    then running *lsof* helps determine which files are still open on that filesystem.
    The `-i` option lists open network socket files, and this can help trace intrusion
    or hack attempts.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE30]  |'
  prefs: []
  type: TYPE_TB
- en: See [Example 30-2](networkprogramming.html#IPADDRESSES) for an effective use
    of **lsof**.
  prefs: []
  type: TYPE_NORMAL
- en: '**strace**'
  prefs: []
  type: TYPE_NORMAL
- en: '**S**ystem **trace**: diagnostic and debugging tool for tracing *system calls*
    and signals. This command and **ltrace**, following, are useful for diagnosing
    why a given program or package fails to run . . . perhaps due to missing libraries
    or related causes.'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE31]  |'
  prefs: []
  type: TYPE_TB
- en: This is the Linux equivalent of the Solaris **truss** command.
  prefs: []
  type: TYPE_NORMAL
- en: '**ltrace**'
  prefs: []
  type: TYPE_NORMAL
- en: '**L**ibrary **trace**: diagnostic and debugging tool that traces *library calls*
    invoked by a given command.'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE32]  |'
  prefs: []
  type: TYPE_TB
- en: '**nc**'
  prefs: []
  type: TYPE_NORMAL
- en: The **nc** (*netcat*) utility is a complete toolkit for connecting to and listening
    to TCP and UDP ports. It is useful as a diagnostic and testing tool and as a component
    in simple script-based HTTP clients and servers.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE33]  |'
  prefs: []
  type: TYPE_TB
- en: A real-life [usage example](process-sub.html#NETCATEXAMPLE).
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-5\. Checking a remote server for *identd***'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE34]  |'
  prefs: []
  type: TYPE_TB
- en: 'And, of course, there''s Dr. Andrew Tridgell''s notorious one-line script in
    the BitKeeper Affair:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE35]  |'
  prefs: []
  type: TYPE_TB
- en: '**free**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows memory and cache usage in tabular form. The output of this command lends
    itself to parsing, using [grep](textproc.html#GREPREF), [awk](awk.html#AWKREF)
    or **Perl**. The **procinfo** command shows all the information that **free**
    does, and much more.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE36]  |'
  prefs: []
  type: TYPE_TB
- en: 'To show unused RAM memory:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE37]  |'
  prefs: []
  type: TYPE_TB
- en: '**procinfo**'
  prefs: []
  type: TYPE_NORMAL
- en: Extract and list information and statistics from the [`/proc` pseudo-filesystem](devproc.html#DEVPROCREF).
    This gives a very extensive and detailed listing.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE38]  |'
  prefs: []
  type: TYPE_TB
- en: '**lsdev**'
  prefs: []
  type: TYPE_NORMAL
- en: List devices, that is, show installed hardware.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE39]  |'
  prefs: []
  type: TYPE_TB
- en: '**du**'
  prefs: []
  type: TYPE_NORMAL
- en: Show (disk) file usage, recursively. Defaults to current working directory,
    unless otherwise specified.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE40]  |'
  prefs: []
  type: TYPE_TB
- en: '**df**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows filesystem usage in tabular form.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE41]  |'
  prefs: []
  type: TYPE_TB
- en: '**dmesg**'
  prefs: []
  type: TYPE_NORMAL
- en: Lists all system bootup messages to `stdout`. Handy for debugging and ascertaining
    which device drivers were installed and which system interrupts in use. The output
    of **dmesg** may, of course, be parsed with [grep](textproc.html#GREPREF), [sed](sedawk.html#SEDREF),
    or [awk](awk.html#AWKREF) from within a script.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE42]  |'
  prefs: []
  type: TYPE_TB
- en: '**stat**'
  prefs: []
  type: TYPE_NORMAL
- en: Gives detailed and verbose *stat*istics on a given file (even a directory or
    device file) or set of files.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE43]  |'
  prefs: []
  type: TYPE_TB
- en: If the target file does not exist, **stat** returns an error message.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE44]  |'
  prefs: []
  type: TYPE_TB
- en: In a script, you can use **stat** to extract information about files (and filesystems)
    and set variables accordingly.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE45]  |'
  prefs: []
  type: TYPE_TB
- en: '**vmstat**'
  prefs: []
  type: TYPE_NORMAL
- en: Display virtual memory statistics.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE46]  |'
  prefs: []
  type: TYPE_TB
- en: '**uptime**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows how long the system has been running, along with associated statistics.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE47]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | A *load average*
    of 1 or less indicates that the system handles processes immediately. A load average
    greater than 1 means that processes are being queued. When the load average gets
    above 3 (on a single-core processor), then system performance is significantly
    degraded. |'
  prefs: []
  type: TYPE_TB
- en: '**hostname**'
  prefs: []
  type: TYPE_NORMAL
- en: Lists the system's host name. This command sets the host name in an `/etc/rc.d`
    setup script (`/etc/rc.d/rc.sysinit` or similar). It is equivalent to **uname
    -n**, and a counterpart to the [$HOSTNAME](internalvariables.html#HOSTNAMEREF)
    internal variable.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE48]  |'
  prefs: []
  type: TYPE_TB
- en: Similar to the **hostname** command are the **domainname**, **dnsdomainname**,
    **nisdomainname**, and **ypdomainname** commands. Use these to display or set
    the system DNS or NIS/YP domain name. Various options to **hostname** also perform
    these functions.
  prefs: []
  type: TYPE_NORMAL
- en: '**hostid**'
  prefs: []
  type: TYPE_NORMAL
- en: Echo a 32-bit hexadecimal numerical identifier for the host machine.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE49]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | This command allegedly
    fetches a "unique" serial number for a particular system. Certain product registration
    procedures use this number to brand a particular user license. Unfortunately,
    **hostid** only returns the machine network address in hexadecimal, with pairs
    of bytes transposed.The network address of a typical non-networked Linux machine,
    is found in `/etc/hosts`.'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE50]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: As it happens, transposing the bytes of `**127.0.0.1**`, we get `**0.127.1.0**`,
    which translates in hex to `**007f0100**`, the exact equivalent of what **hostid**
    returns, above. There exist only a few million other Linux machines with this
    identical *hostid*. |
  prefs: []
  type: TYPE_NORMAL
- en: '**sar**'
  prefs: []
  type: TYPE_NORMAL
- en: Invoking **sar** (System Activity Reporter) gives a very detailed rundown on
    system statistics. The Santa Cruz Operation ("Old" SCO) released **sar** as Open
    Source in June, 1999.
  prefs: []
  type: TYPE_NORMAL
- en: This command is not part of the base Linux distribution, but may be obtained
    as part of the [sysstat utilities](http://perso.wanadoo.fr/sebastien.godard/)
    package, written by [Sebastien Godard](mailto:sebastien.godard@wanadoo.fr).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE51]  |'
  prefs: []
  type: TYPE_TB
- en: '**readelf**'
  prefs: []
  type: TYPE_NORMAL
- en: Show information and statistics about a designated *elf* binary. This is part
    of the *binutils* package.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE52]  |'
  prefs: []
  type: TYPE_TB
- en: '**size**'
  prefs: []
  type: TYPE_NORMAL
- en: The **size [/path/to/binary]** command gives the segment sizes of a binary executable
    or archive file. This is mainly of use to programmers.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE53]  |'
  prefs: []
  type: TYPE_TB
- en: '**System Logs**'
  prefs: []
  type: TYPE_NORMAL
- en: '**logger**'
  prefs: []
  type: TYPE_NORMAL
- en: Appends a user-generated message to the system log (`/var/log/messages`). You
    do not have to be *root* to invoke **logger**.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE54]  |'
  prefs: []
  type: TYPE_TB
- en: By embedding a **logger** command in a script, it is possible to write debugging
    information to `/var/log/messages`.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE55]  |'
  prefs: []
  type: TYPE_TB
- en: '**logrotate**'
  prefs: []
  type: TYPE_NORMAL
- en: This utility manages the system log files, rotating, compressing, deleting,
    and/or e-mailing them, as appropriate. This keeps the `/var/log` from getting
    cluttered with old log files. Usually [cron](system.html#CRONREF) runs **logrotate**
    on a daily basis.
  prefs: []
  type: TYPE_NORMAL
- en: Adding an appropriate entry to `/etc/logrotate.conf` makes it possible to manage
    personal log files, as well as system-wide ones.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Stefano Falsetto
    has created [rottlog](http://www.gnu.org/software/rottlog/), which he considers
    to be an improved version of **logrotate**. |'
  prefs: []
  type: TYPE_TB
- en: '**Job Control**'
  prefs: []
  type: TYPE_NORMAL
- en: '**ps**'
  prefs: []
  type: TYPE_NORMAL
- en: '`*P*`rocess `*S*`tatistics: lists currently executing processes by owner and
    PID (process ID). This is usually invoked with `ax` or `aux` options, and may
    be piped to [grep](textproc.html#GREPREF) or [sed](sedawk.html#SEDREF) to search
    for a specific process (see [Example 15-14](internal.html#EX44) and [Example 29-3](procref1.html#PIDID)).'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE56]  |'
  prefs: []
  type: TYPE_TB
- en: 'To display system processes in graphical "tree" format: **ps afjx** or **ps
    ax --forest**.'
  prefs: []
  type: TYPE_NORMAL
- en: '**pgrep**, **pkill**'
  prefs: []
  type: TYPE_NORMAL
- en: Combining the **ps** command with [grep](textproc.html#GREPREF) or [kill](x9644.html#KILLREF).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE57]  |'
  prefs: []
  type: TYPE_TB
- en: Compare the action of **pkill** with [killall](x9644.html#KILLALLREF).
  prefs: []
  type: TYPE_NORMAL
- en: '**pstree**'
  prefs: []
  type: TYPE_NORMAL
- en: Lists currently executing processes in "tree" format. The `-p` option shows
    the PIDs, as well as the process names.
  prefs: []
  type: TYPE_NORMAL
- en: '**top**'
  prefs: []
  type: TYPE_NORMAL
- en: Continuously updated display of most cpu-intensive processes. The `-b` option
    displays in text mode, so that the output may be parsed or accessed from a script.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE58]  |'
  prefs: []
  type: TYPE_TB
- en: '**nice**'
  prefs: []
  type: TYPE_NORMAL
- en: Run a background job with an altered priority. Priorities run from 19 (lowest)
    to -20 (highest). Only *root* may set the negative (higher) priorities. Related
    commands are **renice** and **snice**, which change the priority of a running
    process or processes, and **skill**, which sends a [kill](x9644.html#KILLREF)
    signal to a process or processes.
  prefs: []
  type: TYPE_NORMAL
- en: '**nohup**'
  prefs: []
  type: TYPE_NORMAL
- en: Keeps a command running even after user logs off. The command will run as a
    foreground process unless followed by &. If you use **nohup** within a script,
    consider coupling it with a [wait](x9644.html#WAITREF) to avoid creating an *orphan*
    or [zombie](x9644.html#ZOMBIEREF) process.
  prefs: []
  type: TYPE_NORMAL
- en: '**pidof**'
  prefs: []
  type: TYPE_NORMAL
- en: Identifies *process ID (PID)* of a running job. Since job control commands,
    such as [kill](x9644.html#KILLREF) and [renice](system.html#NICE2REF) act on the
    *PID* of a process (not its name), it is sometimes necessary to identify that
    *PID*. The **pidof** command is the approximate counterpart to the [$PPID](internalvariables.html#PPIDREF)
    internal variable.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE59]  |'
  prefs: []
  type: TYPE_TB
- en: '**Example 17-6\. *pidof* helps kill a process**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE60]  |'
  prefs: []
  type: TYPE_TB
- en: '**fuser**'
  prefs: []
  type: TYPE_NORMAL
- en: Identifies the processes (by PID) that are accessing a given file, set of files,
    or directory. May also be invoked with the `-k` option, which kills those processes.
    This has interesting implications for system security, especially in scripts preventing
    unauthorized users from accessing system services.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE61]  |'
  prefs: []
  type: TYPE_TB
- en: One important application for **fuser** is when physically inserting or removing
    storage media, such as CD ROM disks or USB flash drives. Sometimes trying a [umount](system.html#UMOUNTREF)
    fails with a device is busy error message. This means that some user(s) and/or
    process(es) are accessing the device. An **fuser -um /dev/device_name** will clear
    up the mystery, so you can kill any relevant processes.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE62]  |'
  prefs: []
  type: TYPE_TB
- en: The **fuser** command, invoked with the `-n` option identifies the processes
    accessing a *port*. This is especially useful in combination with [nmap](system.html#NMAPREF).
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE63]  |'
  prefs: []
  type: TYPE_TB
- en: '**cron**'
  prefs: []
  type: TYPE_NORMAL
- en: Administrative program scheduler, performing such duties as cleaning up and
    deleting system log files and updating the slocate database. This is the *superuser*
    version of [at](timedate.html#ATREF) (although each user may have their own `crontab`
    file which can be changed with the **crontab** command). It runs as a [daemon](communications.html#DAEMONREF)
    and executes scheduled entries from `/etc/crontab`.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Some flavors of
    Linux run **crond**, Matthew Dillon''s version of **cron**. |'
  prefs: []
  type: TYPE_TB
- en: '**Process Control and Booting**'
  prefs: []
  type: TYPE_NORMAL
- en: '**init**'
  prefs: []
  type: TYPE_NORMAL
- en: The **init** command is the [parent](internal.html#FORKREF) of all processes.
    Called in the final step of a bootup, **init** determines the runlevel of the
    system from `/etc/inittab`. Invoked by its alias **telinit**, and by *root* only.
  prefs: []
  type: TYPE_NORMAL
- en: '**telinit**'
  prefs: []
  type: TYPE_NORMAL
- en: Symlinked to **init**, this is a means of changing the system runlevel, usually
    done for system maintenance or emergency filesystem repairs. Invoked only by *root*.
    This command can be dangerous -- be certain you understand it well before using!
  prefs: []
  type: TYPE_NORMAL
- en: '**runlevel**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows the current and last runlevel, that is, whether the system is halted (runlevel
    `0`), in single-user mode (`1`), in multi-user mode (`2` or `3`), in X Windows
    (`5`), or rebooting (`6`). This command accesses the `/var/run/utmp` file.
  prefs: []
  type: TYPE_NORMAL
- en: '**halt**, **shutdown**, **reboot**'
  prefs: []
  type: TYPE_NORMAL
- en: Command set to shut the system down, usually just prior to a power down.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Warning](../Images/9d1b374742c319dd43bb1c5d95d6e008.png) | On some Linux
    distros, the **halt** command has 755 permissions, so it can be invoked by a non-root
    user. A careless *halt* in a terminal or a script may shut down the system! |'
  prefs: []
  type: TYPE_TB
- en: '**service**'
  prefs: []
  type: TYPE_NORMAL
- en: Starts or stops a system *service*. The startup scripts in `/etc/init.d` and
    `/etc/rc.d` use this command to start services at bootup.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE64]  |'
  prefs: []
  type: TYPE_TB
- en: '**Network**'
  prefs: []
  type: TYPE_NORMAL
- en: '**nmap**'
  prefs: []
  type: TYPE_NORMAL
- en: '**N**etwork **map**per and port scanner. This command scans a server to locate
    open ports and the services associated with those ports. It can also report information
    about packet filters and firewalls. This is an important security tool for locking
    down a network against hacking attempts.'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE65]  |'
  prefs: []
  type: TYPE_TB
- en: '**ifconfig**'
  prefs: []
  type: TYPE_NORMAL
- en: Network *interface configuration* and tuning utility.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE66]  |'
  prefs: []
  type: TYPE_TB
- en: The **ifconfig** command is most often used at bootup to set up the interfaces,
    or to shut them down when rebooting.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE67]  |'
  prefs: []
  type: TYPE_TB
- en: See also [Example 32-6](debugging.html#ONLINE).
  prefs: []
  type: TYPE_NORMAL
- en: '**netstat**'
  prefs: []
  type: TYPE_NORMAL
- en: Show current network statistics and information, such as routing tables and
    active connections. This utility accesses information in `/proc/net` ([Chapter
    29](devproc.html)). See [Example 29-4](procref1.html#CONSTAT).
  prefs: []
  type: TYPE_NORMAL
- en: '**netstat -r** is equivalent to [route](system.html#ROUTEREF).'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE68]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | A **netstat -lptu**
    shows [sockets](devref1.html#SOCKETREF) that are listening to ports, and the associated
    processes. This can be useful for determining whether a computer has been hacked
    or compromised. |'
  prefs: []
  type: TYPE_TB
- en: '**iwconfig**'
  prefs: []
  type: TYPE_NORMAL
- en: This is the command set for configuring a wireless network. It is the wireless
    equivalent of **ifconfig**, above.
  prefs: []
  type: TYPE_NORMAL
- en: '**ip**'
  prefs: []
  type: TYPE_NORMAL
- en: General purpose utility for setting up, changing, and analyzing *IP* (Internet
    Protocol) networks and attached devices. This command is part of the *iproute2*
    package.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE69]  |'
  prefs: []
  type: TYPE_TB
- en: 'Or, in a script:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE70]  |'
  prefs: []
  type: TYPE_TB
- en: '**route**'
  prefs: []
  type: TYPE_NORMAL
- en: Show info about or make changes to the kernel routing table.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE71]  |'
  prefs: []
  type: TYPE_TB
- en: '**iptables**'
  prefs: []
  type: TYPE_NORMAL
- en: The **iptables** command set is a packet filtering tool used mainly for such
    security purposes as setting up network firewalls. This is a complex tool, and
    a detailed explanation of its use is beyond the scope of this document. [Oskar
    Andreasson's tutorial](http://www.frozentux.net/iptables-tutorial/iptables-tutorial.html)
    is a reasonable starting point.
  prefs: []
  type: TYPE_NORMAL
- en: See also [shutting down *iptables*](system.html#IPTABLES01) and [Example 30-2](networkprogramming.html#IPADDRESSES).
  prefs: []
  type: TYPE_NORMAL
- en: '**chkconfig**'
  prefs: []
  type: TYPE_NORMAL
- en: Check network and system configuration. This command lists and manages the network
    and system services started at bootup in the `/etc/rc?.d` directory.
  prefs: []
  type: TYPE_NORMAL
- en: Originally a port from IRIX to Red Hat Linux, **chkconfig** may not be part
    of the core installation of some Linux flavors.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE72]  |'
  prefs: []
  type: TYPE_TB
- en: '**tcpdump**'
  prefs: []
  type: TYPE_NORMAL
- en: Network packet "sniffer." This is a tool for analyzing and troubleshooting traffic
    on a network by dumping packet headers that match specified criteria.
  prefs: []
  type: TYPE_NORMAL
- en: 'Dump ip packet traffic between hosts *bozoville* and *caduceus*:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE73]  |'
  prefs: []
  type: TYPE_TB
- en: Of course, the output of **tcpdump** can be parsed with certain of the previously
    discussed [text processing utilities](textproc.html#TPCOMMANDLISTING1).
  prefs: []
  type: TYPE_NORMAL
- en: '**Filesystem**'
  prefs: []
  type: TYPE_NORMAL
- en: '**mount**'
  prefs: []
  type: TYPE_NORMAL
- en: Mount a filesystem, usually on an external device, such as a floppy or CDROM.
    The file `/etc/fstab` provides a handy listing of available filesystems, partitions,
    and devices, including options, that may be automatically or manually mounted.
    The file `/etc/mtab` shows the currently mounted filesystems and partitions (including
    the virtual ones, such as `/proc`).
  prefs: []
  type: TYPE_NORMAL
- en: '**mount -a** mounts all filesystems and partitions listed in `/etc/fstab`,
    except those with a `noauto` option. At bootup, a startup script in `/etc/rc.d`
    (`rc.sysinit` or something similar) invokes this to get everything mounted.'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE74]  |'
  prefs: []
  type: TYPE_TB
- en: The versatile *mount* command can even mount an ordinary file on a block device,
    and the file will act as if it were a filesystem. *Mount* accomplishes that by
    associating the file with a [loopback device](devref1.html#LOOPBACKREF). One application
    of this is to mount and examine an ISO9660 filesystem image before burning it
    onto a CDR. [[3]](#FTN.AEN16255)
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-7\. Checking a CD image**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE75]  |'
  prefs: []
  type: TYPE_TB
- en: '**umount**'
  prefs: []
  type: TYPE_NORMAL
- en: Unmount a currently mounted filesystem. Before physically removing a previously
    mounted floppy or CDROM disk, the device must be **umount**ed, else filesystem
    corruption may result.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE76]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | The **automount**
    utility, if properly installed, can mount and unmount floppies or CDROM disks
    as they are accessed or removed. On "multispindle" laptops with swappable floppy
    and optical drives, this can cause problems, however. |'
  prefs: []
  type: TYPE_TB
- en: '**gnome-mount**'
  prefs: []
  type: TYPE_NORMAL
- en: The newer Linux distros have deprecated **mount** and **umount**. The successor,
    for command-line mounting of removable storage devices, is **gnome-mount**. It
    can take the `-d` option to mount a [device file](devref1.html#DEVFILEREF) by
    its listing in `/dev`.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, to mount a USB flash drive:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE77]  |'
  prefs: []
  type: TYPE_TB
- en: '**sync**'
  prefs: []
  type: TYPE_NORMAL
- en: Forces an immediate write of all updated data from buffers to hard drive (synchronize
    drive with buffers). While not strictly necessary, a **sync** assures the sys
    admin or user that the data just changed will survive a sudden power failure.
    In the olden days, a `**sync; sync**` (twice, just to make absolutely sure) was
    a useful precautionary measure before a system reboot.
  prefs: []
  type: TYPE_NORMAL
- en: At times, you may wish to force an immediate buffer flush, as when securely
    deleting a file (see [Example 16-61](extmisc.html#BLOTOUT)) or when the lights
    begin to flicker.
  prefs: []
  type: TYPE_NORMAL
- en: '**losetup**'
  prefs: []
  type: TYPE_NORMAL
- en: Sets up and configures [loopback devices](devref1.html#LOOPBACKREF).
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-8\. Creating a filesystem in a file**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE78]  |'
  prefs: []
  type: TYPE_TB
- en: '**mkswap**'
  prefs: []
  type: TYPE_NORMAL
- en: Creates a swap partition or file. The swap area must subsequently be enabled
    with **swapon**.
  prefs: []
  type: TYPE_NORMAL
- en: '**swapon**, **swapoff**'
  prefs: []
  type: TYPE_NORMAL
- en: Enable / disable swap partitition or file. These commands usually take effect
    at bootup and shutdown.
  prefs: []
  type: TYPE_NORMAL
- en: '**mke2fs**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a Linux *ext2* filesystem. This command must be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-9\. Adding a new hard drive**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE79]  |'
  prefs: []
  type: TYPE_TB
- en: See also [Example 17-8](system.html#CREATEFS) and [Example 31-3](zeros.html#RAMDISK).
  prefs: []
  type: TYPE_NORMAL
- en: '**mkdosfs**'
  prefs: []
  type: TYPE_NORMAL
- en: Create a DOS *FAT* filesystem.
  prefs: []
  type: TYPE_NORMAL
- en: '**tune2fs**'
  prefs: []
  type: TYPE_NORMAL
- en: Tune *ext2* filesystem. May be used to change filesystem parameters, such as
    maximum mount count. This must be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Warning](../Images/9d1b374742c319dd43bb1c5d95d6e008.png) | This is an extremely
    dangerous command. Use it at your own risk, as you may inadvertently destroy your
    filesystem. |'
  prefs: []
  type: TYPE_TB
- en: '**dumpe2fs**'
  prefs: []
  type: TYPE_NORMAL
- en: Dump (list to `stdout`) very verbose filesystem info. This must be invoked as
    *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE80]  |'
  prefs: []
  type: TYPE_TB
- en: '**hdparm**'
  prefs: []
  type: TYPE_NORMAL
- en: List or change hard disk parameters. This command must be invoked as *root*,
    and it may be dangerous if misused.
  prefs: []
  type: TYPE_NORMAL
- en: '**fdisk**'
  prefs: []
  type: TYPE_NORMAL
- en: Create or change a partition table on a storage device, usually a hard drive.
    This command must be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Warning](../Images/9d1b374742c319dd43bb1c5d95d6e008.png) | Use this command
    with extreme caution. If something goes wrong, you may destroy an existing filesystem.
    |'
  prefs: []
  type: TYPE_TB
- en: '**fsck**, **e2fsck**, **debugfs**'
  prefs: []
  type: TYPE_NORMAL
- en: Filesystem check, repair, and debug command set.
  prefs: []
  type: TYPE_NORMAL
- en: '**fsck**: a front end for checking a UNIX filesystem (may invoke other utilities).
    The actual filesystem type generally defaults to *ext2*.'
  prefs: []
  type: TYPE_NORMAL
- en: '**e2fsck**: ext2 filesystem checker.'
  prefs: []
  type: TYPE_NORMAL
- en: '**debugfs**: ext2 filesystem debugger. One of the uses of this versatile, but
    dangerous command is to (attempt to) recover deleted files. For advanced users
    only!'
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Caution](../Images/05aa79b283e0d53b5a94a522ee0b6cfe.png) | All of these
    should be invoked as *root*, and they can damage or destroy a filesystem if misused.
    |'
  prefs: []
  type: TYPE_TB
- en: '**badblocks**'
  prefs: []
  type: TYPE_NORMAL
- en: Checks for bad blocks (physical media flaws) on a storage device. This command
    finds use when formatting a newly installed hard drive or testing the integrity
    of backup media. [[4]](#FTN.AEN16504) As an example, **badblocks /dev/fd0** tests
    a floppy disk.
  prefs: []
  type: TYPE_NORMAL
- en: The **badblocks** command may be invoked destructively (overwrite all data)
    or in non-destructive read-only mode. If *root user* owns the device to be tested,
    as is generally the case, then *root* must invoke this command.
  prefs: []
  type: TYPE_NORMAL
- en: '**lsusb**, **usbmodules**'
  prefs: []
  type: TYPE_NORMAL
- en: The **lsusb** command lists all USB (Universal Serial Bus) buses and the devices
    hooked up to them.
  prefs: []
  type: TYPE_NORMAL
- en: The **usbmodules** command outputs information about the driver modules for
    connected USB devices.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE81]  |'
  prefs: []
  type: TYPE_TB
- en: '**lspci**'
  prefs: []
  type: TYPE_NORMAL
- en: Lists *pci* busses present.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE82]  |'
  prefs: []
  type: TYPE_TB
- en: '**mkbootdisk**'
  prefs: []
  type: TYPE_NORMAL
- en: Creates a boot floppy which can be used to bring up the system if, for example,
    the MBR (master boot record) becomes corrupted. Of special interest is the `--iso`
    option, which uses **mkisofs** to create a bootable *ISO9660* filesystem image
    suitable for burning a bootable CDR.
  prefs: []
  type: TYPE_NORMAL
- en: The **mkbootdisk** command is actually a Bash script, written by Erik Troan,
    in the `/sbin` directory.
  prefs: []
  type: TYPE_NORMAL
- en: '**mkisofs**'
  prefs: []
  type: TYPE_NORMAL
- en: Creates an *ISO9660* filesystem suitable for a CDR image.
  prefs: []
  type: TYPE_NORMAL
- en: '**chroot**'
  prefs: []
  type: TYPE_NORMAL
- en: CHange ROOT directory. Normally commands are fetched from [$PATH](internalvariables.html#PATHREF),
    relative to `/`, the default *root directory*. This changes the *root* directory
    to a different one (and also changes the working directory to there). This is
    useful for security purposes, for instance when the system administrator wishes
    to restrict certain users, such as those [telnetting](communications.html#TELNETREF)
    in, to a secured portion of the filesystem (this is sometimes referred to as confining
    a guest user to a "chroot jail"). Note that after a **chroot**, the execution
    path for system binaries is no longer valid.
  prefs: []
  type: TYPE_NORMAL
- en: A `**chroot /opt**` would cause references to `/usr/bin` to be translated to
    `/opt/usr/bin`. Likewise, `**chroot /aaa/bbb /bin/ls**` would redirect future
    instances of **ls** to `/aaa/bbb` as the base directory, rather than `/` as is
    normally the case. An **alias XX 'chroot /aaa/bbb ls'** in a user's [`~/.bashrc`](sample-bashrc.html)
    effectively restricts which portion of the filesystem she may run command "XX"
    on.
  prefs: []
  type: TYPE_NORMAL
- en: The **chroot** command is also handy when running from an emergency boot floppy
    (**chroot** to `/dev/fd0`), or as an option to **lilo** when recovering from a
    system crash. Other uses include installation from a different filesystem (an
    [rpm](filearchiv.html#RPMREF) option) or running a readonly filesystem from a
    CD ROM. Invoke only as *root*, and use with care.
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Caution](../Images/05aa79b283e0d53b5a94a522ee0b6cfe.png) | It might be
    necessary to copy certain system files to a *chrooted* directory, since the normal
    `$PATH` can no longer be relied upon. |'
  prefs: []
  type: TYPE_TB
- en: '**lockfile**'
  prefs: []
  type: TYPE_NORMAL
- en: This utility is part of the **procmail** package ([www.procmail.org](http://www.procmail.org)).
    It creates a *lock file*, a *semaphore* that controls access to a file, device,
    or resource.
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '`**Definition:**` A *semaphore* is a flag or signal. (The usage originated
    in railroading, where a colored flag, lantern, or striped movable arm *semaphore*
    indicated whether a particular track was in use and therefore unavailable for
    another train.) A UNIX process can check the appropriate semaphore to determine
    whether a particular resource is available/accessible.'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: The lock file serves as a flag that this particular file, device, or resource
    is in use by a process (and is therefore "busy"). The presence of a lock file
    permits only restricted access (or no access) to other processes.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE83]  |'
  prefs: []
  type: TYPE_TB
- en: Lock files are used in such applications as protecting system mail folders from
    simultaneously being changed by multiple users, indicating that a modem port is
    being accessed, and showing that an instance of Firefox is using its cache. Scripts
    may check for the existence of a lock file created by a certain process to check
    if that process is running. Note that if a script attempts to create a lock file
    that already exists, the script will likely hang.
  prefs: []
  type: TYPE_NORMAL
- en: Normally, applications create and check for lock files in the `/var/lock` directory.
    [[5]](#FTN.AEN16659) A script can test for the presence of a lock file by something
    like the following.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE84]  |'
  prefs: []
  type: TYPE_TB
- en: '**flock**'
  prefs: []
  type: TYPE_NORMAL
- en: Much less useful than the **lockfile** command is **flock**. It sets an "advisory"
    lock on a file and then executes a command while the lock is on. This is to prevent
    any other process from setting a lock on that file until completion of the specified
    command.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE85]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Unlike **lockfile**,
    **flock** does *not* automatically create a lock file. |'
  prefs: []
  type: TYPE_TB
- en: '**mknod**'
  prefs: []
  type: TYPE_NORMAL
- en: Creates block or character [device files](devref1.html#DEVFILEREF) (may be necessary
    when installing new hardware on the system). The **MAKEDEV** utility has virtually
    all of the functionality of **mknod**, and is easier to use.
  prefs: []
  type: TYPE_NORMAL
- en: '**MAKEDEV**'
  prefs: []
  type: TYPE_NORMAL
- en: Utility for creating device files. It must be run as *root*, and in the `/dev`
    directory. It is a sort of advanced version of **mknod**.
  prefs: []
  type: TYPE_NORMAL
- en: '**tmpwatch**'
  prefs: []
  type: TYPE_NORMAL
- en: Automatically deletes files which have not been accessed within a specified
    period of time. Usually invoked by [cron](system.html#CRONREF) to remove stale
    log files.
  prefs: []
  type: TYPE_NORMAL
- en: '**Backup**'
  prefs: []
  type: TYPE_NORMAL
- en: '**dump**, **restore**'
  prefs: []
  type: TYPE_NORMAL
- en: The **dump** command is an elaborate filesystem backup utility, generally used
    on larger installations and networks. [[6]](#FTN.AEN16748) It reads raw disk partitions
    and writes a backup file in a binary format. Files to be backed up may be saved
    to a variety of storage media, including disks and tape drives. The **restore**
    command restores backups made with **dump**.
  prefs: []
  type: TYPE_NORMAL
- en: '**fdformat**'
  prefs: []
  type: TYPE_NORMAL
- en: Perform a low-level format on a floppy disk (`/dev/fd0*`).
  prefs: []
  type: TYPE_NORMAL
- en: '**System Resources**'
  prefs: []
  type: TYPE_NORMAL
- en: '**ulimit**'
  prefs: []
  type: TYPE_NORMAL
- en: Sets an *upper limit* on use of system resources. Usually invoked with the `-f`
    option, which sets a limit on file size (**ulimit -f 1000** limits files to 1
    meg maximum). [[7]](#FTN.AEN16782) The `-t` option limits the coredump size (**ulimit
    -c 0** eliminates coredumps). Normally, the value of **ulimit** would be set in
    `/etc/profile` and/or `~/.bash_profile` (see [Appendix H](files.html)).
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Important](../Images/d8e2c61a4ebc25a8846b6825b6029167.png) | Judicious
    use of **ulimit** can protect a system against the dreaded *fork bomb*.'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE86]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: A **ulimit -Hu XX** (where *XX* is the user process limit) in `/etc/profile`
    would abort this script when it exceeded the preset limit. |
  prefs: []
  type: TYPE_NORMAL
- en: '**quota**'
  prefs: []
  type: TYPE_NORMAL
- en: Display user or group disk quotas.
  prefs: []
  type: TYPE_NORMAL
- en: '**setquota**'
  prefs: []
  type: TYPE_NORMAL
- en: Set user or group disk quotas from the command-line.
  prefs: []
  type: TYPE_NORMAL
- en: '**umask**'
  prefs: []
  type: TYPE_NORMAL
- en: User file creation permissions *mask*. Limit the default file attributes for
    a particular user. All files created by that user take on the attributes specified
    by **umask**. The (octal) value passed to **umask** defines the file permissions
    *disabled*. For example, **umask 022** ensures that new files will have at most
    755 permissions (777 NAND 022). [[8]](#FTN.AEN16847) Of course, the user may later
    change the attributes of particular files with [chmod](basic.html#CHMODREF). The
    usual practice is to set the value of **umask** in `/etc/profile` and/or `~/.bash_profile`
    (see [Appendix H](files.html)).
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-10\. Using *umask* to hide an output file from prying eyes**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE87]  |'
  prefs: []
  type: TYPE_TB
- en: '**rdev**'
  prefs: []
  type: TYPE_NORMAL
- en: Get info about or make changes to root device, swap space, or video mode. The
    functionality of **rdev** has generally been taken over by **lilo**, but **rdev**
    remains useful for setting up a ram disk. This is a dangerous command, if misused.
  prefs: []
  type: TYPE_NORMAL
- en: '**Modules**'
  prefs: []
  type: TYPE_NORMAL
- en: '**lsmod**'
  prefs: []
  type: TYPE_NORMAL
- en: List installed kernel modules.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE88]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Doing a **cat /proc/modules**
    gives the same information. |'
  prefs: []
  type: TYPE_TB
- en: '**insmod**'
  prefs: []
  type: TYPE_NORMAL
- en: Force installation of a kernel module (use **modprobe** instead, when possible).
    Must be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '**rmmod**'
  prefs: []
  type: TYPE_NORMAL
- en: Force unloading of a kernel module. Must be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '**modprobe**'
  prefs: []
  type: TYPE_NORMAL
- en: Module loader that is normally invoked automatically in a startup script. Must
    be invoked as *root*.
  prefs: []
  type: TYPE_NORMAL
- en: '**depmod**'
  prefs: []
  type: TYPE_NORMAL
- en: Creates module dependency file. Usually invoked from a startup script.
  prefs: []
  type: TYPE_NORMAL
- en: '**modinfo**'
  prefs: []
  type: TYPE_NORMAL
- en: Output information about a loadable module.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE89]  |'
  prefs: []
  type: TYPE_TB
- en: '**Miscellaneous**'
  prefs: []
  type: TYPE_NORMAL
- en: '**env**'
  prefs: []
  type: TYPE_NORMAL
- en: Runs a program or script with certain [environmental variables](othertypesv.html#ENVREF)
    set or changed (without changing the overall system environment). The `[varname=xxx]`
    permits changing the environmental variable `varname` for the duration of the
    script. With no options specified, this command lists all the environmental variable
    settings. [[9]](#FTN.AEN16975)
  prefs: []
  type: TYPE_NORMAL
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | The first line
    of a script (the "sha-bang" line) may use **env** when the path to the shell or
    interpreter is unknown.'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE90]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: Or even ...
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE91]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '**ldd**'
  prefs: []
  type: TYPE_NORMAL
- en: Show shared lib dependencies for an executable file.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE92]  |'
  prefs: []
  type: TYPE_TB
- en: '**watch**'
  prefs: []
  type: TYPE_NORMAL
- en: Run a command repeatedly, at specified time intervals.
  prefs: []
  type: TYPE_NORMAL
- en: The default is two-second intervals, but this may be changed with the `-n` option.
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE93]  |'
  prefs: []
  type: TYPE_TB
- en: '| ![Note](../Images/068cd6dc5ba56f1437f9ae6e0cb52ede.png) | Unfortunately,
    [piping](special-chars.html#PIPEREF) the output of **watch command** to [grep](textproc.html#GREPREF)
    does not work. |'
  prefs: []
  type: TYPE_TB
- en: '**strip**'
  prefs: []
  type: TYPE_NORMAL
- en: Remove the debugging symbolic references from an executable binary. This decreases
    its size, but makes debugging it impossible.
  prefs: []
  type: TYPE_NORMAL
- en: This command often occurs in a [Makefile](filearchiv.html#MAKEFILEREF), but
    rarely in a shell script.
  prefs: []
  type: TYPE_NORMAL
- en: '**nm**'
  prefs: []
  type: TYPE_NORMAL
- en: List symbols in an unstripped compiled binary.
  prefs: []
  type: TYPE_NORMAL
- en: '**xrandr**'
  prefs: []
  type: TYPE_NORMAL
- en: Command-line tool for manipulating the root window of the screen.
  prefs: []
  type: TYPE_NORMAL
- en: '**Example 17-11\. *Backlight*: changes the brightness of the (laptop) screen
    backlight**'
  prefs: []
  type: TYPE_NORMAL
- en: '|  [PRE94]  |'
  prefs: []
  type: TYPE_TB
- en: '**rdist**'
  prefs: []
  type: TYPE_NORMAL
- en: 'Remote distribution client: synchronizes, clones, or backs up a file system
    on a remote server.'
  prefs: []
  type: TYPE_NORMAL
- en: Notes
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '| [[1]](system.html#AEN14695) | This is the case on a Linux machine or a UNIX
    system with disk quotas. |'
  prefs: []
  type: TYPE_TB
- en: '| [[2]](system.html#AEN14727) | The **userdel** command will fail if the particular
    user being deleted is still logged on. |'
  prefs: []
  type: TYPE_TB
- en: '| [[3]](system.html#AEN16255) | For more detail on burning CDRs, see Alex Withers''
    article, [Creating CDs](http://www2.linuxjournal.com/lj-issues/issue66/3335.html),
    in the October, 1999 issue of [*Linux Journal*](http://www.linuxjournal.com).
    |'
  prefs: []
  type: TYPE_TB
- en: '| [[4]](system.html#AEN16504) | The `-c` option to [mke2fs](system.html#MKE2FSREF)
    also invokes a check for bad blocks. |'
  prefs: []
  type: TYPE_TB
- en: '| [[5]](system.html#AEN16659) | Since only *root* has write permission in the
    `/var/lock` directory, a user script cannot set a lock file there. |'
  prefs: []
  type: TYPE_TB
- en: '| [[6]](system.html#AEN16748) | Operators of single-user Linux systems generally
    prefer something simpler for backups, such as **tar**. |'
  prefs: []
  type: TYPE_TB
- en: '| [[7]](system.html#AEN16782) | As of the [version 4 update](bashver4.html#BASH4REF)
    of Bash, the `-f` and `-c` options take a block size of 512 when in [POSIX](sha-bang.html#POSIX2REF)
    mode. Additionally, there are two new options: `-b` for [socket](devref1.html#SOCKETREF)
    buffer size, and `-T` for the limit on the number of *threads*. |'
  prefs: []
  type: TYPE_TB
- en: '| [[8]](system.html#AEN16847) | NAND is the logical *not-and* operator. Its
    effect is somewhat similar to subtraction. |'
  prefs: []
  type: TYPE_TB
- en: '| [[9]](system.html#AEN16975) | In Bash and other Bourne shell derivatives,
    it is possible to set variables in a single command''s environment.'
  prefs: []
  type: TYPE_NORMAL
- en: '&#124;  [PRE95]  &#124;'
  prefs: []
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
