<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch098.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="usingcurl__uploads__md-_-_-uploads" class="level1" data-number="97">
<h1 data-number="97">Uploads</h1>
<p>Uploading is a term for sending data to a remote server. Uploading is done differently for each protocol, and several protocols may even allow different ways of uploading data.</p>
<section id="usingcurl__uploads__md-_-_-protocols-allowing-upload" class="level2" data-number="97.1">
<h2 data-number="97.1">Protocols allowing upload</h2>
<p>You can upload data using one of these protocols: FILE, FTP, FTPS, HTTP, HTTPS, IMAP, IMAPS, SCP, SFTP, SMB, SMBS, SMTP, SMTPS and TFTP.</p>
</section>
<section id="usingcurl__uploads__md-_-_-http-offers-several-uploads" class="level2" data-number="97.2">
<h2 data-number="97.2">HTTP offers several uploads</h2>
<p>HTTP, and its bigger brother HTTPS, offer several different ways to upload data to a server, and curl provides easy command-line options to do it the three most common ways, described below.</p>
<p>An interesting detail with HTTP is that an upload can also be a download, in the same operation and in fact many downloads are initiated with an HTTP POST.</p>
<section id="usingcurl__uploads__md-_-_-post" class="level3" data-number="97.2.1">
<h3 data-number="97.2.1">POST</h3>
<p>POST is the HTTP method that was invented to send data to a receiving web application, and it is, for example, how most common HTML forms on the web work. It usually sends a chunk of relatively small amounts of data to the receiver.</p>
<p>The upload kind is usually done with the <code>-d</code> or <code>--data</code> options, but there are a few additional alterations.</p>
<p>Read the detailed description on how to do this with curl in the <a href="../http/post/">HTTP POST with curl</a> chapter.</p>
</section>
<section id="usingcurl__uploads__md-_-_-multipart-formpost" class="level3" data-number="97.2.2">
<h3 data-number="97.2.2">multipart formpost</h3>
<p>Multipart formposts are also used in HTML forms on websites; typically when there is a file upload involved. This type of upload is also an HTTP POST but it sends the data formatted according to some special rules, which is what the multipart name means.</p>
<p>Since it sends the data formatted completely differently, you cannot select which type of POST to use at your own whim but it entirely depends on what the receiving server end expects and can handle.</p>
<p>HTTP multipart formposts are done with <code>-F</code>. See the detailed description in the <a href="ch165.xhtml#http__post__multipart__md">HTTP multipart formposts</a> chapter.</p>
</section>
<section id="usingcurl__uploads__md-_-_-put" class="level3" data-number="97.2.3">
<h3 data-number="97.2.3">PUT</h3>
<p>HTTP PUT is the upload method that was designed to send a complete resource meant to be put as-is on the remote site or even replace an existing resource there. That said, this is also the least used upload method for HTTP on the web today and lots, if not most, web servers do not even have PUT enabled.</p>
<p>You send off an HTTP upload using the -T option with the file to upload:</p>
<pre><code>curl -T uploadthis http://example.com/</code></pre>
</section>
</section>
<section id="usingcurl__uploads__md-_-_-ftp-uploads" class="level2" data-number="97.3">
<h2 data-number="97.3">FTP uploads</h2>
<p>Working with FTP, you get to see the remote file system you are accessing. You tell the server exactly in which directory you want the upload to be placed and which filename to use. If you specify the upload URL with a trailing slash, curl appends the locally used filename to the URL and then that becomes the filename used when stored remotely:</p>
<pre><code>curl -T uploadthis ftp://example.com/this/directory/</code></pre>
<p>So if you prefer to select a different filename on the remote side than what you have used locally, you specify it in the URL:</p>
<pre><code>curl -T uploadthis ftp://example.com/this/directory/remotename</code></pre>
<p>Learn much more about FTPing in the <a href="../ftp/">FTP with curl</a> section.</p>
</section>
<section id="usingcurl__uploads__md-_-_-smtp-uploads" class="level2" data-number="97.4">
<h2 data-number="97.4">SMTP uploads</h2>
<p>You may not consider sending an email to be uploading, but to curl it is. You upload the mail body to the SMTP server. With SMTP, you also need to include all the mail headers you need (<code>To:</code>, <code>From:</code>, <code>Date:</code>, etc.) in the mail body as curl does not add any at all.</p>
<pre><code>curl -T mail smtp://mail.example.com/ --mail-from user@example.com</code></pre>
<p>Learn more about using SMTP with curl in the <a href="ch136.xhtml#usingcurl__smtp__md">Sending email</a> section.</p>
</section>
<section id="usingcurl__uploads__md-_-_-progress-meter-for-uploads" class="level2" data-number="97.5">
<h2 data-number="97.5">Progress meter for uploads</h2>
<p>The general progress meter curl provides (see the <a href="ch073.xhtml#cmdline__progressmeter__md">Progress meter</a> section) works fine for uploads as well. What needs to be remembered is that the progress meter is automatically disabled when you are sending output to stdout, and most protocols curl support can output something even for an upload.</p>
<p>Therefore, you may need to explicitly redirect the downloaded data to a file (using shell redirect ‘&gt;’, <code>-o</code> or similar) to get the progress meter displayed for upload.</p>
<p><span id="usingcurl__transfers__README__md"></span></p>
</section>
</section>
</body>
</html>
