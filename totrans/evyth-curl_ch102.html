<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch102.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="usingcurl__transfers__request-rate__md-_-_-request-rate-limiting" class="level1" data-number="101">
<h1 data-number="101">Request rate limiting</h1>
<p>When told to do multiple transfers in a single command line, there might be times when a user would rather have those multiple transfers done slower than as fast as possible. We call that <em>request rate limiting</em>.</p>
<p>With the <code>--rate</code> option, you specify the maximum transfer frequency you allow curl to use - in number of transfer starts per time unit (sometimes called request rate). Without this option, curl starts the next transfer as fast as possible.</p>
<p>If given several URLs and a transfer completes faster than the allowed rate, curl delays starting the next transfer to maintain the requested rate. This option is for serial transfers and has no effect when <a href="ch066.xhtml#cmdline__urls__parallel__md">–parallel</a> is used.</p>
<p>The request rate is provided as <strong>N/U</strong> where N is an integer number and U is a time unit. Supported units are <code>s</code> (second), <code>m</code> (minute), <code>h</code> (hour) and <code>d</code> (day, as in a 24 hour unit). The default time unit, if no <strong>/U</strong> is provided, is number of transfers per hour.</p>
<p>If curl is told to allow 10 requests per minute, it does not start the next request until 6 seconds have elapsed since the previous transfer was started.</p>
<p>This function uses millisecond resolution. If the allowed frequency is set more than 1000 per second, it instead runs unrestricted.</p>
<p>When retrying transfers, enabled with <a href="ch095.xhtml#usingcurl__downloads__retry__md">–retry</a>, the separate retry delay logic is used and not this setting.</p>
<p>If this option is used several times, the last one is used.</p>
<p>For example, make curl download 100 images but doing it no faster than 2 transfers per second:</p>
<pre><code>curl --rate 2/s -O https://example.com/[1-100].jpg</code></pre>
<p>Make curl download 10 images but doing it no faster than 3 transfers per hour:</p>
<pre><code>curl --rate 3/h -O https://example.com/[1-10].jpg</code></pre>
<p>Make curl download 200 images but not faster than 14 transfers per minute:</p>
<pre><code>curl --rate 14/m -O https://example.com/[1-200].jpg</code></pre>
<p><span id="usingcurl__connections__README__md"></span></p>
</section>
</body>
</html>
