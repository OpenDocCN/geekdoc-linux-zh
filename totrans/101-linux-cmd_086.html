<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>The <code>rsync</code> command</h1>
    <p>The <code>rsync</code> command is probably one of the most used commands out there. It is used to securely copy files from one server to another over SSH.</p>
    <p>Compared to the <code>scp</code> command, which does a similar thing, <code>rsync</code> makes the transfer a lot faster, and in case of an interruption, you could restore/resume the transfer process.</p>
    <p>In this tutorial, I will show you how to use the <code>rsync</code> command and copy files from one server to another and also share a few useful tips!</p>
    <p>Before you get started, you would need to have 2 Linux servers. I will be using DigitalOcean for the demo and deploy 2 Ubuntu servers.</p>
    <p>You can use my referral link to get a free $100 credit that you could use to deploy your virtual machines and test the guide yourself on a few DigitalOcean servers:</p>
    <p>
      <strong>
        <a href="https://m.do.co/c/2a9bba940f39">DigitalOcean $100 Free Credit</a>
      </strong>
    </p>
    <h2>Transfer Files from local server to remote</h2>
    <p>This is one of the most common causes. Essentially this is how you would copy the files from the server that you are currently on (the source server) to remote/destination server.</p>
    <p>What you need to do is SSH to the server that is holding your files, cd to the directory that you would like to transfer over:</p>
    <pre>
      <code class="language-php hljs php" data-lang="php">cd /<span class="hljs-keyword">var</span>/www/html
</code>
    </pre>
    <p>And then run:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript">rsync -avz user@your-remote-server.com:<span class="hljs-regexp">/home/u</span>ser/dir/
</code>
    </pre>
    <p>The above command would copy all the files and directories from the current folder on your server to your remote server.</p>
    <p>Rundown of the command:</p>
    <ul>
      <li><code>-a</code>: is used to specify that you want recursion and want to preserve the file permissions and etc.</li>
      <li><code>-v</code>: is verbose mode, it increases the amount of information you are given during the transfer.</li>
      <li><code>-z</code>:  this option, rsync compresses the file data as it is sent to the destination machine, which reduces the amount of data being transmitted -- something that is useful over a slow connection.</li>
    </ul>
    <p>I recommend having a look at the following website which explains the commands and the arguments very nicely:</p>
    <p>
      <a href="https://explainshell.com/explain?cmd=rsync+-avz">https://explainshell.com/explain?cmd=rsync+-avz</a>
    </p>
    <p>In case that the SSH service on the remote server is not running on the standard <code>22</code> port, you could use <code>rsync</code> with a special SSH port:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript">rsync -avz -e <span class="hljs-string">'ssh -p 1234'</span> user@your-remote-server.com:<span class="hljs-regexp">/home/u</span>ser/dir/
</code>
    </pre>
    <h2>Transfer Files remote server to local</h2>
    <p>In some cases you might want to transfer files from your remote server to your local server, in this case, you would need to use the following syntax:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript">rsync -avz your-user@your-remote-server.com:<span class="hljs-regexp">/home/u</span>ser/dir/ <span class="hljs-regexp">/home/u</span>ser/local-dir/
</code>
    </pre>
    <p>Again, in case that you have a non-standard SSH port, you can use the following command:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript">rsync -avz -e <span class="hljs-string">'ssh -p 2510'</span> your-user@your-remote-server.com:<span class="hljs-regexp">/home/u</span>ser/dir/ <span class="hljs-regexp">/home/u</span>ser/local-dir/
</code>
    </pre>
    <h2>Transfer only missing files</h2>
    <p>If you would like to transfer only the missing files you could use the <code>--ignore-existing</code> flag.</p>
    <p>This is very useful for final sync in order to ensure that there are no missing files after a website or a server migration.</p>
    <p>Basically the commands would be the same apart from the appended --ignore-existing flag:</p>
    <pre>
      <code class="language-javascript hljs javascript" data-lang="javascript"> rsync -avz --ignore-existing  user@your-remote-server.com:<span class="hljs-regexp">/home/u</span>ser/dir/
</code>
    </pre>
    <h2>Conclusion</h2>
    <p>Using <code>rsync</code> is a great way to quickly transfer some files from one machine over to another in a secure way over SSH.</p>
    <p>For more cool Linux networking tools, I would recommend checking out this tutorial here:</p>
    <p>
      <a href="https://devdojo.com/serverenthusiast/top-15-linux-networking-tools-that-you-should-know">Top 15 Linux Networking tools that you should know!</a>
    </p>
    <p>Hope that this helps!</p>
    <p>Initially posted here: <a href="https://devdojo.com/bobbyiliev/how-to-transfer-files-from-one-linux-server-to-another-using-rsync">How to Transfer Files from One Linux Server to Another Using rsync</a></p>
  </body></html>