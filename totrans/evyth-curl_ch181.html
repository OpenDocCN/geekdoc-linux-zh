<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch181.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="http__hsts__md-_-_-hsts" class="level1" data-number="180">
<h1 data-number="180">HSTS</h1>
<p>HTTP Strict Transport Security, HSTS, is a protocol mechanism that helps to protect HTTPS servers against man-in-the-middle attacks such as protocol downgrade attacks and cookie hijacking. It allows an HTTPS server to declare that clients should automatically interact with this hostname using only HTTPS connections going forward - and explicitly not use clear text protocols with it.</p>
<section id="http__hsts__md-_-_-hsts-cache" class="level2" data-number="180.1">
<h2 data-number="180.1">HSTS cache</h2>
<p>The HSTS status for a certain server name is set in a response header and has an expire time. The status for every HSTS hostname needs to be saved in a file for curl to pick it up and to update the status and expire time.</p>
<p>Invoke curl and tell it which file to use as a hsts cache:</p>
<pre><code>curl --hsts hsts.txt https://example.com</code></pre>
<p>curl only updates the hsts info if the header is read over a secure transfer, so not when done over a clear text protocol.</p>
</section>
<section id="http__hsts__md-_-_-use-hsts-to-update-insecure-protocols" class="level2" data-number="180.2">
<h2 data-number="180.2">Use HSTS to update insecure protocols</h2>
<p>If the cache file now contains an entry for the given hostname, it automatically switches over to a secure protocol even if you try to connect to it with an insecure one:</p>
<pre><code>curl --hsts hsts.txt http://example.com</code></pre>
<p><span id="http__browserlike__md"></span></p>
</section>
</section>
</body>
</html>
