<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch108.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="usingcurl__connections__keepalive__md-_-_-keep-alive" class="level1" data-number="107">
<h1 data-number="107">Keep alive</h1>
<p>TCP connections can be totally without traffic in either direction when they are not used. A totally idle connection can therefore not be clearly separated from a connection that has gone completely stale because of network or server issues.</p>
<p>At the same time, lots of network equipment such as firewalls or NATs are keeping track of TCP connections these days, so that they can translate addresses, block “wrong” incoming packets, etc. These devices often count completely idle connections as dead after N minutes, where N varies between device to device but at times is as short as 10 minutes or even less.</p>
<p>One way to help avoid a really slow connection (or an idle one) getting treated as dead and wrongly killed, is to make sure TCP keep alive is used. TCP keepalive is a feature in the TCP protocol that makes it send “ping frames” back and forth when it would otherwise be totally idle. It helps idle connections to detect breakage even when no traffic is moving over it, and helps intermediate systems not consider the connection dead.</p>
<p>curl uses TCP keepalive by default for the reasons mentioned here. But there might be times when you want to <em>disable</em> keepalive or you may want to change the interval between the TCP “pings” (curl defaults to 60 seconds). You can switch off keepalive with:</p>
<pre><code>curl --no-keepalive https://example.com/</code></pre>
<p>or change the interval to 5 minutes (300 seconds) with:</p>
<pre><code>curl --keepalive-time 300 https://example.com/</code></pre>
<p><span id="usingcurl__timeouts__md"></span></p>
</section>
</body>
</html>
