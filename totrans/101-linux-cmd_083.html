<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>The <code>ionice</code> command</h1>
    <p>The <code>ionice</code> command is used to set or get process I/O scheduling class and priority.</p>
    <p>If no arguments are given , <code>ionice</code> will query the current I/O scheduling class and priority for that process.</p>
    <h2>Usage</h2>
    <pre>
      <code class="language-xml hljs xml" data-lang="xml">ionice [options] -p <span class="hljs-tag">&lt;<span class="hljs-name">pid</span>&gt;</span>
</code>
    </pre>
    <pre>
      <code class="language-xml hljs xml" data-lang="xml">ionice [options] -P <span class="hljs-tag">&lt;<span class="hljs-name">pgid</span>&gt;</span>
</code>
    </pre>
    <pre>
      <code class="language-xml hljs xml" data-lang="xml">ionice [options] -u <span class="hljs-tag">&lt;<span class="hljs-name">uid</span>&gt;</span>
</code>
    </pre>
    <pre>
      <code class="language-xml hljs xml" data-lang="xml">ionice [options] <span class="hljs-tag">&lt;<span class="hljs-name">command</span>&gt;</span>
</code>
    </pre>
    <h2>A process can be of three scheduling classes:</h2>
    <ul>
      <li>
        <h3>Idle</h3>
        <p>A program with idle I/O priority will only get disk time when <code>no other program has asked for disk I/O for a defined grace period</code>.</p>
        <p>The impact of idle processes on normal system actively should be <code>zero</code>.</p>
        <p>This scheduling class <code>doesn’t take priority</code> argument.</p>
        <p>Presently this scheduling class is permitted for an <code>ordinary user (since kernel 2.6.25)</code>.</p>
      </li>
      <li>
        <h3>Best Effort</h3>
        <p>This is <code>effective</code> scheduling class for any process that has <code>not asked for a specific I/O priority</code>.</p>
        <p>This class <code>takes priority argument from 0-7</code>, with <code>lower</code> number being <code>higher priority</code>.</p>
        <p>Programs running at the same best effort priority are served in <code>round- robbin fashion</code>.</p>
        <p>Note that before kernel 2.6.26  a process that has not asked for an I/O priority formally uses “None” as scheduling class , but the io schedular will treat such processes as if it were in the best effort class.</p>
        <p>The priority within best effort class will be dynamically derived form the CPU nice level of the process : io_priority = ( cpu_nice + 20 ) / 5/
for kernels after 2.6.26 with CFQ I/O schedular a process that has not asked for sn io priority inherits CPU scheduling class.</p>
        <p><code>The I/O priority is derived from the CPU nice level of the process</code> ( smr sd before kernel 2.6.26 ).</p>
      </li>
      <li>
        <h3>Real Time</h3>
        <p>The real time schedular class is <code>given first access to disk, regardless of what else is going on in the system</code>.</p>
        <p>Thus the real time class needs to be used with some care, as it cans tarve other processes .</p>
        <p>As with the best effort class, <code>8 priority levels are defined denoting how big a time slice a given process will receive on each scheduling window</code>.</p>
        <p>This scheduling class is <code>not permitted for an ordinary user(non-root)</code>.</p>
      </li>
    </ul>
    <h2>Options</h2>
    <table>
      <thead>
        <tr>
          <th>Options</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>-c, --class <class/></td>
          <td>name or number of scheduling class, 0: none, 1: realtime, 2: best-effort, 3: idle</td>
        </tr>
        <tr>
          <td>-n, --classdata <num/></td>
          <td>priority (0..7) in the specified scheduling class,only for the realtime and best-effort classes</td>
        </tr>
        <tr>
          <td>-p, --pid <pid>...</pid></td>
          <td>act on these already running processes</td>
        </tr>
        <tr>
          <td>-P, --pgid <pgrp>...</pgrp></td>
          <td>act on already running processes in these groups</td>
        </tr>
        <tr>
          <td>-t, --ignore</td>
          <td>ignore failures</td>
        </tr>
        <tr>
          <td>-u, --uid <uid>...</uid></td>
          <td>act on already running processes owned by these users</td>
        </tr>
        <tr>
          <td>-h, --help</td>
          <td>display this help</td>
        </tr>
        <tr>
          <td>-V, --version</td>
          <td>display version</td>
        </tr>
      </tbody>
    </table>
    <p>For more details see ionice(1).</p>
    <h2>Examples</h2>
    <table>
      <thead>
        <tr>
          <th>Command</th>
          <th>O/P</th>
          <th>Explanation</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <code>$ ionice</code>
          </td>
          <td>
            <em>none: prio 4</em>
          </td>
          <td>Running alone <code>ionice</code> will give the class and priority of current process</td>
        </tr>
        <tr>
          <td>
            <code>$ ionice -p 101</code>
          </td>
          <td>
            <em>none : prio 4</em>
          </td>
          <td>Give the details(<em>class : priority</em>) of the process specified by given process id</td>
        </tr>
        <tr>
          <td>
            <code>$ ionice -p 2</code>
          </td>
          <td>
            <em>none: prio 4</em>
          </td>
          <td>Check the class and priority of process with pid 2 it is none and 4 resp.</td>
        </tr>
        <tr>
          <td>
            <code>$ ionice    -c2    -n0    -p2</code>
          </td>
          <td>2 ( best-effort )	priority 0	process 2</td>
          <td>Now lets set process(pid) 2 as a best-effort program with highest priority</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> -p 2</td>
          <td>best-effort : prio 0</td>
          <td>Now if I check details of Process 2 you can see the updated one</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> /bin/ls</td>
          <td/>
          <td>get priority and class info of bin/ls</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> -n4 -p2</td>
          <td/>
          <td>set priority 4 of process with pid 2</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> -p 2</td>
          <td>best-effort: prio 4</td>
          <td>Now observe the difference between the command ran above and this one we have changed priority from 0 to 4</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> -c0 -n4 -p2</td>
          <td>ionice: ignoring given class data for none class</td>
          <td>(Note that before kernel 2.6.26  a process that has not asked for an I/O priority formally uses “None” as scheduling class ,</td>
        </tr>
        <tr>
          <td/>
          <td/>
          <td>but the io schedular will treat such processes as if it were in the best effort class. )</td>
        </tr>
        <tr>
          <td/>
          <td/>
          <td>-t option : ignore failure</td>
        </tr>
        <tr>
          <td>$ <code>ionice</code> -c0 -n4 -p2 -t</td>
          <td/>
          <td>For ignoring the warning shown above we can use -t option so it will ignore failure</td>
        </tr>
      </tbody>
    </table>
    <h2>Conclusion</h2>
    <p>Thus we have successfully learnt about <code>ionice</code> command.</p>
  </body></html>