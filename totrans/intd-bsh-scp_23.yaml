- en: Redirection in Bash
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A Linux superuser must have a good knowledge of pipes and redirection in Bash.
    It is an essential component of the system and is often helpful in the field of
    Linux System Administration.
  prefs: []
  type: TYPE_NORMAL
- en: When you run a command like `ls`, `cat`, etc, you get some output on the terminal.
    If you write a wrong command, pass a wrong flag or a wrong command-line argument,
    you get error output on the terminal. In both the cases, you are given some text.
    It may seem like "just text" to you, but the system treats this text differently.
    This identifier is known as a File Descriptor (fd).
  prefs: []
  type: TYPE_NORMAL
- en: In Linux, there are 3 File Descriptors, **STDIN** (0); **STDOUT** (1) and **STDERR**
    (2).
  prefs: []
  type: TYPE_NORMAL
- en: '**STDIN** (fd: 0): Manages the input in the terminal.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**STDOUT** (fd: 1): Manages the output text in the terminal.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**STDERR** (fd: 2): Manages the error text in the terminal.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Difference between Pipes and Redirections
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Both *pipes* and *redirections* redirect streams `(file descriptor)` of process
    being executed. The main difference is that *redirections* deal with `files stream`,
    sending the output stream to a file or sending the content of a given file to
    the input stream of the process.
  prefs: []
  type: TYPE_NORMAL
- en: On the other hand a pipe connects two commands by sending the output stream
    of the first one to the input stream of the second one. without any redirections
    specified.
  prefs: []
  type: TYPE_NORMAL
- en: Redirection in Bash
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: STDIN (Standard Input)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you enter some input text for a command that asks for it, you are actually
    entering the text to the **STDIN** file descriptor. Run the `cat` command without
    any command-line arguments. It may seem that the process has paused but in fact
    it's `cat` asking for **STDIN**. `cat` is a simple program and will print the
    text passed to **STDIN**. However, you can extend the use case by redirecting
    the input to the commands that take **STDIN**.
  prefs: []
  type: TYPE_NORMAL
- en: 'Example with `cat`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'This will simply print the provided text on the terminal screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The same can be done with other commands that take input via STDIN. Like, `wc`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The `-l` flag with `wc` counts the number of lines. This block of bash code
    will print the number of lines to the terminal screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: STDOUT (Standard Output)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The normal non-error text on your terminal screen is printed via the **STDOUT**
    file descriptor. The **STDOUT** of a command can be redirected into a file, in
    such a way that the output of the command is written to a file instead of being
    printed on the terminal screen. This is done simply with the help of `>` and `>>`
    operators.
  prefs: []
  type: TYPE_NORMAL
- en: 'Example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: The above command will not print "Hello World" on the terminal screen, it will
    instead create a file called `file.txt` and will write the "Hello World" string
    to it. This can be verified by running the `cat` command on the `file.txt` file.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: However, everytime you redirect the **STDOUT** of any command multiple times
    to the same file, it will remove the existing contents of the file to write the
    new ones.
  prefs: []
  type: TYPE_NORMAL
- en: 'Example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'On running `cat` on `file.txt` file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: You will only get the "How are you?" string printed.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: This is because the "Hello World" string has been overwritten. This behaviour
    can be avoided using the `>>` operator.
  prefs: []
  type: TYPE_NORMAL
- en: 'The above example can be written as:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: On running `cat` on the `file.txt` file, you will get the desired result.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: Alternatively, the redirection operator for **STDOUT** can also be written as
    `1>`. Like,
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: STDERR (Standard Error)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The error text on the terminal screen is printed via the **STDERR** of the
    command. For example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: would give an error messages. This error message is the **STDERR** of the command.
  prefs: []
  type: TYPE_NORMAL
- en: '**STDERR** can be redirected using the `2>` operator.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: This command will redirect the error message to the `error.txt` file and write
    it to it. This can be verified by running the `cat` command on the `error.txt`
    file.
  prefs: []
  type: TYPE_NORMAL
- en: You can also use the `2>>` operator for **STDERR** just like you used `>>` for
    **STDOUT**.
  prefs: []
  type: TYPE_NORMAL
- en: Error messages in Bash Scripts can be undesirable sometimes. You can choose
    to ignore them by redirecting the error message to the `/dev/null` file. `/dev/null`
    is pseudo-device that takes in text and then immediately discards it.
  prefs: []
  type: TYPE_NORMAL
- en: 'The above example can be written follows to ignore the error text completely:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: Of course, you can redirect both **STDOUT** and **STDERR** for the same command
    or script.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Both of them can be redirected to the same file as well.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: There is also a shorter way to do this.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: Piping
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: So far we have seen how to redirect the **STDOUT**, **STDIN** and **STDOUT**
    to and from a file. To concatenate the output of program *(command)* as the input
    of another program *(command)* you can use a vertical bar `|`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: This command will list the files in the current directory and pass output to
    *`grep`* command which then filter the output to only show the files that contain
    the string ".txt".
  prefs: []
  type: TYPE_NORMAL
- en: 'Syntax:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: You can also build arbitrary chains of commands by piping them together to achieve
    a powerful result.
  prefs: []
  type: TYPE_NORMAL
- en: 'This example creates a listing of every user which owns a file in a given directory
    as well as how many files and directories they own:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'Output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: HereDocument
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The symbol `<<` can be used to create a temporary file [heredoc] and redirect
    from it at the command line.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'Note here that `EOF` represents the delimiter (end of file) of the heredoc.
    In fact, we can use any alphanumeric word in its place to signify the start and
    the end of the file. For instance, this is a valid heredoc:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: Effectively it will appear as if the contents of the heredoc are piped into
    the command. This can make the script very clean if multiple lines need to be
    piped into a program.
  prefs: []
  type: TYPE_NORMAL
- en: 'Further, we can attach more pipes as shown:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: Also, pre-defined variables can be used inside the heredocs.
  prefs: []
  type: TYPE_NORMAL
- en: HereString
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Herestrings are quite similar to heredocs but use `<<<`. These are used for
    single line strings that have to be piped into some program. This looks cleaner
    that heredocs as we don't have to specify the delimiter.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: Just like heredocs, herestrings can contain variables.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '| **Operator** | **Description** |'
  prefs: []
  type: TYPE_TB
- en: '| :-- | :-- |'
  prefs: []
  type: TYPE_TB
- en: '| `>` | `Save output to a file` |'
  prefs: []
  type: TYPE_TB
- en: '| `>>` | `Append output to a file` |'
  prefs: []
  type: TYPE_TB
- en: '| `<` | `Read input from a file` |'
  prefs: []
  type: TYPE_TB
- en: '| `2>` | `Redirect error messages` |'
  prefs: []
  type: TYPE_TB
- en: '| `&#124;` | `Send the output from one program as input to another program`
    |'
  prefs: []
  type: TYPE_TB
- en: '| `<<` | `Pipe multiple lines into a program cleanly` |'
  prefs: []
  type: TYPE_TB
- en: '| `<<<` | `Pipe a single line into a program cleanly` |'
  prefs: []
  type: TYPE_TB
