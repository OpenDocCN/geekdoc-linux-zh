- en: Copy as curl
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Copy as curl
- en: Using curl to reproduce an operation a user just managed to do with his or her
    browser is a common request and area people ask for help about.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 curl 重新执行用户刚刚使用浏览器完成的操作是一个常见的请求和人们寻求帮助的领域。
- en: How do you get a curl command line to get a resource, just like the browser
    would get it, nice and easy? Chrome, Firefox, Edge and Safari all have this feature.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如何获取一个 curl 命令行来获取资源，就像浏览器获取它那样，既简单又方便？Chrome、Firefox、Edge 和 Safari 都有这个功能。
- en: From Firefox
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 Firefox
- en: You get the site shown with Firefox’s network tools. You then right-click on
    the specific request you want to repeat in the “Web Developer->Network” tool when
    you see the HTTP traffic, and in the menu that appears you select “Copy as cURL”.
    Like this screenshot below shows. The operation then generates a curl command
    line to your clipboard and you can then paste that into your favorite shell window.
    This feature is available by default in all Firefox installations.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 Firefox 的网络工具查看显示的网站。当您看到 HTTP 流量时，在“Web Developer->Network”工具中右键单击您想要重复的特定请求，然后在出现的菜单中选择“Copy
    as cURL”。如下面的截图所示。此操作将在您的剪贴板中生成一个 curl 命令行，然后您可以将它粘贴到您喜欢的 shell 窗口中。此功能在所有 Firefox
    安装中默认可用。
- en: '![](../media/file5.png)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file5.png)'
- en: copy as curl with Firefox
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Firefox 的 copy as curl
- en: From Chrome and Edge
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 Chrome 和 Edge
- en: 'When you pop up the More tools->Developer mode in Chrome or Edge, and you select
    the Network tab you see the HTTP traffic used to get the resources of the site.
    On the line of the specific resource you are interested in, you right-click with
    the mouse and you select “Copy as cURL” and it generates a command line for you
    in your clipboard. Paste that in a shell to get a curl command line that makes
    the transfer. This feature is available by default in all Chrome and Chromium
    installations. *(Note: Chromium browsers in Windows may generate an incorrect
    command line that is misquoted due to a* [*bug*](https://bugs.chromium.org/p/chromium/issues/detail?id=1242803)
    *in Chromium).*'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在 Chrome 或 Edge 中弹出 More tools->Developer mode 并选择网络标签页时，您可以看到用于获取网站资源的 HTTP
    流量。在您感兴趣的特定资源行上，您用鼠标右键单击并选择“Copy as cURL”，它将在您的剪贴板中为您生成一个命令行。将此粘贴到 shell 中以获取一个执行传输的
    curl 命令行。此功能在所有 Chrome 和 Chromium 安装中默认可用。*(注意：Windows 中的 Chromium 浏览器可能会由于 Chromium
    中的一个 *[bug*](https://bugs.chromium.org/p/chromium/issues/detail?id=1242803) *而产生一个不正确的命令行，该命令行由于引号错误而出现错误)。*
- en: '![](../media/file6.png)'
  id: totrans-9
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file6.png)'
- en: copy as curl with Chrome
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Chrome 的 copy as curl
- en: From Safari
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 Safari
- en: In Safari, the “development” menu is not visible until you go into **preferences->Advanced**
    and enable it. But once you have done that, you can select **Show web inspector**
    in that development menu and get to see a new console pop up that is similar to
    the development tools of Firefox and Chrome.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Safari 中，直到您进入 **preferences->Advanced** 并启用它之前，“开发”菜单是不可见的。但一旦您这样做了，您可以在开发菜单中选择
    **Show web inspector**，然后您可以看到一个弹出的新控制台，它与 Firefox 和 Chrome 的开发工具类似。
- en: Select the network tab, reload the webpage and then you can right click the
    particular resources that you want to fetch with curl, as if you did it with Safari..
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 选择网络标签页，重新加载网页，然后您可以对您想要使用 curl 获取的特定资源右键单击，就像您在 Safari 中那样。
- en: '![](../media/file7.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file7.png)'
- en: copy as curl with Safari
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Safari 的 copy as curl
- en: On Firefox, without using the devtools
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Firefox 中，不使用开发者工具
- en: 'If this is something you would like to get done more often, you probably find
    using the developer tools a bit inconvenient and cumbersome to pop up just to
    get the command line copied. Then [cliget](https://addons.mozilla.org/en-US/firefox/addon/cliget/)
    is the perfect add-on for you as it gives you a new option in the right-click
    menu, so you can get a quick command line generated really quickly, like this
    example when I right-click an image in Firefox:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您经常需要这样做，您可能会觉得使用开发者工具有点不方便，而且弹出以复制命令行有些繁琐。那么 [cliget](https://addons.mozilla.org/en-US/firefox/addon/cliget/)
    就是您完美的插件，因为它在右键菜单中提供了一个新选项，这样您可以快速生成命令行，就像以下示例中我在 Firefox 中右键单击一个图片时那样：
- en: '![](../media/file8.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file8.png)'
- en: cliget with Firefox
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Firefox 的 cliget
- en: Not perfect
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 不完美
- en: These methods all give you a command line to reproduce their HTTP transfers.
    They are often not the perfect solution to your problems. Why? Well mostly because
    these tools are written to rerun the *exact* same request that you copied, while
    you often want to rerun the same logic but not send an exact copy of the same
    cookies and file contents etc.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这些方法都为你提供了一个命令行来重现它们的HTTP传输。它们通常不是解决你问题的完美方案。为什么？好吧，主要是因为这些工具是编写来重新运行你复制的**完全相同**的请求，而你通常想要重新运行相同的逻辑，但不需要发送完全相同的cookie和文件内容等。
- en: These tools give you command lines with static and fixed cookie contents to
    send in the request, because that is the contents of the cookies that were sent
    in the browser’s requests. You most likely want to rewrite the command line to
    dynamically adapt to whatever the content is in the cookie that the server told
    you in a previous response. Etc.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具为你提供了带有静态和固定cookie内容的命令行，用于发送请求，因为这就是浏览器请求中发送的cookie内容。你很可能会想要重写命令行，以便动态适应服务器在之前的响应中告诉你的cookie中的任何内容。等等。
- en: The copy as curl functionality is also often notoriously bad at using `-F` and
    instead they provide handcrafted `--data-binary` solutions including the mime
    separator strings etc.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 复制为卷曲功能在处理 `-F` 参数时也常常臭名昭著，它们通常会提供手工编写的 `--data-binary` 解决方案，包括 MIME 分隔符字符串等。
