- en: HTTP/2
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTTP/2
- en: curl supports HTTP/2 for both HTTP:// and HTTPS:// URLs assuming that curl was
    built with the proper prerequisites. It even defaults to using HTTP/2 when given
    an HTTPS URL since doing so implies no penalty and when curl is used with sites
    that do not support HTTP/2 the request instead negotiates HTTP/1.1.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 假设 curl 是用适当的先决条件构建的，curl 支持 HTTP/2 对于 HTTP:// 和 HTTPS:// URL。它甚至默认使用 HTTP/2，当提供一个
    HTTPS URL 时，因为这样做没有惩罚，并且当 curl 与不支持 HTTP/2 的网站一起使用时，请求会协商 HTTP/1.1。
- en: With HTTP:// URLs however, the upgrade to HTTP/2 is done with an `Upgrade:`
    header that may cause an extra round-trip and perhaps even more troublesome, a
    sizable share of old servers returns a 400 response when seeing such a header.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，对于 HTTP:// URL，升级到 HTTP/2 是通过一个 `Upgrade:` 报头完成的，这可能会导致额外的往返，甚至更麻烦的是，相当一部分旧服务器在看到这样的报头时会返回
    400 响应。
- en: It should also be noted that some (most?) servers that support HTTP/2 for `HTTP://`
    (which in itself is not all servers) do not acknowledge the `Upgrade:` header
    on POST, for example.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 还应注意的是，一些（大多数？）支持 HTTP/2 的 `HTTP://` 服务器（本身并不是所有服务器）不会在 POST 上承认 `Upgrade:`
    报头，例如。
- en: 'To ask a server to use HTTP/2, just:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 要让服务器使用 HTTP/2，只需：
- en: '[PRE0]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If your curl does not support HTTP/2, that command line tool returns an error
    saying so. Running `curl -V` shows if your version of curl supports it.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的 curl 不支持 HTTP/2，那么这个命令行工具会返回一个错误，说明不支持。运行 `curl -V` 可以显示你的 curl 版本是否支持它。
- en: If you by some chance already know that your server speaks HTTP/2 (for example,
    within your own controlled environment where you know exactly what runs in your
    machines) you can shortcut the HTTP/2 negotiation with `--http2-prior-knowledge`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你偶然知道你的服务器支持 HTTP/2（例如，在你自己的受控环境中，你知道你的机器上运行了什么），你可以通过 `--http2-prior-knowledge`
    来跳过 HTTP/2 的协商。
- en: Multiplexing
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 多路复用
- en: A primary feature in the HTTP/2 protocol, is the ability to multiplex several
    logical streams over the same physical connection. The curl command-line tool
    can take advantage of this feature when [doing parallel transfers](ch066.xhtml#cmdline__urls__parallel__md).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: HTTP/2 协议的一个主要特性是能够在相同的物理连接上多路复用多个逻辑流。curl 命令行工具可以利用这个特性，当[进行并行传输](ch066.xhtml#cmdline__urls__parallel__md)时。
