["```sh\n      !!\n!<event>\n!<string>\n!?<string>? \n\n```", "```sh\n      # Run a command\nls -la /home/user\n\n# Repeat the last command\n!!\n\n# Add sudo to the last command\nsudo !!\n\n# This is equivalent to:\nsudo ls -la /home/user \n\n```", "```sh\n      # Forgot sudo\napt update\n# Permission denied\n\n# Fix with sudo\nsudo !!\n# Executes: sudo apt update\n\n# Wrong directory\ncd /var/logs\n# No such file or directory\n\n# Fix the path\ncd /var/log\n# Then repeat with correct path\n!! \n\n```", "```sh\n      # !! - Last command\n!!\n\n# !n - Command number n\n!123\n\n# !-n - nth command back\n!-2    # Two commands ago\n!-5    # Five commands ago\n\n# !string - Most recent command starting with 'string'\n!ls    # Last command starting with 'ls'\n!git   # Last command starting with 'git'\n\n# !?string? - Most recent command containing 'string'\n!?config?   # Last command containing 'config'\n!?file?     # Last command containing 'file' \n\n```", "```sh\n      # Previous command: git commit -m \"Fix bug\" --amend# !^ - First argumentecho !^        # echo commit\n\n# !$ - Last argument\necho !$        # echo --amend\n\n# !* - All arguments\necho !*        # echo commit -m \"Fix bug\" --amend\n\n# !:n - nth argument (0-based)\necho !:0       # echo git\necho !:1       # echo commit\necho !:2       # echo -m\n\n# !:n-m - Range of arguments\necho !:1-3     # echo commit -m \"Fix bug\" \n\n```", "```sh\n      # Previous command: ls /home/user/documents/file.txt# :h - Remove trailing pathname component (head)echo !!:h      # echo /home/user/documents\n\n# :t - Remove leading pathname components (tail)\necho !!:t      # echo file.txt\n\n# :r - Remove trailing suffix\necho !!:r      # echo /home/user/documents/file\n\n# :e - Remove all but trailing suffix\necho !!:e      # echo txt\n\n# :s/old/new/ - Substitute first occurrence\n!!:s/user/admin/   # ls /home/admin/documents/file.txt\n\n# :gs/old/new/ - Global substitution\n!!:gs/o/0/         # ls /h0me/user/d0cuments/file.txt \n\n```", "```sh\n      # Typo in command\nct /etc/hosts\n# Command not found\n\n# Correct and re-run\ncat /etc/hosts\n\n# Then if you need to edit it\nsudo vi !!    # Becomes: sudo vi /etc/hosts \n\n```", "```sh\n      # Run command without verbose\ntar -czf backup.tar.gz /home/user\n\n# Add verbose flag\n!!:s/-czf/-czvf/\n# Becomes: tar -czvf backup.tar.gz /home/user\n\n# Or simpler approach\ntar -czvf backup.tar.gz /home/user \n\n```", "```sh\n      # Create file\ntouch /tmp/test_file.txt\n\n# Edit the same file\nvi !!:$     # vi /tmp/test_file.txt\n\n# Copy to different location\ncp !!:$ /home/user/\n# Becomes: cp /tmp/test_file.txt /home/user/\n\n# Previous command: find /var/log -name \"*.log\" -size +10M\n# Copy found files\ncp !!:3 !!:4 !!:5 /backup/\n# Using specific arguments from find command \n\n```", "```sh\n      # Change to a directorycd /usr/local/bin\n\n# List contents\nls !!:$     # ls /usr/local/bin\n\n# Go back and then to related directory\ncd /usr/local/src\n# ... later ...\ncd !!:h/bin    # cd /usr/local/bin \n\n```", "```sh\n      # Previous: rsync -av /home/user/docs/ backup@server:/backup/user/docs/# Change source directory\n!!:s/docs/pictures/\n# Becomes: rsync -av /home/user/pictures/ backup@server:/backup/user/docs/\n\n# Change both source and destination\n!!:s/docs/pictures/:s/user\\/docs/user\\/pictures/\n# Global changes\n!!:gs/docs/pictures/ \n\n```", "```sh\n      # Previous: find /var/log -name \"*.log\" -type f -exec ls -l {} \\;# Modify to use different action\n!!:s/-exec ls -l/-exec wc -l/\n# Count lines instead of listing\n\n# Extract just the find portion\n!:0-4    # find /var/log -name \"*.log\" -type f\n\n# Use arguments with different command\ngrep \"error\" !!:3  # grep \"error\" \"*.log\" \n\n```", "```sh\n      # Pipeline command\nps aux | grep apache | grep -v grep\n\n# Modify the grep pattern\n!!:s/apache/nginx/\n# Becomes: ps aux | grep nginx | grep -v grep\n\n# Extract just part of pipeline\n!:0-2     # ps aux | grep apache\n\n# Add to existing pipeline\n!! | wc -l    # Count the results \n\n```", "```sh\n      # Enable history verification (before execution)set +H    # Disable history expansion\nset -H    # Enable history expansion\n\n# Show command before execution\nshopt -s histverify\n# Now !! will show the command and wait for Enter \n\n```", "```sh\n      # Ctrl+R - Reverse search# Type to search through history# Ctrl+R again to find previous matches# Search for specific command\n!?git commit?    # Find last command containing \"git commit\"\n!?ssh?           # Find last command containing \"ssh\" \n\n```", "```sh\n      # History sizeexport HISTSIZE=1000        # Commands in memory\nexport HISTFILESIZE=2000    # Commands in file\n\n# History control\nexport HISTCONTROL=ignoreboth    # Ignore duplicates and spaces\nexport HISTCONTROL=ignoredups    # Ignore duplicates only\n\n# History ignore patterns\nexport HISTIGNORE=\"ls:cd:cd -:pwd:exit:date:* --help\"\n\n# Timestamp in history\nexport HISTTIMEFORMAT=\"%F %T \" \n\n```", "```sh\n      # Check if history expansion is enabledset +o | grep histexpand\n\n# Enable history expansion\nset -H\n# or\nset -o histexpand\n\n# Disable history expansion\nset +H\n# or\nset +o histexpand \n\n```", "```sh\n      # Enable command verificationshopt -s histverify\n\n# This makes !! show the command first, requiring Enter to execute\n\n# Check what command will be executed\nhistory | tail -1    # See last command\necho !!             # See what !! would execute (without running it) \n\n```", "```sh\n      # Be careful with destructive commands\nrm -rf /tmp/*\n# Don't blindly run !! after such commands\n\n# Use history to verify\nhistory | tail -5    # Check recent commands\n\n# For critical operations, type commands fully\n# Don't rely on history expansion for:\n# - rm commands\n# - chmod commands\n# - System configuration changes \n\n```", "```sh\n      # See history expansion in actionset -x    # Enable command tracing\n!!        # You'll see the expanded command\nset +x    # Disable tracing\n\n# Check history before using\nhistory 10    # Show last 10 commands\n!-2           # Run 2nd to last command \n\n```", "```sh\n      # Add sudo to last command\nsudo !!\n\n# Redirect last command output\n!! > output.txt\n!! 2>&1 | tee log.txt\n\n# Background last command\n!! &\n\n# Time last command\ntime !!\n\n# Run last command in different directory\n(cd /tmp && !!) \n\n```", "```sh\n      # Previous: vi /etc/apache2/sites-available/default# Test the configuration\napache2ctl -t\n\n# Copy the file\ncp !!:$ !!:$:r.backup    # cp /etc/apache2/sites-available/default /etc/apache2/sites-available/default.backup\n\n# Edit related file\nvi !!:h/sites-enabled/default    # vi /etc/apache2/sites-enabled/default \n\n```", "```sh\n      # Check service status\nsystemctl status apache2\n\n# Restart if needed\nsudo !!:s/status/restart/    # sudo systemctl restart apache2\n\n# Check multiple services\nsystemctl status nginx\n!!:s/nginx/mysql/           # systemctl status mysql\n!!:s/mysql/postgresql/      # systemctl status postgresql \n\n```", "```sh\n      #!/bin/bash# Note: History expansion doesn't work in scripts by default# Enable it explicitly if neededset -H    # Enable history expansion in script\n\n# Use variables instead of history expansion in scripts\nlast_command=\"$1\"\necho \"Re-running: $last_command\"\neval \"$last_command\" \n\n```", "```sh\n      #!/bin/bash# Interactive script using history conceptswhile true; do\n    read -p \"Command: \" cmd\n\n    if [ \"$cmd\" = \"!!\" ]; then\n        echo \"Re-running: $last_cmd\"\n        eval \"$last_cmd\"\n    elif [ \"$cmd\" = \"exit\" ]; then\n        break\n    else\n        eval \"$cmd\"\n        last_cmd=\"$cmd\"\n    fi\ndone \n\n```", "```sh\n      # Edit last command in editorfc# Edit specific command numberfc 123\n\n# List recent commands\nfc -l\n\n# Re-run range of commands\nfc -s 100 105 \n\n```", "```sh\n      # Show command historyhistory# Show last 10 commandshistory 10\n\n# Execute specific command number\n!123\n\n# Search and execute\nhistory | grep git\n!456 \n\n```", "```sh\n      # Check if enabledset +o | grep histexpand\n\n# Enable it\nset -H\n\n# Check in current shell\necho $-    # Should contain 'H' \n\n```", "```sh\n      # Escape ! to prevent expansionecho \"The price is \\$5\\!\"\n\n# Use single quotes\necho 'The price is $5!'\n\n# Disable temporarily\nset +H\necho \"Commands with ! work normally\"\nset -H \n\n```", "```sh\n      # For very complex commands, use variables\ncomplex_cmd=\"find /var/log -name '*.log' -exec grep 'error' {} \\;\"\neval \"$complex_cmd\"\n\n# Then modify variable instead of using history expansion\ncomplex_cmd=\"${complex_cmd/error/warning}\"\neval \"$complex_cmd\" \n\n```"]