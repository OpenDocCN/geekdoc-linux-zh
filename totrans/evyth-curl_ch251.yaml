- en: Cookies
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: By default and by design, libcurl makes transfers as basic as possible and features
    need to be enabled to get used. One such feature is HTTP cookies, more known as
    just plain and simply cookies.
  prefs: []
  type: TYPE_NORMAL
- en: Cookies are name/value pairs sent by the server (using a `Set-Cookie:` header)
    to be stored in the client, and are then supposed to get sent back again in requests
    that matches the host and path requirements that were specified along with the
    cookie when it came from the server (using the `Cookie:` header). On the modern
    web of today, sites are known to sometimes use large numbers of cookies.
  prefs: []
  type: TYPE_NORMAL
- en: Cookie engine
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you enable the cookie engine for a specific easy handle, it means that
    it records incoming cookies, stores them in the in-memory cookie store that is
    associated with the easy handle and subsequently sends the proper ones back if
    an HTTP request is made that matches.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are two ways to switch on the cookie engine:'
  prefs: []
  type: TYPE_NORMAL
- en: Enable cookie engine with reading
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Ask libcurl to import cookies into the easy handle from a given filename with
    the `CURLOPT_COOKIEFILE` option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: A common trick is to just specify a non-existing filename or plain `""` to have
    it just activate the cookie engine with a blank cookie store to start with.
  prefs: []
  type: TYPE_NORMAL
- en: This option can be set multiple times and then each of the given files are read.
  prefs: []
  type: TYPE_NORMAL
- en: Enable cookie engine with writing
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Ask for received cookies to get stored in a file with the `CURLOPT_COOKIEJAR`
    option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: when the easy handle is closed later with `curl_easy_cleanup()`, all known cookies
    are stored in the given file. The file format is the well-known Netscape cookie
    file format that browsers also once used.
  prefs: []
  type: TYPE_NORMAL
- en: Setting custom cookies
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'A simpler and more direct way to just pass on a set of specific cookies in
    a request that does not add any cookies to the cookie store and does not even
    activate the cookie engine, is to set the set with `CURLOPT_COOKIE`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: The string you set there is the raw string that would be sent in the HTTP request
    and should be in the format of repeated sequences of `NAME=VALUE;` - including
    the semicolon separator.
  prefs: []
  type: TYPE_NORMAL
- en: Import export
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The cookie in-memory store can hold a bunch of cookies, and libcurl offers very
    powerful ways for an application to play with them. You can set new cookies, you
    can replace an existing cookie and you can extract existing cookies.
  prefs: []
  type: TYPE_NORMAL
- en: Add a cookie to the cookie store
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Add a new cookie to the cookie store by simply passing it into curl with `CURLOPT_COOKIELIST`
    with a new cookie. The format of the input is a single line in the cookie file
    format, or formatted as a `Set-Cookie:` response header, but we recommend the
    cookie file style:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: If that given cookie would match an already existing cookie (with the same domain
    and path, etc.), it would overwrite the old one with the new contents.
  prefs: []
  type: TYPE_NORMAL
- en: Get all cookies from the cookie store
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Sometimes writing the cookie file when you close the handle is not enough and
    then your application can opt to extract all the currently known cookies from
    the store like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: This returns a pointer to a linked list of cookies, and each cookie is (again)
    specified as a single line of the cookie file format. The list is allocated for
    you, so do not forget to call `curl_slist_free_all` when the application is done
    with the information.
  prefs: []
  type: TYPE_NORMAL
- en: Cookie store commands
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'If setting and extracting cookies is not enough, you can also interfere with
    the cookie store in more ways:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Wipe the entire in-memory storage clean with:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Erase all session cookies (cookies without expiry date) from memory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Force a write of all cookies to the filename previously specified with `CURLOPT_COOKIEJAR`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Force a reload of cookies from the filename previously specified with `CURLOPT_COOKIEFILE`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Cookie file format
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The cookie file format is text based and stores one cookie per line. Lines that
    start with `#` are treated as comments.
  prefs: []
  type: TYPE_NORMAL
- en: Each line that each specifies a single cookie consists of seven text fields
    separated with TAB characters.
  prefs: []
  type: TYPE_NORMAL
- en: '| Field | Example | Meaning |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| 0 | example.com | Domain name |'
  prefs: []
  type: TYPE_TB
- en: '| 1 | FALSE | Include subdomains boolean |'
  prefs: []
  type: TYPE_TB
- en: '| 2 | /foobar/ | Path |'
  prefs: []
  type: TYPE_TB
- en: '| 3 | FALSE | Set over a secure transport |'
  prefs: []
  type: TYPE_TB
- en: '| 4 | 1462299217 | Expires at â€“ seconds since Jan 1st 1970, or 0 |'
  prefs: []
  type: TYPE_TB
- en: '| 5 | person | Name of the cookie |'
  prefs: []
  type: TYPE_TB
- en: '| 6 | daniel | Value of the cookie |'
  prefs: []
  type: TYPE_TB
