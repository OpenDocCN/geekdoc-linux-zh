- en: Authentication
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 身份验证
- en: Each HTTP request can be made authenticated. If a server or a proxy want the
    user to provide proof that they have the correct credentials to access a URL or
    perform an action, it can send an HTTP response code that informs the client that
    it needs to provide a correct HTTP authentication header in the request to be
    allowed.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 每个 HTTP 请求都可以进行身份验证。如果服务器或代理希望用户提供证明他们拥有访问 URL 或执行操作的正确凭据，它可以发送一个 HTTP 响应代码，告知客户端它需要提供一个正确的
    HTTP 身份验证报头才能允许请求。
- en: A server that requires authentication sends back a 401 response code and an
    associated `WWW-Authenticate:` header that lists all the authentication methods
    that the server supports.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 需要身份验证的服务器会返回一个 401 响应代码，并附带一个 `WWW-Authenticate:` 报头，其中列出了服务器支持的所有身份验证方法。
- en: An HTTP proxy that requires authentication sends back a 407 response code and
    an associated `Proxy-Authenticate:` header that lists all the authentication methods
    that the proxy supports.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 需要身份验证的 HTTP 代理会返回一个 407 响应代码，并附带一个 `Proxy-Authenticate:` 报头，其中列出了代理支持的所有身份验证方法。
- en: It might be worth to note that most websites of today do not require HTTP authentication
    for login etc, but they instead ask users to login on webpages and then the browser
    issues a POST with the user and password etc, and then subsequently maintain cookies
    for the session.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，如今的大多数网站在登录等操作中不需要 HTTP 身份验证，而是要求用户在网页上登录，然后浏览器发出包含用户名和密码等的 POST 请求，并随后维护会话的
    cookies。
- en: 'To tell curl to do an authenticated HTTP request, you use the `-u, --user`
    option to provide username and password (separated with a colon). Like this:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 要让 curl 执行身份验证的 HTTP 请求，您可以使用 `-u, --user` 选项提供用户名和密码（用冒号分隔）。例如：
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This makes curl use the default *Basic* HTTP authentication method. Yes, it
    is actually called Basic and it is truly basic. To explicitly ask for the basic
    method, use `--basic`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这使得 curl 使用默认的 *基本* HTTP 身份验证方法。是的，它实际上被称为基本，并且确实是基本的。要显式请求基本方法，请使用 `--basic`。
- en: The Basic authentication method sends the username and password in clear text
    over the network (base64 encoded) and should be avoided for HTTP transport.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 基本身份验证方法会将用户名和密码以明文形式（base64 编码）通过网络发送，应避免用于 HTTP 传输。
- en: When asking to do an HTTP transfer using a single (specified or implied), authentication
    method, curl inserts the authentication header already in the first request on
    the wire.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 当请求使用单一（指定或隐含）的身份验证方法进行 HTTP 传输时，curl 会将身份验证报头插入到第一个网络请求中。
- en: 'If you would rather have curl first *test* if the authentication is really
    required, you can ask curl to figure that out and then automatically use the most
    safe method it knows about with `--anyauth`. This makes curl try the request unauthenticated,
    and then switch over to authentication if necessary:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望 curl 首先测试身份验证是否真的需要，您可以请求 curl 查找并自动使用它所知道的最高安全方法，使用 `--anyauth`。这使得 curl
    尝试未认证的请求，并在必要时切换到身份验证：
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'and the same concept works for HTTP operations that may require authentication:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 同样的概念也适用于可能需要身份验证的 HTTP 操作：
- en: '[PRE2]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'curl typically (a little depending on how it was built) speaks several other
    authentication methods as well, including Digest, Negotiate and NTLM. You can
    ask for those methods too specifically:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: curl 通常（根据其构建方式略有不同）还支持几种其他身份验证方法，包括摘要（Digest）、协商（Negotiate）和 NTLM。您也可以明确请求这些方法：
- en: '[PRE3]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
