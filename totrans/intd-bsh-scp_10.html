<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>Bash Conditionals</h1>
    <p>In the last section, we covered some of the most popular conditional expressions. We can now use them with standard conditional statements like <code>if</code>, <code>if-else</code> and <code>switch case</code> statements.</p>
    <h2>If statement</h2>
    <p>The format of an <code>if</code> statement in Bash is as follows:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-keyword">if</span> [[ some_test ]]
<span class="hljs-keyword">then</span>
    &lt;commands&gt;
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <p>Here is a quick example which would ask you to enter your name in case that you've left it empty:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span><span class="hljs-comment"># Bash if statement example</span><span class="hljs-built_in">read</span> -p <span class="hljs-string">"What is your name? "</span> name

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">${name}</span> ]]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Please enter your name!"</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <h2>If Else statement</h2>
    <p>With an <code>if-else</code> statement, you can specify an action in case that the condition in the <code>if</code> statement does not match. We can combine this with the conditional expressions from the previous section as follows:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span><span class="hljs-comment"># Bash if statement example</span><span class="hljs-built_in">read</span> -p <span class="hljs-string">"What is your name? "</span> name

<span class="hljs-keyword">if</span> [[ -z <span class="hljs-variable">${name}</span> ]]
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Please enter your name!"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Hi there <span class="hljs-variable">${name}</span>"</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <p>You can use the above if statement with all of the conditional expressions from the previous chapters:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span>
admin=<span class="hljs-string">"devdojo"</span>

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"Enter your username? "</span> username

<span class="hljs-comment"># Check if the username provided is the admin</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">${username}</span>"</span> == <span class="hljs-string">"<span class="hljs-variable">${admin}</span>"</span> ]] ; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"You are the admin user!"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"You are NOT the admin user!"</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <p>Here is another example of an <code>if</code> statement which would check your current <code>User ID</code> and would not allow you to run the script as the <code>root</code> user:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span><span class="hljs-keyword">if</span> (( <span class="hljs-variable">$EUID</span> == 0 )); <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Please do not run as root"</span>
    <span class="hljs-built_in">exit</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <p>If you put this on top of your script it would exit in case that the EUID is 0 and would not execute the rest of the script. This was discussed on <a href="https://www.digitalocean.com/community/questions/how-to-check-if-running-as-root-in-a-bash-script">the DigitalOcean community forum</a>.</p>
    <p>You can also test multiple conditions with an <code>if</code> statement. In this example we want to make sure that the user is neither the admin user nor the root user to ensure the script is incapable of causing too much damage. We'll use the <code>or</code> operator in this example, noted by <code>||</code>. This means that either of the conditions needs to be true. If we used the <code>and</code> operator of <code>&amp;&amp;</code> then both conditions would need to be true.</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span>
admin=<span class="hljs-string">"devdojo"</span>

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"Enter your username? "</span> username

<span class="hljs-comment"># Check if the username provided is the admin</span>

<span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">${username}</span>"</span> != <span class="hljs-string">"<span class="hljs-variable">${admin}</span>"</span> ]] &amp;&amp; [[ <span class="hljs-variable">$EUID</span> != 0 ]] ; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"You are not the admin or root user, but please be safe!"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"You are the admin user! This could be very destructive!"</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <p>If you have multiple conditions and scenarios, then can use <code>elif</code> statement with <code>if</code> and <code>else</code> statements.</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span><span class="hljs-built_in">read</span> -p <span class="hljs-string">"Enter a number: "</span> num

<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$num</span> -gt 0 ]] ; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"The number is positive"</span>
<span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$num</span> -lt 0 ]] ; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"The number is negative"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"The number is 0"</span>
<span class="hljs-keyword">fi</span>
</code>
    </pre>
    <h2>Switch case statements</h2>
    <p>As in other programming languages, you can use a <code>case</code> statement to simplify complex conditionals when there are multiple different choices. So rather than using a few <code>if</code>, and <code>if-else</code> statements, you could use a single <code>case</code> statement.</p>
    <p>The Bash <code>case</code> statement syntax looks like this:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-keyword">case</span> <span class="hljs-variable">$some_variable</span> <span class="hljs-keyword">in</span>

  pattern_1)
    commands
    ;;

  pattern_2| pattern_3)
    commands
    ;;

  *)
    default commands
    ;;
<span class="hljs-keyword">esac</span>
</code>
    </pre>
    <p>A quick rundown of the structure:</p>
    <ul>
      <li>All <code>case</code> statements start with the <code>case</code> keyword.</li>
      <li>On the same line as the <code>case</code> keyword, you need to specify a variable or an expression followed by the <code>in</code> keyword.</li>
      <li>After that, you have your <code>case</code> patterns, where you need to use <code>)</code>  to identify the end of the pattern.</li>
      <li>You can specify multiple patterns divided by a pipe: <code>|</code>.</li>
      <li>After the pattern, you specify the commands that you would like to be executed in case that the pattern matches the variable or the expression that you've specified.</li>
      <li>All clauses have to be terminated by adding <code>;;</code> at the end.</li>
      <li>You can have a default statement by adding a <code>*</code> as the pattern.</li>
      <li>To close the <code>case</code> statement, use the <code>esac</code> (case typed backwards) keyword.</li>
    </ul>
    <p>Here is an example of a Bash <code>case</code> statement:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-meta">#!/bin/bash
</span><span class="hljs-built_in">read</span> -p <span class="hljs-string">"Enter the name of your car brand: "</span> car

<span class="hljs-keyword">case</span> <span class="hljs-variable">$car</span> <span class="hljs-keyword">in</span>

  Tesla)
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${car}</span>'s car factory is in the USA."</span>
    ;;

  BMW | Mercedes | Audi | Porsche)
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${car}</span>'s car factory is in Germany."</span>
    ;;

  Toyota | Mazda | Mitsubishi | Subaru)
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${car}</span>'s car factory is in Japan."</span>
    ;;

  *)
    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">"<span class="hljs-variable">${car}</span> is an unknown car brand"</span>
    ;;

<span class="hljs-keyword">esac</span>
</code>
    </pre>
    <p>With this script, we are asking the user to input a name of a car brand like Telsa, BMW, Mercedes and etc.</p>
    <p>Then with a <code>case</code> statement, we check the brand name and if it matches any of our patterns, and if so, we print out the factory's location.</p>
    <p>If the brand name does not match any of our <code>case</code> statements, we print out a default message: <code>an unknown car brand</code>.</p>
    <h2>Conclusion</h2>
    <p>I would advise you to try and modify the script and play with it a bit so that you could practice what you've just learned in the last two chapters!</p>
    <p>For more examples of Bash <code>case</code> statements, make sure to check chapter 16, where we would create an interactive menu in Bash using a <code>cases</code> statement to process the user input.</p>
  </body></html>