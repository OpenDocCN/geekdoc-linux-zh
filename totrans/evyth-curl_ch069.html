<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch069.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="cmdline__globbing__md-_-_-url-globbing" class="level1" data-number="68">
<h1 data-number="68">URL globbing</h1>
<p>At times you want to get a range of URLs that are mostly the same, with only a small portion of it changing between the requests. Maybe it is a numeric range or maybe a set of names. curl offers “globbing” as a way to specify many URLs like that easily.</p>
<p>The globbing uses the reserved symbols [] and {} for this, symbols that normally cannot be part of a legal URL (except for numerical IPv6 addresses but curl handles them fine anyway). If the globbing gets in your way, disable it with <code>-g, --globoff</code>.</p>
<p>When using [] or {} sequences when invoked from a command line prompt, you probably have to put the full URL within double quotes to avoid the shell from interfering with it. This also goes for other characters treated special, like for example ‘&amp;’, ‘?’ and ’*’.</p>
<p>While most transfer related functionality in curl is provided by the libcurl library, the URL globbing feature is not.</p>
<section id="cmdline__globbing__md-_-_-numerical-ranges" class="level2" data-number="68.1">
<h2 data-number="68.1">Numerical ranges</h2>
<p>You can ask for a numerical range with [N-M] syntax, where N is the start index and it goes up to and including M. For example, you can ask for 100 images one by one that are named numerically:</p>
<pre><code>curl -O &quot;http://example.com/[1-100].png&quot;</code></pre>
<p>and it can even do the ranges with zero prefixes, like if the number is three digits all the time:</p>
<pre><code>curl -O &quot;http://example.com/[001-100].png&quot;</code></pre>
<p>Or maybe you only want even-numbered images so you tell curl a step counter too. This example range goes from 0 to 100 with an increment of 2:</p>
<pre><code>curl -O &quot;http://example.com/[0-100:2].png&quot;</code></pre>
</section>
<section id="cmdline__globbing__md-_-_-alphabetical-ranges" class="level2" data-number="68.2">
<h2 data-number="68.2">Alphabetical ranges</h2>
<p>curl can also do alphabetical ranges, like when a site has sections named a to z:</p>
<pre><code>curl -O &quot;http://example.com/section[a-z].html&quot;</code></pre>
</section>
<section id="cmdline__globbing__md-_-_-list" class="level2" data-number="68.3">
<h2 data-number="68.3">List</h2>
<p>Sometimes the parts do not follow such an easy pattern, and then you can instead give the full list yourself but then within the curly braces instead of the brackets used for the ranges:</p>
<pre><code>curl -O &quot;http://example.com/{one,two,three,alpha,beta}.html&quot;</code></pre>
</section>
<section id="cmdline__globbing__md-_-_-combinations" class="level2" data-number="68.4">
<h2 data-number="68.4">Combinations</h2>
<p>You can use several globs in the same URL which then makes curl iterate over those, too. To download the images of Ben, Alice and Frank, in both the resolutions 100 x 100 and 1000 x 1000, a command line could look like:</p>
<pre><code>curl -O &quot;http://example.com/{Ben,Alice,Frank}-{100x100,1000x1000}.jpg&quot;</code></pre>
<p>Or download all the images of a chess board, indexed by two coordinates ranged 0 to 7:</p>
<pre><code>curl -O &quot;http://example.com/chess-[0-7]x[0-7].jpg&quot;</code></pre>
<p>And you can, of course, mix ranges and series. Get a week’s worth of logs for both the web server and the mail server:</p>
<pre><code>curl -O &quot;http://example.com/{web,mail}-log[0-6].txt&quot;</code></pre>
</section>
<section id="cmdline__globbing__md-_-_-output-variables-for-globbing" class="level2" data-number="68.5">
<h2 data-number="68.5">Output variables for globbing</h2>
<p>In all the globbing examples previously in this chapter we have selected to use the <code>-O / --remote-name</code> option, which makes curl save the target file using the filename part of the used URL.</p>
<p>Sometimes that is not enough. You are downloading multiple files and maybe you want to save them in a different subdirectory or create the saved filenames differently. curl, of course, has a solution for these situations as well: output filename variables.</p>
<p>Each “glob” used in a URL gets a separate variable. They are referenced as <code>#[num]</code> - that means the single character <code>#</code> followed by the glob number which starts with 1 for the first glob and ends with the last glob.</p>
<p>Save the main pages of two different sites:</p>
<pre><code>curl &quot;http://{one,two}.example.com&quot; -o &quot;file_#1.txt&quot;</code></pre>
<p>Save the outputs from a command line with two globs in a subdirectory:</p>
<pre><code>curl &quot;http://{site,host}.host[1-5].example.com&quot; -o &quot;subdir/#1_#2&quot;</code></pre>
</section>
<section id="cmdline__globbing__md-_-_-using------in-urls" class="level2" data-number="68.6">
<h2 data-number="68.6">Using <code>[]{}</code> in URLs</h2>
<p>When the globbing concept was introduced in curl in the 1990s, we all used the same Internet standard for how the URL syntax was defined, and in this standard these four symbols are documented as <em>reserved</em>. You had to URL-encode them in the URL if you wanted to use them (<code>%HH</code> style). Those symbols were therefore not used in URLs and were downright attractive to use for globbing purposes.</p>
<p>Later on, the URL syntax has gradually been relaxed and changed and these days every now and then we see URLs used where one of the four symbols <code>[]{}</code> are used as-is, without being URL-encoded. Passing such a URL to curl causes it to spew out syntax errors when the glob parser goes crazy.</p>
<p>To work around that problem, you have two separate options. You either encode the symbols yourself, or you switch off globbing.</p>
<p>Encode the symbols like this:</p>
<table>
<thead>
<tr class="header">
<th>symbol</th>
<th>encoding</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[</code></td>
<td><code>%5b</code></td>
</tr>
<tr class="even">
<td><code>]</code></td>
<td><code>%5d</code></td>
</tr>
<tr class="odd">
<td><code>{</code></td>
<td><code>%7b</code></td>
</tr>
<tr class="even">
<td><code>}</code></td>
<td><code>%7d</code></td>
</tr>
</tbody>
</table>
<p>Or switch off globbing with <code>-g</code> or <code>--globoff</code>.</p>
<p><span id="cmdline__listopts__md"></span></p>
</section>
</section>
</body>
</html>
