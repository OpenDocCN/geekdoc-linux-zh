<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch117.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="usingcurl__proxies__socks__md-_-_-socks-proxy" class="level1" data-number="116">
<h1 data-number="116">SOCKS proxy</h1>
<p>SOCKS is a protocol used for proxies and curl supports it. curl supports both SOCKS version 4 as well as version 5, and both versions come in two flavors.</p>
<p>You can select the specific SOCKS version to use by using the correct scheme part for the given proxy host with <code>-x</code>, or you can specify it with a separate option instead of <code>-x</code>.</p>
<p>SOCKS4 is for the version 4 but curl resolves the name:</p>
<pre><code>curl -x socks4://proxy.example.com http://www.example.com/

curl --socks4 proxy.example.com http://www.example.com/</code></pre>
<p>SOCKS4a is for the version 4 with resolving done by the proxy:</p>
<pre><code>curl -x socks4a://proxy.example.com http://www.example.com/

curl --socks4a proxy.example.com http://www.example.com/</code></pre>
<p>SOCKS5 is for the version 5 and SOCKS5-hostname is for the version 5 without resolving the hostname locally:</p>
<pre><code>curl -x socks5://proxy.example.com http://www.example.com/

curl --socks5 proxy.example.com http://www.example.com/</code></pre>
<p>The SOCKS5-hostname versions. This sends the hostname to the proxy so there is no name resolving done by curl locally:</p>
<pre><code>curl -x socks5h://proxy.example.com http://www.example.com/

curl --socks5-hostname proxy.example.com http://www.example.com/</code></pre>
<p>Helpful table to figure how which side that resolves the name for which socks version:</p>
<table>
<thead>
<tr class="header">
<th>SOCKS</th>
<th>who resolves the name</th>
<th>works with IPv6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>4</td>
<td>curl</td>
<td>no</td>
</tr>
<tr class="even">
<td>4a</td>
<td>proxy</td>
<td>no</td>
</tr>
<tr class="odd">
<td>5</td>
<td>curl</td>
<td>yes</td>
</tr>
<tr class="even">
<td>5h</td>
<td>proxy</td>
<td>yes</td>
</tr>
</tbody>
</table>
<p><span id="usingcurl__proxies__mitm__md"></span></p>
</section>
</body>
</html>
