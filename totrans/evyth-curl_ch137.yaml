- en: Sending email
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Sending email with curl is done with the SMTP protocol. SMTP stands for [Simple
    Mail Transfer Protocol](https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol).
  prefs: []
  type: TYPE_NORMAL
- en: curl supports sending data to an SMTP server, which combined with the right
    set of command line options makes an email get sent to a set of receivers of your
    choice.
  prefs: []
  type: TYPE_NORMAL
- en: When sending SMTP with curl, there are two necessary command line options that
    **must** be used.
  prefs: []
  type: TYPE_NORMAL
- en: You need to tell the server at least one recipient with `--mail-rcpt`. You can
    use this option several times and then curl tells the server that all those email
    addresses should receive the email.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You need to tell the server which email address that is the sender of the email
    with `--mail-from`. It is important to realize that this email address is not
    necessarily the same as is shown in the `From:` line of the email text.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Then, you need to provide the actual email data. This is a (text) file formatted
    according to [RFC 5322](https://tools.ietf.org/html/rfc5322.html). It is a set
    of headers and a body. Both the headers and the body need to be correctly encoded.
    The headers typically include `To:`, `From:`, `Subject:`, `Date:` etc.
  prefs: []
  type: TYPE_NORMAL
- en: 'A basic command to send an email:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'An example `email.txt` could look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Secure mail transfer
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Some mail providers allow or require using SSL for SMTP. They may use a dedicated
    port for SSL or allow SSL upgrading over a clear-text connection.
  prefs: []
  type: TYPE_NORMAL
- en: If your mail provider has a dedicated SSL port you can use smtps:// instead
    of smtp://, which uses the SMTP SSL port of 465 by default and requires the entire
    connection to be SSL. For example smtps://smtp.gmail.com/.
  prefs: []
  type: TYPE_NORMAL
- en: 'However, if your provider allows upgrading from clear-text to secure transfers
    you can use one of these options:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'You can tell curl to *try* but not require upgrading to secure transfers by
    adding `--ssl` to the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'You can tell curl to *require* upgrading to using secure transfers by adding
    `--ssl-reqd` to the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: The SMTP URL
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The path part of a SMTP request specifies the hostname to present during communication
    with the mail server. If the path is omitted then curl attempts to figure out
    the local computer’s hostname and use that. However, this may not return the fully
    qualified domain name that is required by some mail servers and specifying this
    path allows you to set an alternative name, such as your machine’s fully qualified
    domain name, which you might have obtained from an external function such as gethostname
    or getaddrinfo.
  prefs: []
  type: TYPE_NORMAL
- en: 'To connect to the mail server at `mail.example.com` and send your local computer’s
    hostname in the `HELO` or `EHLO` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: You can of course as always use the `-v` option to get to see the client-server
    communication.
  prefs: []
  type: TYPE_NORMAL
- en: 'To instead have curl send `client.example.com` in the `HELO` / `EHLO` command
    to the mail server at `mail.example.com`, use:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: No MX lookup!
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When you send email with an ordinary mail client, it first checks for an MX
    record for the particular domain you want to send email to. If you send an email
    to `joe@example.com`, the client gets the MX records for `example.com` to learn
    which mail server(s) to use when sending email to example.com users.
  prefs: []
  type: TYPE_NORMAL
- en: curl does no MX lookups by itself. If you want to figure out which server to
    send an email to for a particular domain, we recommend you figure that out first
    and then call curl to use those servers. Useful command line tools to get MX records
    include ‘dig’ and ‘nslookup’.
  prefs: []
  type: TYPE_NORMAL
