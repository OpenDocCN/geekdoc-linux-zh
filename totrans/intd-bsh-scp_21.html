<html><head></head><body>
    <div style="page-break-after: always;"/>
    <h1>Sending emails with Bash and SSMTP</h1>
    <p>SSMTP is a tool that delivers emails from a computer or a server to a configured mail host.</p>
    <p>SSMTP is not an email server itself and does not receive emails or manage a queue.</p>
    <p>One of its primary uses is for forwarding automated email (like system alerts) off your machine and to an external email address.</p>
    <h2>Prerequisites</h2>
    <p>You would need the following things in order to be able to complete this tutorial successfully:</p>
    <ul>
      <li>
        <p>Access to an Ubuntu 18.04 server as a non-root user with sudo privileges and an active firewall installed on your server. To set these up, please refer to our <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">Initial Server Setup Guide for Ubuntu 18.04</a></p>
      </li>
      <li>
        <p>An SMTP server along with SMTP username and password, this would also work with Gmail's SMTP server, or you could set up your own SMTP server by following the steps from this tutorial on <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-16-04">How to Install and Configure Postfix as a Send-Only SMTP Server on Ubuntu 16.04</a></p>
      </li>
    </ul>
    <h2>Installing SSMTP</h2>
    <p>In order to install SSMTP, you’ll need to first update your apt cache with:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">sudo apt update
</code>
    </pre>
    <p>Then run the following command to install SSMTP:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">sudo apt install ssmtp
</code>
    </pre>
    <p>Another thing that you would need to install is <code>mailutils</code>, to do that run the following command:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">sudo apt install mailutils
</code>
    </pre>
    <h2>Configuring SSMTP</h2>
    <p>Now that you have <code>ssmtp</code> installed, in order to configure it to use your SMTP server when sending emails, you need to edit the SSMTP configuration file.</p>
    <p>Using your favourite text editor to open the <code>/etc/ssmtp/ssmtp.conf</code> file:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">sudo nano /etc/ssmtp/ssmtp.conf
</code>
    </pre>
    <p>You need to include your SMTP configuration:</p>
    <pre>
      <code class="language-xml hljs xml" data-lang="xml">root=postmaster
mailhub=<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>your_smtp_host.com<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>:587
hostname=<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>your_hostname<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>
AuthUser=<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>your_gmail_username@your_smtp_host.com<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>
AuthPass=<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>your_gmail_password<span class="hljs-tag">&lt;<span class="hljs-name">^</span>&gt;</span>
FromLineOverride=YES
UseSTARTTLS=YES
</code>
    </pre>
    <p>Save the file and exit.</p>
    <h2>Sending emails with SSMTP</h2>
    <p>Once your configuration is done, in order to send an email just run the following command:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"&lt;^&gt;Here add your email body&lt;^&gt;"</span> | mail -s <span class="hljs-string">"&lt;^&gt;Here specify your email subject&lt;^&gt;"</span> &lt;^&gt;your_recepient_email@yourdomain.com&lt;^&gt;
</code>
    </pre>
    <p>You can run this directly in your terminal or include it in your bash scripts.</p>
    <h2>Sending A File with SSMTP (optional)</h2>
    <p>If you need to send files as attachments, you can use <code>mpack</code>.</p>
    <p>To install <code>mpack</code> run the following command:</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">sudo apt install mpack
</code>
    </pre>
    <p>Next, in order to send an email with a file attached, run the following command.</p>
    <pre>
      <code class="language-bash hljs bash" data-lang="bash">mpack -s <span class="hljs-string">"&lt;^&gt;Your Subject here&lt;^&gt;"</span> your_file.zip &lt;^&gt;your_recepient_email@yourdomain.com&lt;^&gt;
</code>
    </pre>
    <p>The above command would send an email to <code>&lt;^&gt;your_recepient_email@yourdomain.com&lt;^&gt;</code> with the <code>&lt;^&gt;your_file.zip&lt;^&gt;</code> attached.</p>
    <h2>Conclusion</h2>
    <p>SSMTP is a great and reliable way to implement SMTP email functionality directly in bash scripts.</p>
    <p>For more information about SSMTP I would recommend checking the official documentation <a href="https://wiki.archlinux.org/index.php/SSMTP">here</a>.</p>
    <blockquote class="notice">
      <p><strong>Notice:</strong> This content was initially posted on the <a href="https://www.digitalocean.com/community/questions/how-to-send-emails-from-a-bash-script-using-ssmtp">DigitalOcean community forum</a>.</p>
    </blockquote>
  </body></html>