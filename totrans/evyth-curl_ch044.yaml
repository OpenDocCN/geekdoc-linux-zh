- en: Autotools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The Autotools are a collection of different tools that are used together to
    generate the `configure` script. The configure script is run by the user who wants
    to build curl and it does a whole bunch of things:'
  prefs: []
  type: TYPE_NORMAL
- en: It checks for features and functions present in your system.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It offers command-line options so that you as a builder can decide what to enable
    and disable in the build. Features and protocols, etc., can be toggled on/off,
    even compiler warning levels and more.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It offers command-line options to let the builder point to specific installation
    paths for various third-party dependencies that curl can be built to use.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: It specifies on which file path the generated installation should be placed
    when ultimately the build is made and `make install` is invoked.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the most basic usage, just running `./configure` in the source directory
    is enough. When the script completes, it outputs a summary of what options it
    has detected/enabled and what features that are still disabled, some of which
    possibly because it failed to detect the presence of necessary third-party dependencies
    that are needed for those functions to work. If the summary is not what you expected
    it to be, invoke configure again with new options or with the previously used
    options adjusted.
  prefs: []
  type: TYPE_NORMAL
- en: After configure has completed, you invoke `make` to build the entire thing and
    then finally `make install` to install curl, libcurl and associated things. `make
    install` requires that you have the correct rights in your system to create and
    write files in the installation directory or you get an error displayed.
  prefs: []
  type: TYPE_NORMAL
- en: Cross-compiling
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Cross-compiling means that you build the source on one architecture but the
    output is created to be run on a different one. For example, you could build the
    source on a Linux machine but have the output work on a Windows machine.
  prefs: []
  type: TYPE_NORMAL
- en: For cross-compiling to work, you need a dedicated compiler and build system
    setup for the particular target system for which you want to build. How to get
    and install that system is not covered in this book.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have a cross compiler, you can instruct configure to use that compiler
    instead of the native compiler when it builds curl so that the end result then
    can be moved over and used on the other machine.
  prefs: []
  type: TYPE_NORMAL
- en: Static linking
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: By default, configure setups the build files so that the following ‘make’ command
    creates both shared and static versions of libcurl. You can change that with the
    `--disable-static` or `--disable-shared` options to configure.
  prefs: []
  type: TYPE_NORMAL
- en: If you instead want to build with static versions of third party libraries instead
    of shared libraries, you need to prepare yourself for an uphill battle. curl’s
    configure script is focused on setting up and building with shared libraries.
  prefs: []
  type: TYPE_NORMAL
- en: One of the differences between linking with a static library compared to linking
    with a shared one is in how shared libraries handle their own dependencies while
    static ones do not. In order to link with library `xyz` as a shared library, it
    is basically a matter of adding `-lxyz` to the linker command line no matter which
    other libraries `xyz` itself was built to use. But, if that `xyz` is instead a
    static library we also need to specify each dependency of `xyz` on the linker
    command line. curl’s configure cannot keep up with or know all possible dependencies
    for all the libraries it can be made to build with, so users wanting to build
    with static libs mostly need to provide that list of libraries to link with.
  prefs: []
  type: TYPE_NORMAL
- en: Select TLS backend
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The configure-based build offers the user to select from a wide variety of different
    TLS libraries when building. You select them by using the correct command line
    options. Before curl 7.77.0, the configure script would automatically check for
    OpenSSL, but modern versions do not.
  prefs: []
  type: TYPE_NORMAL
- en: 'AmiSSL: `--with-amissl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'AWS-LC: `--with-openssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'BearSSL: `--with-bearssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'BoringSSL: `--with-openssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'GnuTLS: `--with-gnutls`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'LibreSSL: `--with-openssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'mbedTLS: `--with-mbedtls`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'OpenSSL: `--with-openssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Rustls: `--with-rustls` (point to the rustls-ffi install path)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Schannel: `--with-schannel`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Secure Transport: `--with-secure-transport`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'wolfSSL: `--with-wolfssl`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If you do not specify which TLS library to use, the configure script fails.
    If you want to build *without* TLS support, you must explicitly ask for that with
    `--without-ssl`.
  prefs: []
  type: TYPE_NORMAL
- en: 'These `--with-*` options also allow you to provide the install prefix so that
    configure searches for the specific library where you tell it to. Like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'You can opt to build with support for **multiple** TLS libraries by specifying
    multiple `--with-*` options on the configure command line. Pick which one to make
    the default TLS backend with `--with-default-ssl-backend=[NAME]`. For example,
    build with support for both GnuTLS and OpenSSL and default to OpenSSL:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Select SSH backend
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The configure-based build offers the user to select from a variety of different
    SSH libraries when building. You select them by using the correct command-line
    options.
  prefs: []
  type: TYPE_NORMAL
- en: 'libssh2: `--with-libssh2`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'libssh: `--with-libssh`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'wolfSSH: `--with-wolfssh`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'These `--with-*` options also allow you to provide the install prefix so that
    configure searches for the specific library where you tell it to. Like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Select HTTP/3 backend
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The configure-based build offers the user to select different HTTP/3 libraries
    when building. You select them by using the correct command-line options.
  prefs: []
  type: TYPE_NORMAL
- en: 'quiche: `--with-quiche`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'ngtcp2: `--with-ngtcp2 --with-nghttp3`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'msh3: `--with-msh3`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
