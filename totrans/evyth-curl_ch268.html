<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch268.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="helpers__url__append-query__md-_-_-append-to-the-query" class="level1" data-number="267">
<h1 data-number="267">Append to the query</h1>
<p>An application can append a string to the right end of the existing query part with the <code>CURLU_APPENDQUERY</code> flag.</p>
<p>Consider a handle that holds the URL <code>https://example.com/?shoes=2</code>. An application can then add the string <code>hat=1</code> to the query part like this:</p>
<pre><code>rc = curl_url_set(urlp, CURLUPART_QUERY, &quot;hat=1&quot;, CURLU_APPENDQUERY);</code></pre>
<p>It even notices the lack of an ampersand (<code>&amp;</code>) separator so it injects one too, and the handleâ€™s full URL would then equal <code>https://example.com/?shoes=2&amp;hat=1</code>.</p>
<p>The appended string can of course also get URL encoded on add, and if asked, the encoding skips the <code>=</code> character. For example, append <code>candy=M&amp;M</code> to what we already have, and URL encode it to deal with the ampersand in the data:</p>
<pre><code>rc = curl_url_set(urlp, CURLUPART_QUERY, &quot;candy=M&amp;M&quot;,
                  CURLU_APPENDQUERY | CURLU_URLENCODE);</code></pre>
<p>Now the URL looks like <code>https://example.com/?shoes=2&amp;hat=1&amp;candy=M%26M</code>.</p>
<p><span id="helpers__url__setopt__md"></span></p>
</section>
</body>
</html>
