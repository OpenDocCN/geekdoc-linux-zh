<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch262.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="helpers__url__parse__md-_-_-parse-a-url" class="level1" data-number="261">
<h1 data-number="261">Parse a URL</h1>
<p>You parse a full URL by <em>setting</em> the <code>CURLUPART_URL</code> part in the handle:</p>
<pre><code>CURLU *h = curl_url();
rc = curl_url_set(h, CURLUPART_URL,
                  &quot;https://example.com:449/foo/bar?name=moo&quot;, 0);</code></pre>
<p>If successful, <code>rc</code> contains <code>CURLUE_OK</code> and the different URL components are held in the handle. It means that the URL was valid as far as libcurl concerns.</p>
<p>The function call’s forth argument is a bitmask. Set none, one or more bits in that to alter the parser’s behavior:</p>
<section id="helpers__url__parse__md-_-_-curlu_non_support_scheme" class="level2" data-number="261.1">
<h2 data-number="261.1"><code>CURLU_NON_SUPPORT_SCHEME</code></h2>
<p>Makes <code>curl_url_set()</code> accept a non-supported scheme. If not set, the only acceptable schemes are for the protocols libcurl knows and have built-in support for.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_urlencode" class="level2" data-number="261.2">
<h2 data-number="261.2"><code>CURLU_URLENCODE</code></h2>
<p>Makes the function URL encode the path part if any bytes in it would benefit from that: like spaces or “control characters”.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_default_scheme" class="level2" data-number="261.3">
<h2 data-number="261.3"><code>CURLU_DEFAULT_SCHEME</code></h2>
<p>If the passed in string does not use a scheme, assume that the default one was intended. The default scheme is HTTPS. If this is not set, a URL without a scheme part is not accepted as valid. Overrides the <code>CURLU_GUESS_SCHEME</code> option if both are set.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_guess_scheme" class="level2" data-number="261.4">
<h2 data-number="261.4"><code>CURLU_GUESS_SCHEME</code></h2>
<p>Makes libcurl allow the URL to be set without a scheme and it instead “guesses” which scheme that was intended based on the hostname. If the outermost sub-domain name matches DICT, FTP, IMAP, LDAP, POP3 or SMTP then that scheme is used, otherwise it picks HTTP. Conflicts with the <code>CURLU_DEFAULT_SCHEME</code> option which takes precedence if both are set.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_no_authority" class="level2" data-number="261.5">
<h2 data-number="261.5"><code>CURLU_NO_AUTHORITY</code></h2>
<p>Skips authority checks. The RFC allows individual schemes to omit the host part (normally the only mandatory part of the authority), but libcurl cannot know whether this is permitted for custom schemes. Specifying the flag permits empty authority sections, similar to how the file scheme is handled. Really only usable in combination with <code>CURLU_NON_SUPPORT_SCHEME</code>.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_path_as_is" class="level2" data-number="261.6">
<h2 data-number="261.6"><code>CURLU_PATH_AS_IS</code></h2>
<p>Makes libcurl skip the normalization of the path. That is the procedure where curl otherwise removes sequences of dot-slash and dot-dot etc. The same option used for transfers is called <code>CURLOPT_PATH_AS_IS</code>.</p>
</section>
<section id="helpers__url__parse__md-_-_-curlu_allow_space" class="level2" data-number="261.7">
<h2 data-number="261.7"><code>CURLU_ALLOW_SPACE</code></h2>
<p>Makes the URL parser allow space (ASCII 32) where possible. The URL syntax does normally not allow spaces anywhere, but they should be encoded as <code>%20</code> or <code>+</code>. When spaces are allowed, they are still not allowed in the scheme. When space is used and allowed in a URL, it is stored as-is unless <code>CURLU_URLENCODE</code> is also set, which then makes libcurl URL-encode the space before stored. This affects how the URL is constructed when <code>curl_url_get()</code> is subsequently used to extract the full URL or individual parts.</p>
<p><span id="helpers__url__redirect__md"></span></p>
</section>
</section>
</body>
</html>
