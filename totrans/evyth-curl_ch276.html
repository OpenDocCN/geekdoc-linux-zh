<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch276.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="helpers__ws__meta__md-_-_-meta" class="level1" data-number="275">
<h1 data-number="275">Meta</h1>
<p><code>curl_ws_recv()</code> and <code>curl_ws_meta()</code> both return a pointer to a <code>curl_ws_frame</code> struct, which provides information about the incoming WebSocket data. A WebSocket “frame” in this case is a part of a WebSocket fragment. It <em>can</em> be a whole fragment, but it might only be a piece of it. The <code>curl_ws_frame</code> contains information about the frame to tell you the details.</p>
<pre><code>struct curl_ws_frame {
  int age;              /* zero */
  int flags;            /* See the CURLWS_* defines */
  curl_off_t offset;    /* the offset of this data into the frame */
  curl_off_t bytesleft; /* number of pending bytes left of the payload */
};</code></pre>
<section id="helpers__ws__meta__md-_-_-age" class="level2" data-number="275.1">
<h2 data-number="275.1"><code>age</code></h2>
<p>This is just a number that identifies the age of this struct. It is always 0 now, but might increase in a future and then the struct might grow.</p>
</section>
<section id="helpers__ws__meta__md-_-_-flags" class="level2" data-number="275.2">
<h2 data-number="275.2"><code>flags</code></h2>
<p>The `flags’ field is a bitmask describing details of data.</p>
<section id="helpers__ws__meta__md-_-_-curlws_text" class="level3" data-number="275.2.1">
<h3 data-number="275.2.1"><code>CURLWS_TEXT</code></h3>
<p>The buffer contains text data. Note that this makes a difference to WebSocket but libcurl itself does make any verification of the content or precautions that you actually receive valid UTF-8 content.</p>
</section>
<section id="helpers__ws__meta__md-_-_-curlws_binary" class="level3" data-number="275.2.2">
<h3 data-number="275.2.2"><code>CURLWS_BINARY</code></h3>
<p>This is binary data.</p>
</section>
<section id="helpers__ws__meta__md-_-_-curlws_final" class="level3" data-number="275.2.3">
<h3 data-number="275.2.3"><code>CURLWS_FINAL</code></h3>
<p>This is the final fragment of the message, if this is not set, it implies that there is another fragment coming as part of the same message.</p>
</section>
<section id="helpers__ws__meta__md-_-_-curlws_close" class="level3" data-number="275.2.4">
<h3 data-number="275.2.4"><code>CURLWS_CLOSE</code></h3>
<p>This transfer is now closed.</p>
</section>
<section id="helpers__ws__meta__md-_-_-curlws_ping" class="level3" data-number="275.2.5">
<h3 data-number="275.2.5"><code>CURLWS_PING</code></h3>
<p>This is an incoming ping message, that expects a pong response.</p>
</section>
</section>
<section id="helpers__ws__meta__md-_-_-offset" class="level2" data-number="275.3">
<h2 data-number="275.3"><code>offset</code></h2>
<p>When the data delivered is just a part of a larger fragment, this identifies the offset in number of bytes into the larger fragment where this piece belongs.</p>
</section>
<section id="helpers__ws__meta__md-_-_-bytesleft" class="level2" data-number="275.4">
<h2 data-number="275.4"><code>bytesleft</code></h2>
<p>Number of outstanding payload bytes after this frame, that is left to complete this fragment.</p>
<p>The maximum size of a WebSocket fragment is 63 bits.</p>
<p><span id="helpers__ws__write__md"></span></p>
</section>
</section>
</body>
</html>
