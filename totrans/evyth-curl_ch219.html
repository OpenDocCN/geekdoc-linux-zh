<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch219.xhtml</title>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
</head>
<body epub:type="bodymatter">
<section id="transfers__callbacks__sockopt__md-_-_-sockopt" class="level1" data-number="218">
<h1 data-number="218">sockopt</h1>
<p>The sockopt callback is set with <code>CURLOPT_SOCKOPTFUNCTION</code>:</p>
<pre><code>curl_easy_setopt(handle, CURLOPT_SOCKOPTFUNCTION, sockopt_callback);</code></pre>
<p>The <code>sockopt_callback</code> function must match this prototype:</p>
<pre><code>int sockopt_callback(void *clientp,
                     curl_socket_t curlfd,
                     curlsocktype purpose);</code></pre>
<p>This callback function gets called by libcurl when a new socket has been created but before the connect call, to allow applications to change specific socket options.</p>
<p>The <strong>clientp</strong> pointer points to the private data set with <code>CURLOPT_SOCKOPTDATA</code>:</p>
<pre><code>curl_easy_setopt(handle, CURLOPT_SOCKOPTDATA, custom_pointer);</code></pre>
<p>This callback should return:</p>
<ul>
<li>CURL_SOCKOPT_OK on success</li>
<li>CURL_SOCKOPT_ERROR to signal an unrecoverable error to libcurl</li>
<li>CURL_SOCKOPT_ALREADY_CONNECTED to signal success but also that the socket is in fact already connected to the destination</li>
</ul>
<p><span id="transfers__callbacks__sslcontext__md"></span></p>
</section>
</body>
</html>
